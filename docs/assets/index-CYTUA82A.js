var dl=Object.defineProperty;var fl=(i,t,e)=>t in i?dl(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Y=(i,t,e)=>fl(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function te(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function so(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Vt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Qe={duration:.5,overwrite:!1,delay:0},hr,vt,X,It=1e8,G=1/It,ji=Math.PI*2,vl=ji/4,ml=0,oo=Math.sqrt,gl=Math.cos,_l=Math.sin,pt=function(t){return typeof t=="string"},it=function(t){return typeof t=="function"},re=function(t){return typeof t=="number"},pr=function(t){return typeof t>"u"},Yt=function(t){return typeof t=="object"},yt=function(t){return t!==!1},dr=function(){return typeof window<"u"},qn=function(t){return it(t)||pt(t)},ao=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},mt=Array.isArray,Hi=/(?:-?\.?\d|\.)+/gi,lo=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ke=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Pi=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,uo=/[+-]=-?[.\d]+/,co=/[^,'"\[\]\s]+/gi,bl=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,J,Kt,Ki,fr,Dt={},ii={},ho,po=function(t){return(ii=Oe(t,Dt))&&Et},vr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},xn=function(t,e){return!e&&console.warn(t)},fo=function(t,e){return t&&(Dt[t]=e)&&ii&&(ii[t]=e)||Dt},wn=function(){return 0},xl={suppressEvents:!0,isStart:!0,kill:!1},Xn={suppressEvents:!0,kill:!1},wl={suppressEvents:!0},mr={},me=[],$i={},vo,Tt={},Si={},as=30,Qn=[],gr="",_r=function(t){var e=t[0],n,s;if(Yt(e)||it(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(s=Qn.length;s--&&!Qn[s].targetTest(e););n=Qn[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new No(t[s],n)))||t.splice(s,1);return t},Te=function(t){return t._gsap||_r(Ft(t))[0]._gsap},mo=function(t,e,n){return(n=t[e])&&it(n)?t[e]():pr(n)&&t.getAttribute&&t.getAttribute(e)||n},Ct=function(t,e){return(t=t.split(",")).forEach(e)||t},rt=function(t){return Math.round(t*1e5)/1e5||0},ht=function(t){return Math.round(t*1e7)/1e7||0},Ge=function(t,e){var n=e.charAt(0),s=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+s:n==="-"?t-s:n==="*"?t*s:t/s},yl=function(t,e){for(var n=e.length,s=0;t.indexOf(e[s])<0&&++s<n;);return s<n},ri=function(){var t=me.length,e=me.slice(0),n,s;for($i={},me.length=0,n=0;n<t;n++)s=e[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},go=function(t,e,n,s){me.length&&!vt&&ri(),t.render(e,n,vt&&e<0&&(t._initted||t._startAt)),me.length&&!vt&&ri()},_o=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(co).length<2?e:pt(t)?t.trim():t},bo=function(t){return t},zt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Cl=function(t){return function(e,n){for(var s in n)s in e||s==="duration"&&t||s==="ease"||(e[s]=n[s])}},Oe=function(t,e){for(var n in e)t[n]=e[n];return t},ls=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=Yt(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},si=function(t,e){var n={},s;for(s in t)s in e||(n[s]=t[s]);return n},gn=function(t){var e=t.parent||J,n=t.keyframes?Cl(mt(t.keyframes)):zt;if(yt(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},Pl=function(t,e){for(var n=t.length,s=n===e.length;s&&n--&&t[n]===e[n];);return n<0},xo=function(t,e,n,s,r){var o=t[s],a;if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[s]=e,e._prev=o,e.parent=e._dp=t,e},vi=function(t,e,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var r=e._prev,o=e._next;r?r._next=o:t[n]===e&&(t[n]=o),o?o._prev=r:t[s]===e&&(t[s]=r),e._next=e._prev=e.parent=null},be=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Me=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Sl=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Gi=function(t,e,n,s){return t._startAt&&(vt?t._startAt.revert(Xn):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,s))},El=function i(t){return!t||t._ts&&i(t.parent)},us=function(t){return t._repeat?Ze(t._tTime,t=t.duration()+t._rDelay)*t:0},Ze=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},oi=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},mi=function(t){return t._end=ht(t._start+(t._tDur/Math.abs(t._ts||t._rts||G)||0))},gi=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=ht(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),mi(t),n._dirty||Me(n,t)),t},wo=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=oi(t.rawTime(),e),(!e._dur||Bn(0,e.totalDuration(),n)-e._tTime>G)&&e.render(n,!0)),Me(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-G}},$t=function(t,e,n,s){return e.parent&&be(e),e._start=ht((re(n)?n:n||t!==J?Rt(t,n,e):t._time)+e._delay),e._end=ht(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),xo(t,e,"_first","_last",t._sort?"_start":0),Wi(e)||(t._recent=e),s||wo(t,e),t._ts<0&&gi(t,t._tTime),t},yo=function(t,e){return(Dt.ScrollTrigger||vr("scrollTrigger",e))&&Dt.ScrollTrigger.create(e,t)},Co=function(t,e,n,s,r){if(xr(t,e,r),!t._initted)return 1;if(!n&&t._pt&&!vt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&vo!==Mt.frame)return me.push(t),t._lazy=[r,s],1},kl=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},Wi=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Tl=function(t,e,n,s){var r=t.ratio,o=e<0||!e&&(!t._start&&kl(t)&&!(!t._initted&&Wi(t))||(t._ts<0||t._dp._ts<0)&&!Wi(t))?0:1,a=t._rDelay,u=0,h,c,v;if(a&&t._repeat&&(u=Bn(0,t._tDur,e),c=Ze(u,a),t._yoyo&&c&1&&(o=1-o),c!==Ze(t._tTime,a)&&(r=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==r||vt||s||t._zTime===G||!e&&t._zTime){if(!t._initted&&Co(t,e,s,n,u))return;for(v=t._zTime,t._zTime=e||(n?G:0),n||(n=e&&!v),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,h=t._pt;h;)h.r(o,h.d),h=h._next;e<0&&Gi(t,e,n,!0),t._onUpdate&&!n&&At(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&At(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&be(t,1),!n&&!vt&&(At(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Ml=function(t,e,n){var s;if(n>e)for(s=t._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<e)return s;s=s._prev}},Je=function(t,e,n,s){var r=t._repeat,o=ht(e)||0,a=t._tTime/t._tDur;return a&&!s&&(t._time*=o/t._dur),t._dur=o,t._tDur=r?r<0?1e10:ht(o*(r+1)+t._rDelay*r):o,a>0&&!s&&gi(t,t._tTime=t._tDur*a),t.parent&&mi(t),n||Me(t.parent,t),t},cs=function(t){return t instanceof gt?Me(t):Je(t,t._dur)},Al={_start:0,endTime:wn,totalDuration:wn},Rt=function i(t,e,n){var s=t.labels,r=t._recent||Al,o=t.duration()>=It?r.endTime(!1):t._dur,a,u,h;return pt(e)&&(isNaN(e)||e in s)?(u=e.charAt(0),h=e.substr(-1)==="%",a=e.indexOf("="),u==="<"||u===">"?(a>=0&&(e=e.replace(/=/,"")),(u==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(a<0?r:n).totalDuration()/100:1)):a<0?(e in s||(s[e]=o),s[e]):(u=parseFloat(e.charAt(a-1)+e.substr(a+1)),h&&n&&(u=u/100*(mt(n)?n[0]:n).totalDuration()),a>1?i(t,e.substr(0,a-1),n)+u:o+u)):e==null?o:+e},_n=function(t,e,n){var s=re(e[1]),r=(s?2:1)+(t<2?0:1),o=e[r],a,u;if(s&&(o.duration=e[1]),o.parent=n,t){for(a=o,u=n;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=yt(u.vars.inherit)&&u.parent;o.immediateRender=yt(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[r-1]}return new st(e[0],o,e[r+1])},ye=function(t,e){return t||t===0?e(t):e},Bn=function(t,e,n){return n<t?t:n>e?e:n},ft=function(t,e){return!pt(t)||!(e=bl.exec(t))?"":e[1]},Vl=function(t,e,n){return ye(n,function(s){return Bn(t,e,s)})},qi=[].slice,Po=function(t,e){return t&&Yt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Yt(t[0]))&&!t.nodeType&&t!==Kt},Dl=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(s){var r;return pt(s)&&!e||Po(s,1)?(r=n).push.apply(r,Ft(s)):n.push(s)})||n},Ft=function(t,e,n){return X&&!e&&X.selector?X.selector(t):pt(t)&&!n&&(Ki||!tn())?qi.call((e||fr).querySelectorAll(t),0):mt(t)?Dl(t,n):Po(t)?qi.call(t,0):t?[t]:[]},Yi=function(t){return t=Ft(t)[0]||xn("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Ft(e,n.querySelectorAll?n:n===t?xn("Invalid scope")||fr.createElement("div"):t)}},So=function(t){return t.sort(function(){return .5-Math.random()})},Eo=function(t){if(it(t))return t;var e=Yt(t)?t:{each:t},n=Ae(e.ease),s=e.from||0,r=parseFloat(e.base)||0,o={},a=s>0&&s<1,u=isNaN(s)||a,h=e.axis,c=s,v=s;return pt(s)?c=v={center:.5,edges:.5,end:1}[s]||0:!a&&u&&(c=s[0],v=s[1]),function(f,l,d){var p=(d||e).length,m=o[p],_,w,P,E,g,x,y,b,C;if(!m){if(C=e.grid==="auto"?0:(e.grid||[1,It])[1],!C){for(y=-It;y<(y=d[C++].getBoundingClientRect().left)&&C<p;);C<p&&C--}for(m=o[p]=[],_=u?Math.min(C,p)*c-.5:s%C,w=C===It?0:u?p*v/C-.5:s/C|0,y=0,b=It,x=0;x<p;x++)P=x%C-_,E=w-(x/C|0),m[x]=g=h?Math.abs(h==="y"?E:P):oo(P*P+E*E),g>y&&(y=g),g<b&&(b=g);s==="random"&&So(m),m.max=y-b,m.min=b,m.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(C>p?p-1:h?h==="y"?p/C:C:Math.max(C,p/C))||0)*(s==="edges"?-1:1),m.b=p<0?r-p:r,m.u=ft(e.amount||e.each)||0,n=n&&p<0?Ro(n):n}return p=(m[f]-m.min)/m.max||0,ht(m.b+(n?n(p):p)*m.v)+m.u}},Xi=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var s=ht(Math.round(parseFloat(n)/t)*t*e);return(s-s%1)/e+(re(n)?0:ft(n))}},ko=function(t,e){var n=mt(t),s,r;return!n&&Yt(t)&&(s=n=t.radius||It,t.values?(t=Ft(t.values),(r=!re(t[0]))&&(s*=s)):t=Xi(t.increment)),ye(e,n?it(t)?function(o){return r=t(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),u=parseFloat(r?o.y:0),h=It,c=0,v=t.length,f,l;v--;)r?(f=t[v].x-a,l=t[v].y-u,f=f*f+l*l):f=Math.abs(t[v]-a),f<h&&(h=f,c=v);return c=!s||h<=s?t[c]:o,r||c===o||re(o)?c:c+ft(o)}:Xi(t))},To=function(t,e,n,s){return ye(mt(t)?!e:n===!0?!!(n=0):!s,function(){return mt(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*s)/s})},Ol=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduce(function(r,o){return o(r)},s)}},Bl=function(t,e){return function(n){return t(parseFloat(n))+(e||ft(n))}},Ll=function(t,e,n){return Ao(t,e,0,1,n)},Mo=function(t,e,n){return ye(n,function(s){return t[~~e(s)]})},Rl=function i(t,e,n){var s=e-t;return mt(t)?Mo(t,i(0,t.length),e):ye(n,function(r){return(s+(r-t)%s)%s+t})},Il=function i(t,e,n){var s=e-t,r=s*2;return mt(t)?Mo(t,i(0,t.length-1),e):ye(n,function(o){return o=(r+(o-t)%r)%r||0,t+(o>s?r-o:o)})},yn=function(t){for(var e=0,n="",s,r,o,a;~(s=t.indexOf("random(",e));)o=t.indexOf(")",s),a=t.charAt(s+7)==="[",r=t.substr(s+7,o-s-7).match(a?co:Hi),n+=t.substr(e,s-e)+To(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Ao=function(t,e,n,s,r){var o=e-t,a=s-n;return ye(r,function(u){return n+((u-t)/o*a||0)})},Fl=function i(t,e,n,s){var r=isNaN(t+e)?0:function(l){return(1-l)*t+l*e};if(!r){var o=pt(t),a={},u,h,c,v,f;if(n===!0&&(s=1)&&(n=null),o)t={p:t},e={p:e};else if(mt(t)&&!mt(e)){for(c=[],v=t.length,f=v-2,h=1;h<v;h++)c.push(i(t[h-1],t[h]));v--,r=function(d){d*=v;var p=Math.min(f,~~d);return c[p](d-p)},n=e}else s||(t=Oe(mt(t)?[]:{},t));if(!c){for(u in e)br.call(a,t,u,"get",e[u]);r=function(d){return Cr(d,a)||(o?t.p:t)}}}return ye(n,r)},hs=function(t,e,n){var s=t.labels,r=It,o,a,u;for(o in s)a=s[o]-e,a<0==!!n&&a&&r>(a=Math.abs(a))&&(u=o,r=a);return u},At=function(t,e,n){var s=t.vars,r=s[e],o=X,a=t._ctx,u,h,c;if(r)return u=s[e+"Params"],h=s.callbackScope||t,n&&me.length&&ri(),a&&(X=a),c=u?r.apply(h,u):r.call(h),X=o,c},vn=function(t){return be(t),t.scrollTrigger&&t.scrollTrigger.kill(!!vt),t.progress()<1&&At(t,"onInterrupt"),t},$e,Vo=[],Do=function(t){if(t)if(t=!t.name&&t.default||t,dr()||t.headless){var e=t.name,n=it(t),s=e&&!n&&t.init?function(){this._props=[]}:t,r={init:wn,render:Cr,add:br,kill:tu,modifier:Jl,rawVars:0},o={targetTest:0,get:0,getSetter:yr,aliases:{},register:0};if(tn(),t!==s){if(Tt[e])return;zt(s,zt(si(t,r),o)),Oe(s.prototype,Oe(r,si(t,o))),Tt[s.prop=e]=s,t.targetTest&&(Qn.push(s),mr[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}fo(e,s),t.register&&t.register(Et,s,Pt)}else Vo.push(t)},K=255,mn={aqua:[0,K,K],lime:[0,K,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,K],navy:[0,0,128],white:[K,K,K],olive:[128,128,0],yellow:[K,K,0],orange:[K,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[K,0,0],pink:[K,192,203],cyan:[0,K,K],transparent:[K,K,K,0]},Ei=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*K+.5|0},Oo=function(t,e,n){var s=t?re(t)?[t>>16,t>>8&K,t&K]:0:mn.black,r,o,a,u,h,c,v,f,l,d;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),mn[t])s=mn[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+r+r+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&K,s&K,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&K,t&K]}else if(t.substr(0,3)==="hsl"){if(s=d=t.match(Hi),!e)u=+s[0]%360/360,h=+s[1]/100,c=+s[2]/100,o=c<=.5?c*(h+1):c+h-c*h,r=c*2-o,s.length>3&&(s[3]*=1),s[0]=Ei(u+1/3,r,o),s[1]=Ei(u,r,o),s[2]=Ei(u-1/3,r,o);else if(~t.indexOf("="))return s=t.match(lo),n&&s.length<4&&(s[3]=1),s}else s=t.match(Hi)||mn.transparent;s=s.map(Number)}return e&&!d&&(r=s[0]/K,o=s[1]/K,a=s[2]/K,v=Math.max(r,o,a),f=Math.min(r,o,a),c=(v+f)/2,v===f?u=h=0:(l=v-f,h=c>.5?l/(2-v-f):l/(v+f),u=v===r?(o-a)/l+(o<a?6:0):v===o?(a-r)/l+2:(r-o)/l+4,u*=60),s[0]=~~(u+.5),s[1]=~~(h*100+.5),s[2]=~~(c*100+.5)),n&&s.length<4&&(s[3]=1),s},Bo=function(t){var e=[],n=[],s=-1;return t.split(ge).forEach(function(r){var o=r.match(Ke)||[];e.push.apply(e,o),n.push(s+=o.length+1)}),e.c=n,e},ps=function(t,e,n){var s="",r=(t+s).match(ge),o=e?"hsla(":"rgba(",a=0,u,h,c,v;if(!r)return t;if(r=r.map(function(f){return(f=Oo(f,e,1))&&o+(e?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(c=Bo(t),u=n.c,u.join(s)!==c.c.join(s)))for(h=t.replace(ge,"1").split(Ke),v=h.length-1;a<v;a++)s+=h[a]+(~u.indexOf(a)?r.shift()||o+"0,0,0,0)":(c.length?c:r.length?r:n).shift());if(!h)for(h=t.split(ge),v=h.length-1;a<v;a++)s+=h[a]+r[a];return s+h[v]},ge=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in mn)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),Nl=/hsl[a]?\(/,Lo=function(t){var e=t.join(" "),n;if(ge.lastIndex=0,ge.test(e))return n=Nl.test(e),t[1]=ps(t[1],n),t[0]=ps(t[0],n,Bo(t[1])),!0},Cn,Mt=function(){var i=Date.now,t=500,e=33,n=i(),s=n,r=1e3/240,o=r,a=[],u,h,c,v,f,l,d=function p(m){var _=i()-s,w=m===!0,P,E,g,x;if((_>t||_<0)&&(n+=_-e),s+=_,g=s-n,P=g-o,(P>0||w)&&(x=++v.frame,f=g-v.time*1e3,v.time=g=g/1e3,o+=P+(P>=r?4:r-P),E=1),w||(u=h(p)),E)for(l=0;l<a.length;l++)a[l](g,f,x,m)};return v={time:0,frame:0,tick:function(){d(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){ho&&(!Ki&&dr()&&(Kt=Ki=window,fr=Kt.document||{},Dt.gsap=Et,(Kt.gsapVersions||(Kt.gsapVersions=[])).push(Et.version),po(ii||Kt.GreenSockGlobals||!Kt.gsap&&Kt||{}),Vo.forEach(Do)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&v.sleep(),h=c||function(m){return setTimeout(m,o-v.time*1e3+1|0)},Cn=1,d(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(u),Cn=0,h=wn},lagSmoothing:function(m,_){t=m||1/0,e=Math.min(_||33,t)},fps:function(m){r=1e3/(m||240),o=v.time*1e3+r},add:function(m,_,w){var P=_?function(E,g,x,y){m(E,g,x,y),v.remove(P)}:m;return v.remove(m),a[w?"unshift":"push"](P),tn(),P},remove:function(m,_){~(_=a.indexOf(m))&&a.splice(_,1)&&l>=_&&l--},_listeners:a},v}(),tn=function(){return!Cn&&Mt.wake()},F={},zl=/^[\d.\-M][\d.\-,\s]/,Ul=/["']/g,jl=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),s=n[0],r=1,o=n.length,a,u,h;r<o;r++)u=n[r],a=r!==o-1?u.lastIndexOf(","):u.length,h=u.substr(0,a),e[s]=isNaN(h)?h.replace(Ul,"").trim():+h,s=u.substr(a+1).trim();return e},Hl=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),s=t.indexOf("(",e);return t.substring(e,~s&&s<n?t.indexOf(")",n+1):n)},Kl=function(t){var e=(t+"").split("("),n=F[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[jl(e[1])]:Hl(t).split(",").map(_o)):F._CE&&zl.test(t)?F._CE("",t):n},Ro=function(t){return function(e){return 1-t(1-e)}},Io=function i(t,e){for(var n=t._first,s;n;)n instanceof gt?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=e)),n=n._next},Ae=function(t,e){return t&&(it(t)?t:F[t]||Kl(t))||e},Fe=function(t,e,n,s){n===void 0&&(n=function(u){return 1-e(1-u)}),s===void 0&&(s=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var r={easeIn:e,easeOut:n,easeInOut:s},o;return Ct(t,function(a){F[a]=Dt[a]=r,F[o=a.toLowerCase()]=n;for(var u in r)F[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=F[a+"."+u]=r[u]}),r},Fo=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},ki=function i(t,e,n){var s=e>=1?e:1,r=(n||(t?.3:.45))/(e<1?e:1),o=r/ji*(Math.asin(1/s)||0),a=function(c){return c===1?1:s*Math.pow(2,-10*c)*_l((c-o)*r)+1},u=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:Fo(a);return r=ji/r,u.config=function(h,c){return i(t,h,c)},u},Ti=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},s=t==="out"?n:t==="in"?function(r){return 1-n(1-r)}:Fo(n);return s.config=function(r){return i(t,r)},s};Ct("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Fe(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});F.Linear.easeNone=F.none=F.Linear.easeIn;Fe("Elastic",ki("in"),ki("out"),ki());(function(i,t){var e=1/t,n=2*e,s=2.5*e,r=function(a){return a<e?i*a*a:a<n?i*Math.pow(a-1.5/t,2)+.75:a<s?i*(a-=2.25/t)*a+.9375:i*Math.pow(a-2.625/t,2)+.984375};Fe("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);Fe("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Fe("Circ",function(i){return-(oo(1-i*i)-1)});Fe("Sine",function(i){return i===1?1:-gl(i*vl)+1});Fe("Back",Ti("in"),Ti("out"),Ti());F.SteppedEase=F.steps=Dt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,s=t+(e?0:1),r=e?1:0,o=1-G;return function(a){return((s*Bn(0,o,a)|0)+r)*n}}};Qe.ease=F["quad.out"];Ct("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return gr+=i+","+i+"Params,"});var No=function(t,e){this.id=ml++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:mo,this.set=e?e.getSetter:yr},Pn=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Je(this,+e.duration,1,1),this.data=e.data,X&&(this._ctx=X,X.data.push(this)),Cn||Mt.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Je(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,s){if(tn(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(gi(this,n),!r._dp||r.parent||wo(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&$t(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===G||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),go(this,n,s)),this},t.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+us(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},t.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+us(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,s):this._repeat?Ze(this._tTime,r)+1:1},t.timeScale=function(n,s){if(!arguments.length)return this._rts===-G?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?oi(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-G?0:this._rts,this.totalTime(Bn(-Math.abs(this._delay),this._tDur,r),s!==!1),mi(this),Sl(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(tn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==G&&(this._tTime-=G)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&$t(s,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(yt(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?oi(s.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=wl);var s=vt;return vt=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),vt=s,this},t.globalTime=function(n){for(var s=this,r=arguments.length?n:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,cs(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,cs(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,s){return this.totalTime(Rt(this,n),yt(s))},t.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,yt(s))},t.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},t.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-G:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-G,this},t.isActive=function(){var n=this.parent||this._dp,s=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=s&&r<this.endTime(!0)-G)},t.eventCallback=function(n,s,r){var o=this.vars;return arguments.length>1?(s?(o[n]=s,r&&(o[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=s)):delete o[n],this):o[n]},t.then=function(n){var s=this;return new Promise(function(r){var o=it(n)?n:bo,a=function(){var h=s.then;s.then=null,it(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=h),r(o),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},t.kill=function(){vn(this)},i}();zt(Pn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-G,_prom:0,_ps:!1,_rts:1});var gt=function(i){so(t,i);function t(n,s){var r;return n===void 0&&(n={}),r=i.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=yt(n.sortChildren),J&&$t(n.parent||J,te(r),s),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&yo(te(r),n.scrollTrigger),r}var e=t.prototype;return e.to=function(s,r,o){return _n(0,arguments,this),this},e.from=function(s,r,o){return _n(1,arguments,this),this},e.fromTo=function(s,r,o,a){return _n(2,arguments,this),this},e.set=function(s,r,o){return r.duration=0,r.parent=this,gn(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new st(s,r,Rt(this,o),1),this},e.call=function(s,r,o){return $t(this,st.delayedCall(0,s,r),o)},e.staggerTo=function(s,r,o,a,u,h,c){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=c,o.parent=this,new st(s,o,Rt(this,u)),this},e.staggerFrom=function(s,r,o,a,u,h,c){return o.runBackwards=1,gn(o).immediateRender=yt(o.immediateRender),this.staggerTo(s,r,o,a,u,h,c)},e.staggerFromTo=function(s,r,o,a,u,h,c,v){return a.startAt=o,gn(a).immediateRender=yt(a.immediateRender),this.staggerTo(s,r,a,u,h,c,v)},e.render=function(s,r,o){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=s<=0?0:ht(s),v=this._zTime<0!=s<0&&(this._initted||!h),f,l,d,p,m,_,w,P,E,g,x,y;if(this!==J&&c>u&&s>=0&&(c=u),c!==this._tTime||o||v){if(a!==this._time&&h&&(c+=this._time-a,s+=this._time-a),f=c,E=this._start,P=this._ts,_=!P,v&&(h||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(x=this._yoyo,m=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(m*100+s,r,o);if(f=ht(c%m),c===u?(p=this._repeat,f=h):(p=~~(c/m),p&&p===c/m&&(f=h,p--),f>h&&(f=h)),g=Ze(this._tTime,m),!a&&this._tTime&&g!==p&&this._tTime-g*m-this._dur<=0&&(g=p),x&&p&1&&(f=h-f,y=1),p!==g&&!this._lock){var b=x&&g&1,C=b===(x&&p&1);if(p<g&&(b=!b),a=b?0:c%h?h:c,this._lock=1,this.render(a||(y?0:ht(p*m)),r,!h)._lock=0,this._tTime=c,!r&&this.parent&&At(this,"onRepeat"),this.vars.repeatRefresh&&!y&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,C&&(this._lock=2,a=b?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!y&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Io(this,y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=Ml(this,ht(a),ht(f)),w&&(c-=f-(f=w._start))),this._tTime=c,this._time=f,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&f&&!r&&!p&&(At(this,"onStart"),this._tTime!==c))return this;if(f>=a&&s>=0)for(l=this._first;l;){if(d=l._next,(l._act||f>=l._start)&&l._ts&&w!==l){if(l.parent!==this)return this.render(s,r,o);if(l.render(l._ts>0?(f-l._start)*l._ts:(l._dirty?l.totalDuration():l._tDur)+(f-l._start)*l._ts,r,o),f!==this._time||!this._ts&&!_){w=0,d&&(c+=this._zTime=-G);break}}l=d}else{l=this._last;for(var S=s<0?s:f;l;){if(d=l._prev,(l._act||S<=l._end)&&l._ts&&w!==l){if(l.parent!==this)return this.render(s,r,o);if(l.render(l._ts>0?(S-l._start)*l._ts:(l._dirty?l.totalDuration():l._tDur)+(S-l._start)*l._ts,r,o||vt&&(l._initted||l._startAt)),f!==this._time||!this._ts&&!_){w=0,d&&(c+=this._zTime=S?-G:G);break}}l=d}}if(w&&!r&&(this.pause(),w.render(f>=a?0:-G)._zTime=f>=a?1:-1,this._ts))return this._start=E,mi(this),this.render(s,r,o);this._onUpdate&&!r&&At(this,"onUpdate",!0),(c===u&&this._tTime>=this.totalDuration()||!c&&a)&&(E===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(c===u&&this._ts>0||!c&&this._ts<0)&&be(this,1),!r&&!(s<0&&!a)&&(c||a||!u)&&(At(this,c===u&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(s,r){var o=this;if(re(r)||(r=Rt(this,r,s)),!(s instanceof Pn)){if(mt(s))return s.forEach(function(a){return o.add(a,r)}),this;if(pt(s))return this.addLabel(s,r);if(it(s))s=st.delayedCall(0,s);else return this}return this!==s?$t(this,s,r):this},e.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-It);for(var u=[],h=this._first;h;)h._start>=a&&(h instanceof st?r&&u.push(h):(o&&u.push(h),s&&u.push.apply(u,h.getChildren(!0,r,o)))),h=h._next;return u},e.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},e.remove=function(s){return pt(s)?this.removeLabel(s):it(s)?this.killTweensOf(s):(vi(this,s),s===this._recent&&(this._recent=this._last),Me(this))},e.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ht(Mt.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),i.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},e.addLabel=function(s,r){return this.labels[s]=Rt(this,r),this},e.removeLabel=function(s){return delete this.labels[s],this},e.addPause=function(s,r,o){var a=st.delayedCall(0,r||wn,o);return a.data="isPause",this._hasPause=1,$t(this,a,Rt(this,s))},e.removePause=function(s){var r=this._first;for(s=Rt(this,s);r;)r._start===s&&r.data==="isPause"&&be(r),r=r._next},e.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),u=a.length;u--;)pe!==a[u]&&a[u].kill(s,r);return this},e.getTweensOf=function(s,r){for(var o=[],a=Ft(s),u=this._first,h=re(r),c;u;)u instanceof st?yl(u._targets,a)&&(h?(!pe||u._initted&&u._ts)&&u.globalTime(0)<=r&&u.globalTime(u.totalDuration())>r:!r||u.isActive())&&o.push(u):(c=u.getTweensOf(a,r)).length&&o.push.apply(o,c),u=u._next;return o},e.tweenTo=function(s,r){r=r||{};var o=this,a=Rt(o,s),u=r,h=u.startAt,c=u.onStart,v=u.onStartParams,f=u.immediateRender,l,d=st.to(o,zt({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||G,onStart:function(){if(o.pause(),!l){var m=r.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());d._dur!==m&&Je(d,m,0,1).render(d._time,!0,!0),l=1}c&&c.apply(d,v||[])}},r));return f?d.render(0):d},e.tweenFromTo=function(s,r,o){return this.tweenTo(r,zt({startAt:{time:Rt(this,s)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(s){return s===void 0&&(s=this._time),hs(this,Rt(this,s))},e.previousLabel=function(s){return s===void 0&&(s=this._time),hs(this,Rt(this,s),1)},e.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+G)},e.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,u=this.labels,h;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(h in u)u[h]>=o&&(u[h]+=s);return Me(this)},e.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return i.prototype.invalidate.call(this,s)},e.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Me(this)},e.totalDuration=function(s){var r=0,o=this,a=o._last,u=It,h,c,v;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(v=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>u&&o._sort&&a._ts&&!o._lock?(o._lock=1,$t(o,a,c-a._delay,1)._lock=0):u=c,c<0&&a._ts&&(r-=c,(!v&&!o._dp||v&&v.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),u=0),a._end>r&&a._ts&&(r=a._end),a=h;Je(o,o===J&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(s){if(J._ts&&(go(J,oi(s,J)),vo=Mt.frame),Mt.frame>=as){as+=Vt.autoSleep||120;var r=J._first;if((!r||!r._ts)&&Vt.autoSleep&&Mt._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Mt.sleep()}}},t}(Pn);zt(gt.prototype,{_lock:0,_hasPause:0,_forcing:0});var $l=function(t,e,n,s,r,o,a){var u=new Pt(this._pt,t,e,0,1,$o,null,r),h=0,c=0,v,f,l,d,p,m,_,w;for(u.b=n,u.e=s,n+="",s+="",(_=~s.indexOf("random("))&&(s=yn(s)),o&&(w=[n,s],o(w,t,e),n=w[0],s=w[1]),f=n.match(Pi)||[];v=Pi.exec(s);)d=v[0],p=s.substring(h,v.index),l?l=(l+1)%5:p.substr(-5)==="rgba("&&(l=1),d!==f[c++]&&(m=parseFloat(f[c-1])||0,u._pt={_next:u._pt,p:p||c===1?p:",",s:m,c:d.charAt(1)==="="?Ge(m,d)-m:parseFloat(d)-m,m:l&&l<4?Math.round:0},h=Pi.lastIndex);return u.c=h<s.length?s.substring(h,s.length):"",u.fp=a,(uo.test(s)||_)&&(u.e=0),this._pt=u,u},br=function(t,e,n,s,r,o,a,u,h,c){it(s)&&(s=s(r||0,t,o));var v=t[e],f=n!=="get"?n:it(v)?h?t[e.indexOf("set")||!it(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():v,l=it(v)?h?Xl:Ho:wr,d;if(pt(s)&&(~s.indexOf("random(")&&(s=yn(s)),s.charAt(1)==="="&&(d=Ge(f,s)+(ft(f)||0),(d||d===0)&&(s=d))),!c||f!==s||Qi)return!isNaN(f*s)&&s!==""?(d=new Pt(this._pt,t,e,+f||0,s-(f||0),typeof v=="boolean"?Zl:Ko,0,l),h&&(d.fp=h),a&&d.modifier(a,this,t),this._pt=d):(!v&&!(e in t)&&vr(e,s),$l.call(this,t,e,f,s,l,u||Vt.stringFilter,h))},Gl=function(t,e,n,s,r){if(it(t)&&(t=bn(t,r,e,n,s)),!Yt(t)||t.style&&t.nodeType||mt(t)||ao(t))return pt(t)?bn(t,r,e,n,s):t;var o={},a;for(a in t)o[a]=bn(t[a],r,e,n,s);return o},zo=function(t,e,n,s,r,o){var a,u,h,c;if(Tt[t]&&(a=new Tt[t]).init(r,a.rawVars?e[t]:Gl(e[t],s,r,o,n),n,s,o)!==!1&&(n._pt=u=new Pt(n._pt,r,t,0,1,a.render,a,0,a.priority),n!==$e))for(h=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)h[a._props[c]]=u;return a},pe,Qi,xr=function i(t,e,n){var s=t.vars,r=s.ease,o=s.startAt,a=s.immediateRender,u=s.lazy,h=s.onUpdate,c=s.runBackwards,v=s.yoyoEase,f=s.keyframes,l=s.autoRevert,d=t._dur,p=t._startAt,m=t._targets,_=t.parent,w=_&&_.data==="nested"?_.vars.targets:m,P=t._overwrite==="auto"&&!hr,E=t.timeline,g,x,y,b,C,S,T,k,M,V,A,O,D;if(E&&(!f||!r)&&(r="none"),t._ease=Ae(r,Qe.ease),t._yEase=v?Ro(Ae(v===!0?r:v,Qe.ease)):0,v&&t._yoyo&&!t._repeat&&(v=t._yEase,t._yEase=t._ease,t._ease=v),t._from=!E&&!!s.runBackwards,!E||f&&!s.stagger){if(k=m[0]?Te(m[0]).harness:0,O=k&&s[k.prop],g=si(s,mr),p&&(p._zTime<0&&p.progress(1),e<0&&c&&a&&!l?p.render(-1,!0):p.revert(c&&d?Xn:xl),p._lazy=0),o){if(be(t._startAt=st.set(m,zt({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!p&&yt(u),startAt:null,delay:0,onUpdate:h&&function(){return At(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(vt||!a&&!l)&&t._startAt.revert(Xn),a&&d&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(c&&d&&!p){if(e&&(a=!1),y=zt({overwrite:!1,data:"isFromStart",lazy:a&&!p&&yt(u),immediateRender:a,stagger:0,parent:_},g),O&&(y[k.prop]=O),be(t._startAt=st.set(m,y)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(vt?t._startAt.revert(Xn):t._startAt.render(-1,!0)),t._zTime=e,!a)i(t._startAt,G,G);else if(!e)return}for(t._pt=t._ptCache=0,u=d&&yt(u)||u&&!d,x=0;x<m.length;x++){if(C=m[x],T=C._gsap||_r(m)[x]._gsap,t._ptLookup[x]=V={},$i[T.id]&&me.length&&ri(),A=w===m?x:w.indexOf(C),k&&(M=new k).init(C,O||g,t,A,w)!==!1&&(t._pt=b=new Pt(t._pt,C,M.name,0,1,M.render,M,0,M.priority),M._props.forEach(function(B){V[B]=b}),M.priority&&(S=1)),!k||O)for(y in g)Tt[y]&&(M=zo(y,g,t,A,C,w))?M.priority&&(S=1):V[y]=b=br.call(t,C,y,"get",g[y],A,w,0,s.stringFilter);t._op&&t._op[x]&&t.kill(C,t._op[x]),P&&t._pt&&(pe=t,J.killTweensOf(C,V,t.globalTime(e)),D=!t.parent,pe=0),t._pt&&u&&($i[T.id]=1)}S&&Go(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!D,f&&e<=0&&E.render(It,!0,!0)},Wl=function(t,e,n,s,r,o,a,u){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],c,v,f,l;if(!h)for(h=t._ptCache[e]=[],f=t._ptLookup,l=t._targets.length;l--;){if(c=f[l][e],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return Qi=1,t.vars[e]="+=0",xr(t,a),Qi=0,u?xn(e+" not eligible for reset"):1;h.push(c)}for(l=h.length;l--;)v=h[l],c=v._pt||v,c.s=(s||s===0)&&!r?s:c.s+(s||0)+o*c.c,c.c=n-c.s,v.e&&(v.e=rt(n)+ft(v.e)),v.b&&(v.b=c.s+ft(v.b))},ql=function(t,e){var n=t[0]?Te(t[0]).harness:0,s=n&&n.aliases,r,o,a,u;if(!s)return e;r=Oe({},e);for(o in s)if(o in r)for(u=s[o].split(","),a=u.length;a--;)r[u[a]]=r[o];return r},Yl=function(t,e,n,s){var r=e.ease||s||"power1.inOut",o,a;if(mt(e))a=n[t]||(n[t]=[]),e.forEach(function(u,h){return a.push({t:h/(e.length-1)*100,v:u,e:r})});else for(o in e)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:r})},bn=function(t,e,n,s,r){return it(t)?t.call(e,n,s,r):pt(t)&&~t.indexOf("random(")?yn(t):t},Uo=gr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",jo={};Ct(Uo+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return jo[i]=1});var st=function(i){so(t,i);function t(n,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=i.call(this,o?s:gn(s))||this;var u=a.vars,h=u.duration,c=u.delay,v=u.immediateRender,f=u.stagger,l=u.overwrite,d=u.keyframes,p=u.defaults,m=u.scrollTrigger,_=u.yoyoEase,w=s.parent||J,P=(mt(n)||ao(n)?re(n[0]):"length"in s)?[n]:Ft(n),E,g,x,y,b,C,S,T;if(a._targets=P.length?_r(P):xn("GSAP target "+n+" not found. https://gsap.com",!Vt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=l,d||f||qn(h)||qn(c)){if(s=a.vars,E=a.timeline=new gt({data:"nested",defaults:p||{},targets:w&&w.data==="nested"?w.vars.targets:P}),E.kill(),E.parent=E._dp=te(a),E._start=0,f||qn(h)||qn(c)){if(y=P.length,S=f&&Eo(f),Yt(f))for(b in f)~Uo.indexOf(b)&&(T||(T={}),T[b]=f[b]);for(g=0;g<y;g++)x=si(s,jo),x.stagger=0,_&&(x.yoyoEase=_),T&&Oe(x,T),C=P[g],x.duration=+bn(h,te(a),g,C,P),x.delay=(+bn(c,te(a),g,C,P)||0)-a._delay,!f&&y===1&&x.delay&&(a._delay=c=x.delay,a._start+=c,x.delay=0),E.to(C,x,S?S(g,C,P):0),E._ease=F.none;E.duration()?h=c=0:a.timeline=0}else if(d){gn(zt(E.vars.defaults,{ease:"none"})),E._ease=Ae(d.ease||s.ease||"none");var k=0,M,V,A;if(mt(d))d.forEach(function(O){return E.to(P,O,">")}),E.duration();else{x={};for(b in d)b==="ease"||b==="easeEach"||Yl(b,d[b],x,d.easeEach);for(b in x)for(M=x[b].sort(function(O,D){return O.t-D.t}),k=0,g=0;g<M.length;g++)V=M[g],A={ease:V.e,duration:(V.t-(g?M[g-1].t:0))/100*h},A[b]=V.v,E.to(P,A,k),k+=A.duration;E.duration()<h&&E.to({},{duration:h-E.duration()})}}h||a.duration(h=E.duration())}else a.timeline=0;return l===!0&&!hr&&(pe=te(a),J.killTweensOf(P),pe=0),$t(w,te(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(v||!h&&!d&&a._start===ht(w._time)&&yt(v)&&El(te(a))&&w.data!=="nested")&&(a._tTime=-G,a.render(Math.max(0,-c)||0)),m&&yo(te(a),m),a}var e=t.prototype;return e.render=function(s,r,o){var a=this._time,u=this._tDur,h=this._dur,c=s<0,v=s>u-G&&!c?u:s<G?0:s,f,l,d,p,m,_,w,P,E;if(!h)Tl(this,s,r,o);else if(v!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=v,P=this.timeline,this._repeat){if(p=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+s,r,o);if(f=ht(v%p),v===u?(d=this._repeat,f=h):(d=~~(v/p),d&&d===ht(v/p)&&(f=h,d--),f>h&&(f=h)),_=this._yoyo&&d&1,_&&(E=this._yEase,f=h-f),m=Ze(this._tTime,p),f===a&&!o&&this._initted&&d===m)return this._tTime=v,this;d!==m&&(P&&this._yEase&&Io(P,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(ht(p*d),!0).invalidate()._lock=0))}if(!this._initted){if(Co(this,c?s:f,o,r,v))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&d!==m))return this;if(h!==this._dur)return this.render(s,r,o)}if(this._tTime=v,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(E||this._ease)(f/h),this._from&&(this.ratio=w=1-w),f&&!a&&!r&&!d&&(At(this,"onStart"),this._tTime!==v))return this;for(l=this._pt;l;)l.r(w,l.d),l=l._next;P&&P.render(s<0?s:P._dur*P._ease(f/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(c&&Gi(this,s,r,o),At(this,"onUpdate")),this._repeat&&d!==m&&this.vars.onRepeat&&!r&&this.parent&&At(this,"onRepeat"),(v===this._tDur||!v)&&this._tTime===v&&(c&&!this._onUpdate&&Gi(this,s,!0,!0),(s||!h)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&be(this,1),!r&&!(c&&!a)&&(v||a||_)&&(At(this,v===u?"onComplete":"onReverseComplete",!0),this._prom&&!(v<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),i.prototype.invalidate.call(this,s)},e.resetTo=function(s,r,o,a,u){Cn||Mt.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||xr(this,h),c=this._ease(h/this._dur),Wl(this,s,r,o,a,c,h,u)?this.resetTo(s,r,o,a,1):(gi(this,0),this.parent||xo(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?vn(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,pe&&pe.vars.overwrite!==!0)._first||vn(this),this.parent&&o!==this.timeline.totalDuration()&&Je(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,u=s?Ft(s):a,h=this._ptLookup,c=this._pt,v,f,l,d,p,m,_;if((!r||r==="all")&&Pl(a,u))return r==="all"&&(this._pt=0),vn(this);for(v=this._op=this._op||[],r!=="all"&&(pt(r)&&(p={},Ct(r,function(w){return p[w]=1}),r=p),r=ql(a,r)),_=a.length;_--;)if(~u.indexOf(a[_])){f=h[_],r==="all"?(v[_]=r,d=f,l={}):(l=v[_]=v[_]||{},d=r);for(p in d)m=f&&f[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&vi(this,m,"_pt"),delete f[p]),l!=="all"&&(l[p]=1)}return this._initted&&!this._pt&&c&&vn(this),this},t.to=function(s,r){return new t(s,r,arguments[2])},t.from=function(s,r){return _n(1,arguments)},t.delayedCall=function(s,r,o,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(s,r,o){return _n(2,arguments)},t.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(s,r)},t.killTweensOf=function(s,r,o){return J.killTweensOf(s,r,o)},t}(Pn);zt(st.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ct("staggerTo,staggerFrom,staggerFromTo",function(i){st[i]=function(){var t=new gt,e=qi.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var wr=function(t,e,n){return t[e]=n},Ho=function(t,e,n){return t[e](n)},Xl=function(t,e,n,s){return t[e](s.fp,n)},Ql=function(t,e,n){return t.setAttribute(e,n)},yr=function(t,e){return it(t[e])?Ho:pr(t[e])&&t.setAttribute?Ql:wr},Ko=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Zl=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},$o=function(t,e){var n=e._pt,s="";if(!t&&e.b)s=e.b;else if(t===1&&e.e)s=e.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+s,n=n._next;s+=e.c}e.set(e.t,e.p,s,e)},Cr=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Jl=function(t,e,n,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(t,e,n),r=o},tu=function(t){for(var e=this._pt,n,s;e;)s=e._next,e.p===t&&!e.op||e.op===t?vi(this,e,"_pt"):e.dep||(n=1),e=s;return!n},eu=function(t,e,n,s){s.mSet(t,e,s.m.call(s.tween,n,s.mt),s)},Go=function(t){for(var e=t._pt,n,s,r,o;e;){for(n=e._next,s=r;s&&s.pr>e.pr;)s=s._next;(e._prev=s?s._prev:o)?e._prev._next=e:r=e,(e._next=s)?s._prev=e:o=e,e=n}t._pt=r},Pt=function(){function i(e,n,s,r,o,a,u,h,c){this.t=n,this.s=r,this.c=o,this.p=s,this.r=a||Ko,this.d=u||this,this.set=h||wr,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,s,r){this.mSet=this.mSet||this.set,this.set=eu,this.m=n,this.mt=r,this.tween=s},i}();Ct(gr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return mr[i]=1});Dt.TweenMax=Dt.TweenLite=st;Dt.TimelineLite=Dt.TimelineMax=gt;J=new gt({sortChildren:!1,defaults:Qe,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Vt.stringFilter=Lo;var Ve=[],Zn={},nu=[],ds=0,iu=0,Mi=function(t){return(Zn[t]||nu).map(function(e){return e()})},Zi=function(){var t=Date.now(),e=[];t-ds>2&&(Mi("matchMediaInit"),Ve.forEach(function(n){var s=n.queries,r=n.conditions,o,a,u,h;for(a in s)o=Kt.matchMedia(s[a]).matches,o&&(u=1),o!==r[a]&&(r[a]=o,h=1);h&&(n.revert(),u&&e.push(n))}),Mi("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),ds=t,Mi("matchMedia"))},Wo=function(){function i(e,n){this.selector=n&&Yi(n),this.data=[],this._r=[],this.isReverted=!1,this.id=iu++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,s,r){it(n)&&(r=s,s=n,n=it);var o=this,a=function(){var h=X,c=o.selector,v;return h&&h!==o&&h.data.push(o),r&&(o.selector=Yi(r)),X=o,v=s.apply(o,arguments),it(v)&&o._r.push(v),X=h,o.selector=c,o.isReverted=!1,v};return o.last=a,n===it?a(o,function(u){return o.add(null,u)}):n?o[n]=a:a},t.ignore=function(n){var s=X;X=null,n(this),X=s},t.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof i?n.push.apply(n,s.getTweens()):s instanceof st&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,s){var r=this;if(n?function(){for(var a=r.getTweens(),u=r.data.length,h;u--;)h=r.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,v){return v.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),u=r.data.length;u--;)h=r.data[u],h instanceof gt?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof st)&&h.revert&&h.revert(n);r._r.forEach(function(c){return c(n,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Ve.length;o--;)Ve[o].id===this.id&&Ve.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),ru=function(){function i(e){this.contexts=[],this.scope=e,X&&X.data.push(this)}var t=i.prototype;return t.add=function(n,s,r){Yt(n)||(n={matches:n});var o=new Wo(0,r||this.scope),a=o.conditions={},u,h,c;X&&!o.selector&&(o.selector=X.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=n;for(h in n)h==="all"?c=1:(u=Kt.matchMedia(n[h]),u&&(Ve.indexOf(o)<0&&Ve.push(o),(a[h]=u.matches)&&(c=1),u.addListener?u.addListener(Zi):u.addEventListener("change",Zi)));return c&&s(o,function(v){return o.add(null,v)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},i}(),ai={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(s){return Do(s)})},timeline:function(t){return new gt(t)},getTweensOf:function(t,e){return J.getTweensOf(t,e)},getProperty:function(t,e,n,s){pt(t)&&(t=Ft(t)[0]);var r=Te(t||{}).get,o=n?bo:_o;return n==="native"&&(n=""),t&&(e?o((Tt[e]&&Tt[e].get||r)(t,e,n,s)):function(a,u,h){return o((Tt[a]&&Tt[a].get||r)(t,a,u,h))})},quickSetter:function(t,e,n){if(t=Ft(t),t.length>1){var s=t.map(function(c){return Et.quickSetter(c,e,n)}),r=s.length;return function(c){for(var v=r;v--;)s[v](c)}}t=t[0]||{};var o=Tt[e],a=Te(t),u=a.harness&&(a.harness.aliases||{})[e]||e,h=o?function(c){var v=new o;$e._pt=0,v.init(t,n?c+n:c,$e,0,[t]),v.render(1,v),$e._pt&&Cr(1,$e)}:a.set(t,u);return o?h:function(c){return h(t,u,n?c+n:c,a,1)}},quickTo:function(t,e,n){var s,r=Et.to(t,Oe((s={},s[e]="+=0.1",s.paused=!0,s),n||{})),o=function(u,h,c){return r.resetTo(e,u,h,c)};return o.tween=r,o},isTweening:function(t){return J.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ae(t.ease,Qe.ease)),ls(Qe,t||{})},config:function(t){return ls(Vt,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,s=t.plugins,r=t.defaults,o=t.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Tt[a]&&!Dt[a]&&xn(e+" effect requires "+a+" plugin.")}),Si[e]=function(a,u,h){return n(Ft(a),zt(u||{},r),h)},o&&(gt.prototype[e]=function(a,u,h){return this.add(Si[e](a,Yt(u)?u:(h=u)&&{},this),h)})},registerEase:function(t,e){F[t]=Ae(e)},parseEase:function(t,e){return arguments.length?Ae(t,e):F},getById:function(t){return J.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new gt(t),s,r;for(n.smoothChildTiming=yt(t.smoothChildTiming),J.remove(n),n._dp=0,n._time=n._tTime=J._time,s=J._first;s;)r=s._next,(e||!(!s._dur&&s instanceof st&&s.vars.onComplete===s._targets[0]))&&$t(n,s,s._start-s._delay),s=r;return $t(J,n,0),n},context:function(t,e){return t?new Wo(t,e):X},matchMedia:function(t){return new ru(t)},matchMediaRefresh:function(){return Ve.forEach(function(t){var e=t.conditions,n,s;for(s in e)e[s]&&(e[s]=!1,n=1);n&&t.revert()})||Zi()},addEventListener:function(t,e){var n=Zn[t]||(Zn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Zn[t],s=n&&n.indexOf(e);s>=0&&n.splice(s,1)},utils:{wrap:Rl,wrapYoyo:Il,distribute:Eo,random:To,snap:ko,normalize:Ll,getUnit:ft,clamp:Vl,splitColor:Oo,toArray:Ft,selector:Yi,mapRange:Ao,pipe:Ol,unitize:Bl,interpolate:Fl,shuffle:So},install:po,effects:Si,ticker:Mt,updateRoot:gt.updateRoot,plugins:Tt,globalTimeline:J,core:{PropTween:Pt,globals:fo,Tween:st,Timeline:gt,Animation:Pn,getCache:Te,_removeLinkedListItem:vi,reverting:function(){return vt},context:function(t){return t&&X&&(X.data.push(t),t._ctx=X),X},suppressOverwrites:function(t){return hr=t}}};Ct("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return ai[i]=st[i]});Mt.add(gt.updateRoot);$e=ai.to({},{duration:0});var su=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},ou=function(t,e){var n=t._targets,s,r,o;for(s in e)for(r=n.length;r--;)o=t._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=su(o,s)),o&&o.modifier&&o.modifier(e[s],t,n[r],s))},Ai=function(t,e){return{name:t,rawVars:1,init:function(s,r,o){o._onInit=function(a){var u,h;if(pt(r)&&(u={},Ct(r,function(c){return u[c]=1}),r=u),e){u={};for(h in r)u[h]=e(r[h]);r=u}ou(a,r)}}}},Et=ai.registerPlugin({name:"attr",init:function(t,e,n,s,r){var o,a,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(u||0)+"",e[o],s,r,0,0,o),a.op=o,a.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)vt?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Ai("roundProps",Xi),Ai("modifiers"),Ai("snap",ko))||ai;st.version=gt.version=Et.version="3.12.5";ho=1;dr()&&tn();F.Power0;F.Power1;F.Power2;F.Power3;F.Power4;F.Linear;F.Quad;F.Cubic;F.Quart;F.Quint;F.Strong;F.Elastic;F.Back;F.SteppedEase;F.Bounce;F.Sine;F.Expo;F.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fs,de,We,Pr,ke,vs,Sr,au=function(){return typeof window<"u"},se={},Ee=180/Math.PI,qe=Math.PI/180,Ue=Math.atan2,ms=1e8,Er=/([A-Z])/g,lu=/(left|right|width|margin|padding|x)/i,uu=/[\s,\(]\S/,Gt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ji=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},cu=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},hu=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},pu=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},qo=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Yo=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},du=function(t,e,n){return t.style[e]=n},fu=function(t,e,n){return t.style.setProperty(e,n)},vu=function(t,e,n){return t._gsap[e]=n},mu=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},gu=function(t,e,n,s,r){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(r,o)},_u=function(t,e,n,s,r){var o=t._gsap;o[e]=n,o.renderTransform(r,o)},tt="transform",St=tt+"Origin",bu=function i(t,e){var n=this,s=this.target,r=s.style,o=s._gsap;if(t in se&&r){if(this.tfm=this.tfm||{},t!=="transform")t=Gt[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return n.tfm[a]=ee(s,a)}):this.tfm[t]=o.x?o[t]:ee(s,t),t===St&&(this.tfm.zOrigin=o.zOrigin);else return Gt.transform.split(",").forEach(function(a){return i.call(n,a,e)});if(this.props.indexOf(tt)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(St,e,"")),t=tt}(r||e)&&this.props.push(t,e,r[t])},Xo=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},xu=function(){var t=this.props,e=this.target,n=e.style,s=e._gsap,r,o;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?n[t[r]]=t[r+2]:n.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(Er,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=Sr(),(!r||!r.isStart)&&!n[tt]&&(Xo(n),s.zOrigin&&n[St]&&(n[St]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Qo=function(t,e){var n={target:t,props:[],revert:xu,save:bu};return t._gsap||Et.core.getCache(t),e&&e.split(",").forEach(function(s){return n.save(s)}),n},Zo,tr=function(t,e){var n=de.createElementNS?de.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):de.createElement(t);return n&&n.style?n:de.createElement(t)},qt=function i(t,e,n){var s=getComputedStyle(t);return s[e]||s.getPropertyValue(e.replace(Er,"-$1").toLowerCase())||s.getPropertyValue(e)||!n&&i(t,en(e)||e,1)||""},gs="O,Moz,ms,Ms,Webkit".split(","),en=function(t,e,n){var s=e||ke,r=s.style,o=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(gs[o]+t in r););return o<0?null:(o===3?"ms":o>=0?gs[o]:"")+t},er=function(){au()&&window.document&&(fs=window,de=fs.document,We=de.documentElement,ke=tr("div")||{style:{}},tr("div"),tt=en(tt),St=tt+"Origin",ke.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Zo=!!en("perspective"),Sr=Et.core.reverting,Pr=1)},Vi=function i(t){var e=tr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(We.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),We.removeChild(e),this.style.cssText=r,o},_s=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Jo=function(t){var e;try{e=t.getBBox()}catch{e=Vi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Vi||(e=Vi.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+_s(t,["x","cx","x1"])||0,y:+_s(t,["y","cy","y1"])||0,width:0,height:0}:e},ta=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Jo(t))},Be=function(t,e){if(e){var n=t.style,s;e in se&&e!==St&&(e=tt),n.removeProperty?(s=e.substr(0,2),(s==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(s==="--"?e:e.replace(Er,"-$1").toLowerCase())):n.removeAttribute(e)}},fe=function(t,e,n,s,r,o){var a=new Pt(t._pt,e,n,0,1,o?Yo:qo);return t._pt=a,a.b=s,a.e=r,t._props.push(n),a},bs={deg:1,rad:1,turn:1},wu={grid:1,flex:1},xe=function i(t,e,n,s){var r=parseFloat(n)||0,o=(n+"").trim().substr((r+"").length)||"px",a=ke.style,u=lu.test(e),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(u?"Width":"Height"),v=100,f=s==="px",l=s==="%",d,p,m,_;if(s===o||!r||bs[s]||bs[o])return r;if(o!=="px"&&!f&&(r=i(t,e,n,"px")),_=t.getCTM&&ta(t),(l||o==="%")&&(se[e]||~e.indexOf("adius")))return d=_?t.getBBox()[u?"width":"height"]:t[c],rt(l?r/d*v:r/100*d);if(a[u?"width":"height"]=v+(f?o:s),p=~e.indexOf("adius")||s==="em"&&t.appendChild&&!h?t:t.parentNode,_&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===de||!p.appendChild)&&(p=de.body),m=p._gsap,m&&l&&m.width&&u&&m.time===Mt.time&&!m.uncache)return rt(r/m.width*v);if(l&&(e==="height"||e==="width")){var w=t.style[e];t.style[e]=v+s,d=t[c],w?t.style[e]=w:Be(t,e)}else(l||o==="%")&&!wu[qt(p,"display")]&&(a.position=qt(t,"position")),p===t&&(a.position="static"),p.appendChild(ke),d=ke[c],p.removeChild(ke),a.position="absolute";return u&&l&&(m=Te(p),m.time=Mt.time,m.width=p[c]),rt(f?d*r/v:d&&r?v/d*r:0)},ee=function(t,e,n,s){var r;return Pr||er(),e in Gt&&e!=="transform"&&(e=Gt[e],~e.indexOf(",")&&(e=e.split(",")[0])),se[e]&&e!=="transform"?(r=En(t,s),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:ui(qt(t,St))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=li[e]&&li[e](t,e,n)||qt(t,e)||mo(t,e)||(e==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?xe(t,e,r,n)+n:r},yu=function(t,e,n,s){if(!n||n==="none"){var r=en(e,t,1),o=r&&qt(t,r,1);o&&o!==n?(e=r,n=o):e==="borderColor"&&(n=qt(t,"borderTopColor"))}var a=new Pt(this._pt,t.style,e,0,1,$o),u=0,h=0,c,v,f,l,d,p,m,_,w,P,E,g;if(a.b=n,a.e=s,n+="",s+="",s==="auto"&&(p=t.style[e],t.style[e]=s,s=qt(t,e)||s,p?t.style[e]=p:Be(t,e)),c=[n,s],Lo(c),n=c[0],s=c[1],f=n.match(Ke)||[],g=s.match(Ke)||[],g.length){for(;v=Ke.exec(s);)m=v[0],w=s.substring(u,v.index),d?d=(d+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(d=1),m!==(p=f[h++]||"")&&(l=parseFloat(p)||0,E=p.substr((l+"").length),m.charAt(1)==="="&&(m=Ge(l,m)+E),_=parseFloat(m),P=m.substr((_+"").length),u=Ke.lastIndex-P.length,P||(P=P||Vt.units[e]||E,u===s.length&&(s+=P,a.e+=P)),E!==P&&(l=xe(t,e,p,P)||0),a._pt={_next:a._pt,p:w||h===1?w:",",s:l,c:_-l,m:d&&d<4||e==="zIndex"?Math.round:0});a.c=u<s.length?s.substring(u,s.length):""}else a.r=e==="display"&&s==="none"?Yo:qo;return uo.test(s)&&(a.e=0),this._pt=a,a},xs={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Cu=function(t){var e=t.split(" "),n=e[0],s=e[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(t=n,n=s,s=t),e[0]=xs[n]||n,e[1]=xs[s]||s,e.join(" ")},Pu=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,s=n.style,r=e.u,o=n._gsap,a,u,h;if(r==="all"||r===!0)s.cssText="",u=1;else for(r=r.split(","),h=r.length;--h>-1;)a=r[h],se[a]&&(u=1,a=a==="transformOrigin"?St:tt),Be(n,a);u&&(Be(n,tt),o&&(o.svg&&n.removeAttribute("transform"),En(n,1),o.uncache=1,Xo(s)))}},li={clearProps:function(t,e,n,s,r){if(r.data!=="isFromStart"){var o=t._pt=new Pt(t._pt,e,n,0,0,Pu);return o.u=s,o.pr=-10,o.tween=r,t._props.push(n),1}}},Sn=[1,0,0,1,0,0],ea={},na=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ws=function(t){var e=qt(t,tt);return na(e)?Sn:e.substr(7).match(lo).map(rt)},kr=function(t,e){var n=t._gsap||Te(t),s=t.style,r=ws(t),o,a,u,h;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,r=[u.a,u.b,u.c,u.d,u.e,u.f],r.join(",")==="1,0,0,1,0,0"?Sn:r):(r===Sn&&!t.offsetParent&&t!==We&&!n.svg&&(u=s.display,s.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(h=1,a=t.nextElementSibling,We.appendChild(t)),r=ws(t),u?s.display=u:Be(t,"display"),h&&(a?o.insertBefore(t,a):o?o.appendChild(t):We.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},nr=function(t,e,n,s,r,o){var a=t._gsap,u=r||kr(t,!0),h=a.xOrigin||0,c=a.yOrigin||0,v=a.xOffset||0,f=a.yOffset||0,l=u[0],d=u[1],p=u[2],m=u[3],_=u[4],w=u[5],P=e.split(" "),E=parseFloat(P[0])||0,g=parseFloat(P[1])||0,x,y,b,C;n?u!==Sn&&(y=l*m-d*p)&&(b=E*(m/y)+g*(-p/y)+(p*w-m*_)/y,C=E*(-d/y)+g*(l/y)-(l*w-d*_)/y,E=b,g=C):(x=Jo(t),E=x.x+(~P[0].indexOf("%")?E/100*x.width:E),g=x.y+(~(P[1]||P[0]).indexOf("%")?g/100*x.height:g)),s||s!==!1&&a.smooth?(_=E-h,w=g-c,a.xOffset=v+(_*l+w*p)-_,a.yOffset=f+(_*d+w*m)-w):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=g,a.smooth=!!s,a.origin=e,a.originIsAbsolute=!!n,t.style[St]="0px 0px",o&&(fe(o,a,"xOrigin",h,E),fe(o,a,"yOrigin",c,g),fe(o,a,"xOffset",v,a.xOffset),fe(o,a,"yOffset",f,a.yOffset)),t.setAttribute("data-svg-origin",E+" "+g)},En=function(t,e){var n=t._gsap||new No(t);if("x"in n&&!e&&!n.uncache)return n;var s=t.style,r=n.scaleX<0,o="px",a="deg",u=getComputedStyle(t),h=qt(t,St)||"0",c,v,f,l,d,p,m,_,w,P,E,g,x,y,b,C,S,T,k,M,V,A,O,D,B,I,$,Z,q,ut,ct,at;return c=v=f=p=m=_=w=P=E=0,l=d=1,n.svg=!!(t.getCTM&&ta(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(s[tt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[tt]!=="none"?u[tt]:"")),s.scale=s.rotate=s.translate="none"),y=kr(t,n.svg),n.svg&&(n.uncache?(B=t.getBBox(),h=n.xOrigin-B.x+"px "+(n.yOrigin-B.y)+"px",D=""):D=!e&&t.getAttribute("data-svg-origin"),nr(t,D||h,!!D||n.originIsAbsolute,n.smooth!==!1,y)),g=n.xOrigin||0,x=n.yOrigin||0,y!==Sn&&(T=y[0],k=y[1],M=y[2],V=y[3],c=A=y[4],v=O=y[5],y.length===6?(l=Math.sqrt(T*T+k*k),d=Math.sqrt(V*V+M*M),p=T||k?Ue(k,T)*Ee:0,w=M||V?Ue(M,V)*Ee+p:0,w&&(d*=Math.abs(Math.cos(w*qe))),n.svg&&(c-=g-(g*T+x*M),v-=x-(g*k+x*V))):(at=y[6],ut=y[7],$=y[8],Z=y[9],q=y[10],ct=y[11],c=y[12],v=y[13],f=y[14],b=Ue(at,q),m=b*Ee,b&&(C=Math.cos(-b),S=Math.sin(-b),D=A*C+$*S,B=O*C+Z*S,I=at*C+q*S,$=A*-S+$*C,Z=O*-S+Z*C,q=at*-S+q*C,ct=ut*-S+ct*C,A=D,O=B,at=I),b=Ue(-M,q),_=b*Ee,b&&(C=Math.cos(-b),S=Math.sin(-b),D=T*C-$*S,B=k*C-Z*S,I=M*C-q*S,ct=V*S+ct*C,T=D,k=B,M=I),b=Ue(k,T),p=b*Ee,b&&(C=Math.cos(b),S=Math.sin(b),D=T*C+k*S,B=A*C+O*S,k=k*C-T*S,O=O*C-A*S,T=D,A=B),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,_=180-_),l=rt(Math.sqrt(T*T+k*k+M*M)),d=rt(Math.sqrt(O*O+at*at)),b=Ue(A,O),w=Math.abs(b)>2e-4?b*Ee:0,E=ct?1/(ct<0?-ct:ct):0),n.svg&&(D=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!na(qt(t,tt)),D&&t.setAttribute("transform",D))),Math.abs(w)>90&&Math.abs(w)<270&&(r?(l*=-1,w+=p<=0?180:-180,p+=p<=0?180:-180):(d*=-1,w+=w<=0?180:-180)),e=e||n.uncache,n.x=c-((n.xPercent=c&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=v-((n.yPercent=v&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-v)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=f+o,n.scaleX=rt(l),n.scaleY=rt(d),n.rotation=rt(p)+a,n.rotationX=rt(m)+a,n.rotationY=rt(_)+a,n.skewX=w+a,n.skewY=P+a,n.transformPerspective=E+o,(n.zOrigin=parseFloat(h.split(" ")[2])||!e&&n.zOrigin||0)&&(s[St]=ui(h)),n.xOffset=n.yOffset=0,n.force3D=Vt.force3D,n.renderTransform=n.svg?Eu:Zo?ia:Su,n.uncache=0,n},ui=function(t){return(t=t.split(" "))[0]+" "+t[1]},Di=function(t,e,n){var s=ft(e);return rt(parseFloat(e)+parseFloat(xe(t,"x",n+"px",s)))+s},Su=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ia(t,e)},Ce="0deg",un="0px",Pe=") ",ia=function(t,e){var n=e||this,s=n.xPercent,r=n.yPercent,o=n.x,a=n.y,u=n.z,h=n.rotation,c=n.rotationY,v=n.rotationX,f=n.skewX,l=n.skewY,d=n.scaleX,p=n.scaleY,m=n.transformPerspective,_=n.force3D,w=n.target,P=n.zOrigin,E="",g=_==="auto"&&t&&t!==1||_===!0;if(P&&(v!==Ce||c!==Ce)){var x=parseFloat(c)*qe,y=Math.sin(x),b=Math.cos(x),C;x=parseFloat(v)*qe,C=Math.cos(x),o=Di(w,o,y*C*-P),a=Di(w,a,-Math.sin(x)*-P),u=Di(w,u,b*C*-P+P)}m!==un&&(E+="perspective("+m+Pe),(s||r)&&(E+="translate("+s+"%, "+r+"%) "),(g||o!==un||a!==un||u!==un)&&(E+=u!==un||g?"translate3d("+o+", "+a+", "+u+") ":"translate("+o+", "+a+Pe),h!==Ce&&(E+="rotate("+h+Pe),c!==Ce&&(E+="rotateY("+c+Pe),v!==Ce&&(E+="rotateX("+v+Pe),(f!==Ce||l!==Ce)&&(E+="skew("+f+", "+l+Pe),(d!==1||p!==1)&&(E+="scale("+d+", "+p+Pe),w.style[tt]=E||"translate(0, 0)"},Eu=function(t,e){var n=e||this,s=n.xPercent,r=n.yPercent,o=n.x,a=n.y,u=n.rotation,h=n.skewX,c=n.skewY,v=n.scaleX,f=n.scaleY,l=n.target,d=n.xOrigin,p=n.yOrigin,m=n.xOffset,_=n.yOffset,w=n.forceCSS,P=parseFloat(o),E=parseFloat(a),g,x,y,b,C;u=parseFloat(u),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,u+=c),u||h?(u*=qe,h*=qe,g=Math.cos(u)*v,x=Math.sin(u)*v,y=Math.sin(u-h)*-f,b=Math.cos(u-h)*f,h&&(c*=qe,C=Math.tan(h-c),C=Math.sqrt(1+C*C),y*=C,b*=C,c&&(C=Math.tan(c),C=Math.sqrt(1+C*C),g*=C,x*=C)),g=rt(g),x=rt(x),y=rt(y),b=rt(b)):(g=v,b=f,x=y=0),(P&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(P=xe(l,"x",o,"px"),E=xe(l,"y",a,"px")),(d||p||m||_)&&(P=rt(P+d-(d*g+p*y)+m),E=rt(E+p-(d*x+p*b)+_)),(s||r)&&(C=l.getBBox(),P=rt(P+s/100*C.width),E=rt(E+r/100*C.height)),C="matrix("+g+","+x+","+y+","+b+","+P+","+E+")",l.setAttribute("transform",C),w&&(l.style[tt]=C)},ku=function(t,e,n,s,r){var o=360,a=pt(r),u=parseFloat(r)*(a&&~r.indexOf("rad")?Ee:1),h=u-s,c=s+h+"deg",v,f;return a&&(v=r.split("_")[1],v==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),v==="cw"&&h<0?h=(h+o*ms)%o-~~(h/o)*o:v==="ccw"&&h>0&&(h=(h-o*ms)%o-~~(h/o)*o)),t._pt=f=new Pt(t._pt,e,n,s,h,cu),f.e=c,f.u="deg",t._props.push(n),f},ys=function(t,e){for(var n in e)t[n]=e[n];return t},Tu=function(t,e,n){var s=ys({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,u,h,c,v,f,l,d;s.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[tt]=e,a=En(n,1),Be(n,tt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[tt],o[tt]=e,a=En(n,1),o[tt]=h);for(u in se)h=s[u],c=a[u],h!==c&&r.indexOf(u)<0&&(l=ft(h),d=ft(c),v=l!==d?xe(n,u,h,d):parseFloat(h),f=parseFloat(c),t._pt=new Pt(t._pt,a,u,v,f-v,Ji),t._pt.u=d||0,t._props.push(u));ys(a,s)};Ct("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",s="Bottom",r="Left",o=(t<3?[e,n,s,r]:[e+r,e+n,s+n,s+r]).map(function(a){return t<2?i+a:"border"+a+i});li[t>1?"border"+i:i]=function(a,u,h,c,v){var f,l;if(arguments.length<4)return f=o.map(function(d){return ee(a,d,h)}),l=f.join(" "),l.split(f[0]).length===5?f[0]:l;f=(c+"").split(" "),l={},o.forEach(function(d,p){return l[d]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(u,l,v)}});var ra={name:"css",register:er,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,s,r){var o=this._props,a=t.style,u=n.vars.startAt,h,c,v,f,l,d,p,m,_,w,P,E,g,x,y,b;Pr||er(),this.styles=this.styles||Qo(t),b=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(c=e[p],!(Tt[p]&&zo(p,e,n,s,t,r)))){if(l=typeof c,d=li[p],l==="function"&&(c=c.call(n,s,t,r),l=typeof c),l==="string"&&~c.indexOf("random(")&&(c=yn(c)),d)d(this,t,p,c,n)&&(y=1);else if(p.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(p)+"").trim(),c+="",ge.lastIndex=0,ge.test(h)||(m=ft(h),_=ft(c)),_?m!==_&&(h=xe(t,p,h,_)+_):m&&(c+=m),this.add(a,"setProperty",h,c,s,r,0,0,p),o.push(p),b.push(p,0,a[p]);else if(l!=="undefined"){if(u&&p in u?(h=typeof u[p]=="function"?u[p].call(n,s,t,r):u[p],pt(h)&&~h.indexOf("random(")&&(h=yn(h)),ft(h+"")||h==="auto"||(h+=Vt.units[p]||ft(ee(t,p))||""),(h+"").charAt(1)==="="&&(h=ee(t,p))):h=ee(t,p),f=parseFloat(h),w=l==="string"&&c.charAt(1)==="="&&c.substr(0,2),w&&(c=c.substr(2)),v=parseFloat(c),p in Gt&&(p==="autoAlpha"&&(f===1&&ee(t,"visibility")==="hidden"&&v&&(f=0),b.push("visibility",0,a.visibility),fe(this,a,"visibility",f?"inherit":"hidden",v?"inherit":"hidden",!v)),p!=="scale"&&p!=="transform"&&(p=Gt[p],~p.indexOf(",")&&(p=p.split(",")[0]))),P=p in se,P){if(this.styles.save(p),E||(g=t._gsap,g.renderTransform&&!e.parseTransform||En(t,e.parseTransform),x=e.smoothOrigin!==!1&&g.smooth,E=this._pt=new Pt(this._pt,a,tt,0,1,g.renderTransform,g,0,-1),E.dep=1),p==="scale")this._pt=new Pt(this._pt,g,"scaleY",g.scaleY,(w?Ge(g.scaleY,w+v):v)-g.scaleY||0,Ji),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){b.push(St,0,a[St]),c=Cu(c),g.svg?nr(t,c,0,x,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==g.zOrigin&&fe(this,g,"zOrigin",g.zOrigin,_),fe(this,a,p,ui(h),ui(c)));continue}else if(p==="svgOrigin"){nr(t,c,1,x,0,this);continue}else if(p in ea){ku(this,g,p,f,w?Ge(f,w+c):c);continue}else if(p==="smoothOrigin"){fe(this,g,"smooth",g.smooth,c);continue}else if(p==="force3D"){g[p]=c;continue}else if(p==="transform"){Tu(this,c,t);continue}}else p in a||(p=en(p)||p);if(P||(v||v===0)&&(f||f===0)&&!uu.test(c)&&p in a)m=(h+"").substr((f+"").length),v||(v=0),_=ft(c)||(p in Vt.units?Vt.units[p]:m),m!==_&&(f=xe(t,p,h,_)),this._pt=new Pt(this._pt,P?g:a,p,f,(w?Ge(f,w+v):v)-f,!P&&(_==="px"||p==="zIndex")&&e.autoRound!==!1?pu:Ji),this._pt.u=_||0,m!==_&&_!=="%"&&(this._pt.b=h,this._pt.r=hu);else if(p in a)yu.call(this,t,p,h,w?w+c:c);else if(p in t)this.add(t,p,h||t[p],w?w+c:c,s,r);else if(p!=="parseTransform"){vr(p,c);continue}P||(p in a?b.push(p,0,a[p]):b.push(p,1,h||t[p])),o.push(p)}}y&&Go(this)},render:function(t,e){if(e.tween._time||!Sr())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:ee,aliases:Gt,getSetter:function(t,e,n){var s=Gt[e];return s&&s.indexOf(",")<0&&(e=s),e in se&&e!==St&&(t._gsap.x||ee(t,"x"))?n&&vs===n?e==="scale"?mu:vu:(vs=n||{})&&(e==="scale"?gu:_u):t.style&&!pr(t.style[e])?du:~e.indexOf("-")?fu:yr(t,e)},core:{_removeProperty:Be,_getMatrix:kr}};Et.utils.checkPrefix=en;Et.core.getStyleSaver=Qo;(function(i,t,e,n){var s=Ct(i+","+t+","+e,function(r){se[r]=1});Ct(t,function(r){Vt.units[r]="deg",ea[r]=1}),Gt[s[13]]=i+","+t,Ct(n,function(r){var o=r.split(":");Gt[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ct("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Vt.units[i]="px"});Et.registerPlugin(ra);var ir=Et.registerPlugin(ra)||Et;ir.core.Tween;/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function W(i){return i==null}function Tr(i){return i!==null&&typeof i=="object"}function rr(i){return i!==null&&typeof i=="object"}function Mu(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function Le(i,t){return Array.from(new Set([...Object.keys(i),...Object.keys(t)])).reduce((n,s)=>{const r=i[s],o=t[s];return rr(r)&&rr(o)?Object.assign(Object.assign({},n),{[s]:Le(r,o)}):Object.assign(Object.assign({},n),{[s]:s in t?o:r})},{})}function Mr(i){return Tr(i)?"target"in i:!1}const Au={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:i=>`Not compatible with  plugin '${i.id}'`,propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class nt{static alreadyDisposed(){return new nt({type:"alreadydisposed"})}static notBindable(){return new nt({type:"notbindable"})}static notCompatible(t,e){return new nt({type:"notcompatible",context:{id:`${t}.${e}`}})}static propertyNotFound(t){return new nt({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new nt({type:"shouldneverhappen"})}constructor(t){var e;this.message=(e=Au[t.type](t.context))!==null&&e!==void 0?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class ci{constructor(t,e){this.obj_=t,this.key=e}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,e){const n=this.read();if(!ci.isBindable(n))throw nt.notBindable();if(!(t in n))throw nt.propertyNotFound(t);n[t]=e}}class ot{constructor(){this.observers_={}}on(t,e,n){var s;let r=this.observers_[t];return r||(r=this.observers_[t]=[]),r.push({handler:e,key:(s=n==null?void 0:n.key)!==null&&s!==void 0?s:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(s=>s.key!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(s=>{s.handler(e)})}}class Vu{constructor(t,e){var n;this.constraint_=e==null?void 0:e.constraint,this.equals_=(n=e==null?void 0:e.equals)!==null&&n!==void 0?n:(s,r)=>s===r,this.emitter=new ot,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=e??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(t):t,r=this.rawValue_;this.equals_(r,s)&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:s,sender:this}))}}class Du{constructor(t){this.emitter=new ot,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=e??{forceEmit:!1,last:!0},s=this.value_;s===t&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:this.value_,sender:this}))}}class Ou{constructor(t){this.emitter=new ot,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Q(i,t){const e=t==null?void 0:t.constraint,n=t==null?void 0:t.equals;return!e&&!n?new Du(i):new Vu(i,t)}function Bu(i){return[new Ou(i),(t,e)=>{i.setRawValue(t,e)}]}class R{constructor(t){this.emitter=new ot,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((n,s)=>Object.assign(n,{[s]:Q(t[s])}),{})}static fromObject(t){const e=this.createCore(t);return new R(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}class Ln{constructor(t){this.values=R.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class Lu{constructor(t){this.values=R.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let s=t;return W(n)||(s=Math.max(s,n)),W(e)||(s=Math.min(s,e)),s}}class Ru{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step,n=Math.round((t-e)/this.step);return e+n*this.step}}class Iu{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Fu={"**":(i,t)=>Math.pow(i,t),"*":(i,t)=>i*t,"/":(i,t)=>i/t,"%":(i,t)=>i%t,"+":(i,t)=>i+t,"-":(i,t)=>i-t,"<<":(i,t)=>i<<t,">>":(i,t)=>i>>t,">>>":(i,t)=>i>>>t,"&":(i,t)=>i&t,"^":(i,t)=>i^t,"|":(i,t)=>i|t};class Nu{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=Fu[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const zu={"+":i=>i,"-":i=>-i,"~":i=>~i};class Uu{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=zu[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ar(i){return(t,e)=>{for(let n=0;n<i.length;n++){const s=i[n](t,e);if(s!=="")return s}return""}}function kn(i,t){var e;const n=i.substr(t).match(/^\s+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function ju(i,t){const e=i.substr(t,1);return e.match(/^[1-9]$/)?e:""}function Tn(i,t){var e;const n=i.substr(t).match(/^[0-9]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Hu(i,t){const e=Tn(i,t);if(e!=="")return e;const n=i.substr(t,1);if(t+=1,n!=="-"&&n!=="+")return"";const s=Tn(i,t);return s===""?"":n+s}function Vr(i,t){const e=i.substr(t,1);if(t+=1,e.toLowerCase()!=="e")return"";const n=Hu(i,t);return n===""?"":e+n}function sa(i,t){const e=i.substr(t,1);if(e==="0")return e;const n=ju(i,t);return t+=n.length,n===""?"":n+Tn(i,t)}function Ku(i,t){const e=sa(i,t);if(t+=e.length,e==="")return"";const n=i.substr(t,1);if(t+=n.length,n!==".")return"";const s=Tn(i,t);return t+=s.length,e+n+s+Vr(i,t)}function $u(i,t){const e=i.substr(t,1);if(t+=e.length,e!==".")return"";const n=Tn(i,t);return t+=n.length,n===""?"":e+n+Vr(i,t)}function Gu(i,t){const e=sa(i,t);return t+=e.length,e===""?"":e+Vr(i,t)}const Wu=Ar([Ku,$u,Gu]);function qu(i,t){var e;const n=i.substr(t).match(/^[01]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Yu(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0b")return"";const n=qu(i,t);return n===""?"":e+n}function Xu(i,t){var e;const n=i.substr(t).match(/^[0-7]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Qu(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0o")return"";const n=Xu(i,t);return n===""?"":e+n}function Zu(i,t){var e;const n=i.substr(t).match(/^[0-9a-f]+/i);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Ju(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0x")return"";const n=Zu(i,t);return n===""?"":e+n}const tc=Ar([Yu,Qu,Ju]),ec=Ar([tc,Wu]);function nc(i,t){const e=ec(i,t);return t+=e.length,e===""?null:{evaluable:new Iu(e),cursor:t}}function ic(i,t){const e=i.substr(t,1);if(t+=e.length,e!=="(")return null;const n=aa(i,t);if(!n)return null;t=n.cursor,t+=kn(i,t).length;const s=i.substr(t,1);return t+=s.length,s!==")"?null:{evaluable:n.evaluable,cursor:t}}function rc(i,t){var e;return(e=nc(i,t))!==null&&e!==void 0?e:ic(i,t)}function oa(i,t){const e=rc(i,t);if(e)return e;const n=i.substr(t,1);if(t+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;const s=oa(i,t);return s?(t=s.cursor,{cursor:t,evaluable:new Uu(n,s.evaluable)}):null}function sc(i,t,e){e+=kn(t,e).length;const n=i.filter(s=>t.startsWith(s,e))[0];return n?(e+=n.length,e+=kn(t,e).length,{cursor:e,operator:n}):null}function oc(i,t){return(e,n)=>{const s=i(e,n);if(!s)return null;n=s.cursor;let r=s.evaluable;for(;;){const o=sc(t,e,n);if(!o)break;n=o.cursor;const a=i(e,n);if(!a)return null;n=a.cursor,r=new Nu(o.operator,r,a.evaluable)}return r?{cursor:n,evaluable:r}:null}}const ac=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,t)=>oc(i,t),oa);function aa(i,t){return t+=kn(i,t).length,ac(i,t)}function lc(i){const t=aa(i,0);return!t||t.cursor+kn(i,t.cursor).length!==i.length?null:t.evaluable}function oe(i){var t;const e=lc(i);return(t=e==null?void 0:e.evaluate())!==null&&t!==void 0?t:null}function la(i){if(typeof i=="number")return i;if(typeof i=="string"){const t=oe(i);if(!W(t))return t}return 0}function uc(i){return String(i)}function kt(i){return t=>t.toFixed(Math.max(Math.min(i,20),0))}function H(i,t,e,n,s){const r=(i-t)/(e-t);return n+r*(s-n)}function Cs(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function lt(i,t,e){return Math.min(Math.max(i,t),e)}function ua(i,t){return(i%t+t)%t}function cc(i,t){return W(i.step)?Math.max(Cs(t),2):Cs(i.step)}function ca(i){var t;return(t=i.step)!==null&&t!==void 0?t:1}function ha(i,t){var e;const n=Math.abs((e=i.step)!==null&&e!==void 0?e:t);return n===0?.1:Math.pow(10,Math.floor(Math.log10(n))-1)}function pa(i,t){return W(i.step)?null:new Ru(i.step,t)}function da(i){return!W(i.max)&&!W(i.min)?new Ln({max:i.max,min:i.min}):!W(i.max)||!W(i.min)?new Lu({max:i.max,min:i.min}):null}function fa(i,t){var e,n,s;return{formatter:(e=i.format)!==null&&e!==void 0?e:kt(cc(i,t)),keyScale:(n=i.keyScale)!==null&&n!==void 0?n:ca(i),pointerScale:(s=i.pointerScale)!==null&&s!==void 0?s:ha(i,t)}}function va(i){return{format:i.optional.function,keyScale:i.optional.number,max:i.optional.number,min:i.optional.number,pointerScale:i.optional.number,step:i.optional.number}}function Dr(i){return{constraint:i.constraint,textProps:R.fromObject(fa(i.params,i.initialValue))}}class Ne{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class _i{constructor(t){this.target=t}}class Rn extends _i{constructor(t,e,n){super(t),this.value=e,this.last=n??!0}}class hc extends _i{constructor(t,e){super(t),this.expanded=e}}class pc extends _i{constructor(t,e){super(t),this.index=e}}class dc extends _i{constructor(t,e){super(t),this.native=e}}class Mn extends Ne{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ot,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const e=this.controller.value;this.emitter_.emit("change",new Rn(this,e.binding.target.read(),t.options.last))}}class fc{constructor(t,e){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new ot}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function vc(i){if(!("binding"in i))return!1;const t=i.binding;return Mr(t)&&"read"in t&&"write"in t}function mc(i,t){const n=Object.keys(t).reduce((s,r)=>{if(s===void 0)return;const o=t[r],a=o(i[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return n}function gc(i,t){return i.reduce((e,n)=>{if(e===void 0)return;const s=t(n);if(!(!s.succeeded||s.value===void 0))return[...e,s.value]},[])}function _c(i){return i===null?!1:typeof i=="object"}function Jt(i){return t=>e=>{if(!t&&e===void 0)return{succeeded:!1,value:void 0};if(t&&e===void 0)return{succeeded:!0,value:void 0};const n=i(e);return n!==void 0?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function Ps(i){return{custom:t=>Jt(t)(i),boolean:Jt(t=>typeof t=="boolean"?t:void 0)(i),number:Jt(t=>typeof t=="number"?t:void 0)(i),string:Jt(t=>typeof t=="string"?t:void 0)(i),function:Jt(t=>typeof t=="function"?t:void 0)(i),constant:t=>Jt(e=>e===t?t:void 0)(i),raw:Jt(t=>t)(i),object:t=>Jt(e=>{if(_c(e))return mc(e,t)})(i),array:t=>Jt(e=>{if(Array.isArray(e))return gc(e,t)})(i)}}const sr={optional:Ps(!0),required:Ps(!1)};function et(i,t){const e=t(sr),n=sr.required.object(e)(i);return n.succeeded?n.value:void 0}function Ot(i,t,e,n){if(t&&!t(i))return!1;const s=et(i,e);return s?n(s):!1}function Bt(i,t){var e;return Le((e=i==null?void 0:i())!==null&&e!==void 0?e:{},t)}function De(i){return"value"in i}function ma(i){if(!Tr(i)||!("binding"in i))return!1;const t=i.binding;return Mr(t)}const Wt="http://www.w3.org/2000/svg";function hi(i){i.offsetHeight}function bc(i,t){const e=i.style.transition;i.style.transition="none",t(),i.style.transition=e}function Or(i){return i.ontouchstart!==void 0}function xc(){return globalThis}function wc(){return xc().document}function yc(i){const t=i.ownerDocument.defaultView;return t&&"document"in t?i.getContext("2d",{willReadFrequently:!0}):null}const Cc={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function bi(i,t){const e=i.createElementNS(Wt,"svg");return e.innerHTML=Cc[t],e}function ga(i,t,e){i.insertBefore(t,i.children[e])}function Br(i){i.parentElement&&i.parentElement.removeChild(i)}function _a(i){for(;i.children.length>0;)i.removeChild(i.children[0])}function Pc(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function ba(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}function ie(i,t){i.emitter.on("change",e=>{t(e.rawValue)}),t(i.rawValue)}function Xt(i,t,e){ie(i.value(t),e)}const Sc="tp";function z(i){return(e,n)=>[Sc,"-",i,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}const cn=z("lbl");function Ec(i,t){const e=i.createDocumentFragment();return t.split(`
`).map(s=>i.createTextNode(s)).forEach((s,r)=>{r>0&&e.appendChild(i.createElement("br")),e.appendChild(s)}),e}class xa{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(cn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(cn("l")),Xt(e.props,"label",r=>{W(r)?this.element.classList.add(cn(void 0,"nol")):(this.element.classList.remove(cn(void 0,"nol")),Pc(n),n.appendChild(Ec(t,r)))}),this.element.appendChild(n),this.labelElement=n;const s=t.createElement("div");s.classList.add(cn("v")),this.element.appendChild(s),this.valueElement=s}}class wa{constructor(t,e){this.props=e.props,this.valueController=e.valueController,this.viewProps=e.valueController.viewProps,this.view=new xa(t,{props:e.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Ot(t,null,e=>({label:e.optional.string}),e=>(this.props.set("label",e.label),!0))}exportProps(){return Bt(null,{label:this.props.get("label")})}}function kc(){return["veryfirst","first","last","verylast"]}const Ss=z(""),Es={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class xi{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{kc().forEach(n=>{e.classList.remove(Ss(void 0,Es[n]))}),this.blade.get("positions").forEach(n=>{e.classList.add(Ss(void 0,Es[n]))})}),this.viewProps.handleDispose(()=>{Br(e)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Ot(t,null,e=>({disabled:e.required.boolean,hidden:e.required.boolean}),e=>(this.viewProps.importState(e),!0))}exportState(){return Bt(null,Object.assign({},this.viewProps.exportState()))}}class Re extends xi{constructor(t,e){if(e.value!==e.valueController.value)throw nt.shouldNeverHappen();const n=e.valueController.viewProps,s=new wa(t,{blade:e.blade,props:e.props,valueController:e.valueController});super(Object.assign(Object.assign({},e),{view:new xa(t,{props:e.props,viewProps:n}),viewProps:n})),this.labelController=s,this.value=e.value,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Ot(t,e=>{var n,s,r;return super.importState(e)&&this.labelController.importProps(e)&&((r=(s=(n=this.valueController).importProps)===null||s===void 0?void 0:s.call(n,t))!==null&&r!==void 0?r:!0)},e=>({value:e.optional.raw}),e=>(e.value&&(this.value.rawValue=e.value),!0))}exportState(){var t,e,n;return Bt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(n=(e=(t=this.valueController).exportProps)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}))}}function ks(i){const t=Object.assign({},i);return delete t.value,t}class ya extends Re{constructor(t,e){super(t,e),this.tag=e.tag}importState(t){return Ot(t,e=>super.importState(ks(t)),e=>({tag:e.optional.string}),e=>(this.tag=e.tag,!0))}exportState(){return Bt(()=>ks(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Tc(i){return De(i)&&ma(i.value)}class Mc extends ya{importState(t){return Ot(t,e=>super.importState(e),e=>({binding:e.required.object({value:e.required.raw})}),e=>(this.value.binding.inject(e.binding.value),this.value.fetch(),!0))}}function Ac(i){return De(i)&&vc(i.value)}function Ca(i,t){for(;i.length<t;)i.push(void 0)}function Vc(i){const t=[];return Ca(t,i),t}function Dc(i){const t=i.indexOf(void 0);return t<0?i:i.slice(0,t)}function Oc(i,t){const e=[...Dc(i),t];return e.length>i.length?e.splice(0,e.length-i.length):Ca(e,i.length),e}class Bc{constructor(t){this.emitter=new ot,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=Q(Vc(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=Oc(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Lc(i){if(!("binding"in i))return!1;const t=i.binding;return Mr(t)&&"read"in t&&!("write"in t)}class Rc extends ya{exportState(){return Bt(()=>super.exportState(),{binding:{readonly:!0}})}}function Ic(i){return De(i)&&Lc(i.value)}class Fc extends Ne{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller.buttonController.emitter.on(t,r=>{n(new dc(this,r.nativeEvent))}),this}off(t,e){return this.controller.buttonController.emitter.off(t,e),this}}function Nc(i,t,e){e?i.classList.add(t):i.classList.remove(t)}function rn(i,t){return e=>{Nc(i,t,e)}}function Lr(i,t){ie(i,e=>{t.textContent=e??""})}const Oi=z("btn");class zc{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Oi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(Oi("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=t.createElement("div");s.classList.add(Oi("t")),Lr(e.props.value("title"),s),this.buttonElement.appendChild(s)}}class Uc{constructor(t,e){this.emitter=new ot,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new zc(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Ot(t,null,e=>({title:e.optional.string}),e=>(this.props.set("title",e.title),!0))}exportProps(){return Bt(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class Ts extends xi{constructor(t,e){const n=new Uc(t,{props:e.buttonProps,viewProps:e.viewProps}),s=new wa(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:s.view,viewProps:e.viewProps}),this.buttonController=n,this.labelController=s}importState(t){return Ot(t,e=>super.importState(e)&&this.buttonController.importProps(e)&&this.labelController.importProps(e),()=>({}),()=>!0)}exportState(){return Bt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Pa{constructor(t){const[e,n]=t.split("-"),s=e.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=n??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const sn=new Pa("2.0.5");function bt(i){return Object.assign({core:sn},i)}const jc=bt({id:"button",type:"blade",accept(i){const t=et(i,e=>({title:e.required.string,view:e.required.constant("button"),label:e.optional.string}));return t?{params:t}:null},controller(i){return new Ts(i.document,{blade:i.blade,buttonProps:R.fromObject({title:i.params.title}),labelProps:R.fromObject({label:i.params.label}),viewProps:i.viewProps})},api(i){return i.controller instanceof Ts?new Fc(i.controller):null}});function Hc(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Kc(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function $c(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function Gc(i){return Tr(i)?"refresh"in i&&typeof i.refresh=="function":!1}function Wc(i,t){if(!ci.isBindable(i))throw nt.notBindable();return new ci(i,t)}class qc{constructor(t,e){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new ot,this.pool_=e,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,e,n){const s=n??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Wc(t,e),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(t){return Kc(this,t)}addButton(t){return Hc(this,t)}addTab(t){return $c(this,t)}add(t,e){const n=t.controller;return this.controller_.rack.add(n,e),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const e=this.controller_.element.ownerDocument,n=this.pool_.createBlade(e,t),s=this.pool_.createApi(n);return this.add(s,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.children.forEach(t=>{Gc(t)&&t.refresh()})}onRackValueChange_(t){const e=t.bladeController,n=this.pool_.createApi(e),s=ma(e.value)?e.value.binding:null;this.emitter_.emit("change",new Rn(n,s?s.target.read():e.value.rawValue,t.options.last))}}class Rr extends Ne{constructor(t,e){super(t),this.rackApi_=new qc(t.rackController,e)}refresh(){this.rackApi_.refresh()}}class Ir extends xi{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Ot(t,e=>super.importState(e),e=>({children:e.required.array(e.required.raw)}),e=>this.rackController.rack.children.every((n,s)=>n.importState(e.children[s])))}exportState(){return Bt(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function or(i){return"rackController"in i}class Yc{constructor(t){this.emitter=new ot,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw nt.shouldNeverHappen();const n=e!==void 0?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const s=this.extract_(t);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.allItems().forEach(s=>{this.cache_.delete(s)}),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function Xc(i,t){for(let e=0;e<i.length;e++){const n=i[e];if(De(n)&&n.value===t)return n}return null}function Qc(i){return or(i)?i.rackController.rack.bcSet_:null}class Zc{constructor(t){var e,n;this.emitter=new ot,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(e=t.blade)!==null&&e!==void 0?e:null,(n=this.blade_)===null||n===void 0||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new Yc(Qc),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;(n=t.parent)===null||n===void 0||n.remove(t),t.parent=this,this.bcSet_.add(t,e)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),De(n))n.value.emitter.on("change",this.onChildValueChange_);else if(or(n)){const s=n.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),!e)return;const n=t.item;if(De(n))n.value.emitter.off("change",this.onChildValueChange_);else if(or(n)){const s=n.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===e&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===n&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(e=>e.viewProps.get("disposed")).forEach(e=>{this.bcSet_.remove(e)})}onChildValueChange_(t){const e=Xc(this.find(De),t.sender);if(!e)throw nt.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Fr{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const e=new Zc({blade:t.root?void 0:t.blade,viewProps:t.viewProps});e.emitter.on("add",this.onRackAdd_),e.emitter.on("remove",this.onRackRemove_),this.rack=e,this.viewProps.handleDispose(()=>{for(let n=this.rack.children.length-1;n>=0;n--)this.rack.children[n].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&ga(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Br(t.bladeController.view.element)}}function on(){return new R({positions:Q([],{equals:Mu})})}class In extends R{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=R.createCore(e);return new In(n)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!W(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};Xt(this,"expanded",n),Xt(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Jc(i,t){let e=0;return bc(t,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),hi(t),e=t.clientHeight,i.set("temporaryExpanded",null),hi(t)}),e}function Ms(i,t){t.style.height=i.styleHeight}function Nr(i,t){i.value("expanded").emitter.on("beforechange",()=>{if(i.set("completed",!1),W(i.get("expandedHeight"))){const e=Jc(i,t);e>0&&i.set("expandedHeight",e)}i.set("shouldFixHeight",!0),hi(t)}),i.emitter.on("change",()=>{Ms(i,t)}),Ms(i,t),t.addEventListener("transitionend",e=>{e.propertyName==="height"&&i.cleanUpTransition()})}class Sa extends Rr{constructor(t,e){super(t,e),this.emitter_=new ot,this.controller.foldable.value("expanded").emitter.on("change",n=>{this.emitter_.emit("fold",new hc(this,n.sender.rawValue))}),this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const Ea=z("cnt");class th{constructor(t,e){var n;this.className_=z((n=e.viewName)!==null&&n!==void 0?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Ea()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Xt(this.foldable_,"completed",rn(this.element,this.className_(void 0,"cpl")));const s=t.createElement("button");s.classList.add(this.className_("b")),Xt(e.props,"title",h=>{W(h)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=t.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=t.createElement("div");o.classList.add(this.className_("t")),Lr(e.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const u=t.createElement("div");u.classList.add(this.className_("c")),this.element.appendChild(u),this.containerElement=u}}class ar extends Ir{constructor(t,e){var n;const s=In.create((n=e.expanded)!==null&&n!==void 0?n:!0),r=new th(t,{foldable:s,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new Fr({blade:e.blade,element:r.containerElement,root:e.root,viewProps:e.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=s,Nr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Ot(t,e=>super.importState(e),e=>({expanded:e.required.boolean,title:e.optional.string}),e=>(this.foldable.set("expanded",e.expanded),this.props.set("title",e.title),!0))}exportState(){return Bt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const eh=bt({id:"folder",type:"blade",accept(i){const t=et(i,e=>({title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean}));return t?{params:t}:null},controller(i){return new ar(i.document,{blade:i.blade,expanded:i.params.expanded,props:R.fromObject({title:i.params.title}),viewProps:i.viewProps})},api(i){return i.controller instanceof ar?new Sa(i.controller,i.pool):null}}),nh=z("");function As(i,t){return rn(i,nh(void 0,t))}class le extends R{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Bu(Q(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,s;const r=t??{};return new le(R.createCore({disabled:(e=r.disabled)!==null&&e!==void 0?e:!1,disposed:!1,hidden:(n=r.hidden)!==null&&n!==void 0?n:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){ie(this.globalDisabled_,As(t,"disabled")),Xt(this,"hidden",As(t,"hidden"))}bindDisabled(t){ie(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){ie(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;n==null||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Vs=z("tbp");class ih{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Vs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Vs("c")),this.element.appendChild(n),this.containerElement=n}}const hn=z("tbi");class rh{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(hn()),e.viewProps.bindClassModifiers(this.element),Xt(e.props,"selected",r=>{r?this.element.classList.add(hn(void 0,"sel")):this.element.classList.remove(hn(void 0,"sel"))});const n=t.createElement("button");n.classList.add(hn("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=t.createElement("div");s.classList.add(hn("t")),Lr(e.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class sh{constructor(t,e){this.emitter=new ot,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new rh(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class lr extends Ir{constructor(t,e){const n=new ih(t,{viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new Fr({blade:e.blade,element:n.containerElement,viewProps:e.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new sh(t,{props:e.itemProps,viewProps:le.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=e.props,Xt(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(t){return Ot(t,e=>super.importState(e),e=>({selected:e.required.boolean,title:e.required.string}),e=>(this.ic_.props.set("selected",e.selected),this.ic_.props.set("title",e.title),!0))}exportState(){return Bt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class oh extends Rr{constructor(t,e){super(t,e),this.emitter_=new ot,this.onSelect_=this.onSelect_.bind(this),this.pool_=e,this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const e=this.controller.view.element.ownerDocument,n=new lr(e,{blade:on(),itemProps:R.fromObject({selected:!1,title:t.title}),props:R.fromObject({selected:!1}),viewProps:le.create()}),s=this.pool_.createApi(n);return this.rackApi_.add(s,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}onSelect_(t){this.emitter_.emit("select",new pc(this,t.rawValue))}}class ah extends Rr{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}const Ds=-1;class lh{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Q(!0),this.selectedIndex=Q(Ds),this.items_=[]}add(t,e){const n=e??this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ds,this.empty.rawValue=!0;return}const t=this.items_.findIndex(e=>e.rawValue);t<0?(this.items_.forEach((e,n)=>{e.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((e,n)=>{e.rawValue=n===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex(n=>n===t.sender);this.items_.forEach((n,s)=>{n.rawValue=s===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const pn=z("tab");class uh{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pn(),Ea()),e.viewProps.bindClassModifiers(this.element),ie(e.empty,rn(this.element,pn(void 0,"nop")));const n=t.createElement("div");n.classList.add(pn("t")),this.element.appendChild(n),this.itemsElement=n;const s=t.createElement("div");s.classList.add(pn("i")),this.element.appendChild(s);const r=t.createElement("div");r.classList.add(pn("c")),this.element.appendChild(r),this.contentsElement=r}}class Os extends Ir{constructor(t,e){const n=new lh,s=new uh(t,{empty:n.empty,viewProps:e.viewProps});super({blade:e.blade,rackController:new Fr({blade:e.blade,element:s.contentsElement,viewProps:e.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=n}add(t,e){this.rackController.rack.add(t,e)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const e=t.bladeController;ga(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const e=t.bladeController;Br(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}const ka=bt({id:"tab",type:"blade",accept(i){const t=et(i,e=>({pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(i){const t=new Os(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(e=>{const n=new lr(i.document,{blade:on(),itemProps:R.fromObject({selected:!1,title:e.title}),props:R.fromObject({selected:!1}),viewProps:le.create()});t.add(n)}),t},api(i){return i.controller instanceof Os?new oh(i.controller,i.pool):i.controller instanceof lr?new ah(i.controller,i.pool):null}});function ch(i,t){const e=i.accept(t.params);if(!e)return null;const n=et(t.params,s=>({disabled:s.optional.boolean,hidden:s.optional.boolean}));return i.controller({blade:on(),document:t.document,params:Object.assign(Object.assign({},e.params),{disabled:n==null?void 0:n.disabled,hidden:n==null?void 0:n.hidden}),viewProps:le.create({disabled:n==null?void 0:n.disabled,hidden:n==null?void 0:n.hidden})})}class zr extends Mn{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class hh{constructor(){this.disabled=!1,this.emitter=new ot}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class ph{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new ot,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Fn{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((e,n)=>n.constrain(e),t)}}function pi(i,t){if(i instanceof t)return i;if(i instanceof Fn){const e=i.constraints.reduce((n,s)=>n||(s instanceof t?s:null),null);if(e)return e}return null}class Nn{constructor(t){this.values=R.fromObject({options:t})}constrain(t){const e=this.values.get("options");return e.length===0||e.filter(s=>s.value===t).length>0?t:e[0].value}}function zn(i){var t;const e=sr;if(Array.isArray(i))return(t=et({items:i},n=>({items:n.required.array(n.required.object({text:n.required.string,value:n.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof i=="object")return e.required.raw(i).value}function Ur(i){if(Array.isArray(i))return i;const t=[];return Object.keys(i).forEach(e=>{t.push({text:e,value:i[e]})}),t}function jr(i){return W(i)?null:new Nn(Ur(i))}const Bi=z("lst");class dh{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Bi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(Bi("s")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const s=t.createElement("div");s.classList.add(Bi("m")),s.appendChild(bi(t,"dropdown")),this.element.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,Xt(this.props_,"options",r=>{_a(this.selectElement),r.forEach(o=>{const a=t.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(e=>e.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class we{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new dh(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}importProps(t){return Ot(t,null,e=>({options:e.required.custom(zn)}),e=>(this.props.set("options",Ur(e.options)),!0))}exportProps(){return Bt(null,{options:this.props.get("options")})}}const Bs=z("pop");class fh{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Bs()),e.viewProps.bindClassModifiers(this.element),ie(e.shows,rn(this.element,Bs(void 0,"v")))}}class Ta{constructor(t,e){this.shows=Q(!1),this.viewProps=e.viewProps,this.view=new fh(t,{shows:this.shows,viewProps:this.viewProps})}}const Ls=z("txt");class vh{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ls()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(Ls("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class An{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new vh(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const n=t.currentTarget.value,s=this.parser_(n);W(s)||(this.value.rawValue=s),this.view.refresh()}}function mh(i){return String(i)}function Ma(i){return i==="false"?!1:!!i}function Rs(i){return mh(i)}function gh(i){return t=>i.reduce((e,n)=>e!==null?e:n(t),null)}const _h=kt(0);function di(i){return _h(i)+"%"}function Aa(i){return String(i)}function ur(i){return i}function an({primary:i,secondary:t,forward:e,backward:n}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}i.emitter.on("change",o=>{r(()=>{t.setRawValue(e(i.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{r(()=>{i.setRawValue(n(i.rawValue,t.rawValue),o.options)}),r(()=>{t.setRawValue(e(i.rawValue,t.rawValue),o.options)})}),r(()=>{t.setRawValue(e(i.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function wt(i,t){const e=i*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+e:t.downKey?-e:0}function Vn(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function ae(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function bh(i){return i==="ArrowUp"||i==="ArrowDown"}function Va(i){return bh(i)||i==="ArrowLeft"||i==="ArrowRight"}function Li(i,t){var e,n;const s=t.ownerDocument.defaultView,r=t.getBoundingClientRect();return{x:i.pageX-(((e=s&&s.scrollX)!==null&&e!==void 0?e:0)+r.left),y:i.pageY-(((n=s&&s.scrollY)!==null&&n!==void 0?n:0)+r.top)}}class ze{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new ot,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),(e=t.currentTarget)===null||e===void 0||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Li(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Li(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Li(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=(e=t.targetTouches.item(0))!==null&&e!==void 0?e:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const Lt=z("txt");class xh{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Lt(),Lt(void 0,"num")),e.arrayPosition&&this.element.classList.add(Lt(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Lt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Lt()),this.inputElement.classList.add(Lt("i"));const s=t.createElement("div");s.classList.add(Lt("k")),this.element.appendChild(s),this.knobElement=s;const r=t.createElementNS(Wt,"svg");r.classList.add(Lt("g")),this.knobElement.appendChild(r);const o=t.createElementNS(Wt,"path");o.classList.add(Lt("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(Wt,"path");a.classList.add(Lt("gh")),r.appendChild(a),this.guideHeadElem_=a;const u=t.createElement("div");u.classList.add(z("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(Lt(void 0,"drg"));return}this.element.classList.add(Lt(void 0,"drg"));const e=t.rawValue/this.props_.get("pointerScale"),n=e+(e>0?-1:e<0?1:0),s=lt(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+s},0 L${n},4 L${n+s},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Un{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=e.parser,this.props=e.props,this.sliderProps_=(n=e.sliderProps)!==null&&n!==void 0?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=Q(null),this.view=new xh(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new ze(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const s=(e=this.sliderProps_)===null||e===void 0?void 0:e.get("min"),r=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("max");let o=t;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(t){const n=t.currentTarget.value,s=this.parser_(n);W(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(t){const e=wt(this.props.get("keyScale"),Vn(t));e!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){wt(this.props.get("keyScale"),Vn(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ri=z("sld");class wh{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ri()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ri("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const s=t.createElement("div");s.classList.add(Ri("k")),this.trackElement.appendChild(s),this.knobElement=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=lt(H(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class yh{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new wh(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(H(lt(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wt(this.props.get("keyScale"),ae(t));e!==0&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){wt(this.props.get("keyScale"),ae(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ii=z("sldtxt");class Ch{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ii());const n=t.createElement("div");n.classList.add(Ii("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Ii("t")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class fi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new yh(t,{props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Un(t,{parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new Ch(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Ot(t,null,e=>({max:e.required.number,min:e.required.number}),e=>{const n=this.sliderC_.props;return n.set("max",e.max),n.set("min",e.min),!0})}exportProps(){const t=this.sliderC_.props;return Bt(null,{max:t.get("max"),min:t.get("min")})}}function Da(i){return{sliderProps:new R({keyScale:i.keyScale,max:i.max,min:i.min}),textProps:new R({formatter:Q(i.formatter),keyScale:i.keyScale,pointerScale:Q(i.pointerScale)})}}const Ph={containerUnitSize:"cnt-usz"};function Oa(i){return`--${Ph[i]}`}function Dn(i){return va(i)}function ve(i){if(rr(i))return et(i,Dn)}function ne(i,t){if(!i)return;const e=[],n=pa(i,t);n&&e.push(n);const s=da(i);return s&&e.push(s),new Fn(e)}function Sh(i){return i?i.major===sn.major:!1}function Ba(i){if(i==="inline"||i==="popup")return i}function jn(i,t){i.write(t)}const Yn=z("ckb");class Eh{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Yn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Yn("l")),this.element.appendChild(n),this.labelElement=n;const s=t.createElement("input");s.classList.add(Yn("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(Yn("w")),this.labelElement.appendChild(r);const o=bi(t,"check");r.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class kh{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Eh(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function Th(i){const t=[],e=jr(i.options);return e&&t.push(e),new Fn(t)}const Mh=bt({id:"input-bool",type:"input",accept:(i,t)=>{if(typeof i!="boolean")return null;const e=et(t,n=>({options:n.optional.custom(zn),readonly:n.optional.constant(!1)}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>Ma,constraint:i=>Th(i.params),writer:i=>jn},controller:i=>{const t=i.document,e=i.value,n=i.constraint,s=n&&pi(n,Nn);return s?new we(t,{props:new R({options:s.values.value("options")}),value:e,viewProps:i.viewProps}):new kh(t,{value:e,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="boolean"?null:i.controller.valueController instanceof we?new zr(i.controller):null}}),Se=z("col");class Ah{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Se()),e.foldable.bindExpandedClass(this.element,Se(void 0,"expanded")),Xt(e.foldable,"completed",rn(this.element,Se(void 0,"cpl")));const n=t.createElement("div");n.classList.add(Se("h")),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Se("s")),n.appendChild(s),this.swatchElement=s;const r=t.createElement("div");if(r.classList.add(Se("t")),n.appendChild(r),this.textElement=r,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(Se("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function Vh(i,t,e){const n=lt(i/255,0,1),s=lt(t/255,0,1),r=lt(e/255,0,1),o=Math.max(n,s,r),a=Math.min(n,s,r),u=o-a;let h=0,c=0;const v=(a+o)/2;return u!==0&&(c=u/(1-Math.abs(o+a-1)),n===o?h=(s-r)/u:s===o?h=2+(r-n)/u:h=4+(n-s)/u,h=h/6+(h<0?1:0)),[h*360,c*100,v*100]}function Dh(i,t,e){const n=(i%360+360)%360,s=lt(t/100,0,1),r=lt(e/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(n/60%2-1)),u=r-o/2;let h,c,v;return n>=0&&n<60?[h,c,v]=[o,a,0]:n>=60&&n<120?[h,c,v]=[a,o,0]:n>=120&&n<180?[h,c,v]=[0,o,a]:n>=180&&n<240?[h,c,v]=[0,a,o]:n>=240&&n<300?[h,c,v]=[a,0,o]:[h,c,v]=[o,0,a],[(h+u)*255,(c+u)*255,(v+u)*255]}function Oh(i,t,e){const n=lt(i/255,0,1),s=lt(t/255,0,1),r=lt(e/255,0,1),o=Math.max(n,s,r),a=Math.min(n,s,r),u=o-a;let h;u===0?h=0:o===n?h=60*(((s-r)/u%6+6)%6):o===s?h=60*((r-n)/u+2):h=60*((n-s)/u+4);const c=o===0?0:u/o,v=o;return[h,c*100,v*100]}function La(i,t,e){const n=ua(i,360),s=lt(t/100,0,1),r=lt(e/100,0,1),o=r*s,a=o*(1-Math.abs(n/60%2-1)),u=r-o;let h,c,v;return n>=0&&n<60?[h,c,v]=[o,a,0]:n>=60&&n<120?[h,c,v]=[a,o,0]:n>=120&&n<180?[h,c,v]=[0,o,a]:n>=180&&n<240?[h,c,v]=[0,a,o]:n>=240&&n<300?[h,c,v]=[a,0,o]:[h,c,v]=[o,0,a],[(h+u)*255,(c+u)*255,(v+u)*255]}function Bh(i,t,e){const n=e+t*(100-Math.abs(2*e-100))/200;return[i,n!==0?t*(100-Math.abs(2*e-100))/n:0,e+t*(100-Math.abs(2*e-100))/(2*100)]}function Lh(i,t,e){const n=100-Math.abs(e*(200-t)/100-100);return[i,n!==0?t*e/n:0,e*(200-t)/(2*100)]}function Qt(i){return[i[0],i[1],i[2]]}function wi(i,t){return[i[0],i[1],i[2],t]}const Rh={hsl:{hsl:(i,t,e)=>[i,t,e],hsv:Bh,rgb:Dh},hsv:{hsl:Lh,hsv:(i,t,e)=>[i,t,e],rgb:La},rgb:{hsl:Vh,hsv:Oh,rgb:(i,t,e)=>[i,t,e]}};function nn(i,t){return[t==="float"?1:i==="rgb"?255:360,t==="float"?1:i==="rgb"?255:100,t==="float"?1:i==="rgb"?255:100]}function Ih(i,t){return i===t?t:ua(i,t)}function Ra(i,t,e){var n;const s=nn(t,e);return[t==="rgb"?lt(i[0],0,s[0]):Ih(i[0],s[0]),lt(i[1],0,s[1]),lt(i[2],0,s[2]),lt((n=i[3])!==null&&n!==void 0?n:1,0,1)]}function Is(i,t,e,n){const s=nn(t,e),r=nn(t,n);return i.map((o,a)=>o/s[a]*r[a])}function Ia(i,t,e){const n=Is(i,t.mode,t.type,"int"),s=Rh[t.mode][e.mode](...n);return Is(s,e.mode,"int",e.type)}class j{static black(){return new j([0,0,0],"rgb")}constructor(t,e){this.type="int",this.mode=e,this.comps_=Ra(t,e,this.type)}getComponents(t){return wi(Ia(Qt(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const ue=z("colp");class Fh{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(ue()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ue("hsv"));const s=t.createElement("div");s.classList.add(ue("sv")),this.svPaletteView_=e.svPaletteView,s.appendChild(this.svPaletteView_.element),n.appendChild(s);const r=t.createElement("div");r.classList.add(ue("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),n.appendChild(r),this.element.appendChild(n);const o=t.createElement("div");if(o.classList.add(ue("rgb")),this.textsView_=e.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const a=t.createElement("div");a.classList.add(ue("a"));const u=t.createElement("div");u.classList.add(ue("ap")),u.appendChild(this.alphaViews_.palette.element),a.appendChild(u);const h=t.createElement("div");h.classList.add(ue("at")),h.appendChild(this.alphaViews_.text.element),a.appendChild(h),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(e=>e.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Nh(i){return i==="int"?"int":i==="float"?"float":void 0}function Hr(i){return et(i,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(Nh)}),expanded:t.optional.boolean,picker:t.optional.custom(Ba),readonly:t.optional.constant(!1)}))}function Ie(i){return i?.1:1}function Fa(i){var t;return(t=i.color)===null||t===void 0?void 0:t.type}class Kr{constructor(t,e){this.type="float",this.mode=e,this.comps_=Ra(t,e,this.type)}getComponents(t){return wi(Ia(Qt(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const zh={int:(i,t)=>new j(i,t),float:(i,t)=>new Kr(i,t)};function $r(i,t,e){return zh[e](i,t)}function Uh(i){return i.type==="float"}function jh(i){return i.type==="int"}function Hh(i){const t=i.getComponents(),e=nn(i.mode,"int");return new j([Math.round(H(t[0],0,1,0,e[0])),Math.round(H(t[1],0,1,0,e[1])),Math.round(H(t[2],0,1,0,e[2])),t[3]],i.mode)}function Kh(i){const t=i.getComponents(),e=nn(i.mode,"int");return new Kr([H(t[0],0,e[0],0,1),H(t[1],0,e[1],0,1),H(t[2],0,e[2],0,1),t[3]],i.mode)}function _t(i,t){if(i.type===t)return i;if(jh(i)&&t==="float")return Kh(i);if(Uh(i)&&t==="int")return Hh(i);throw nt.shouldNeverHappen()}function $h(i,t){return i.alpha===t.alpha&&i.mode===t.mode&&i.notation===t.notation&&i.type===t.type}function Nt(i,t){const e=i.match(/^(.+)%$/);return Math.min(e?parseFloat(e[1])*.01*t:parseFloat(i),t)}const Gh={deg:i=>i,grad:i=>i*360/400,rad:i=>i*360/(2*Math.PI),turn:i=>i*360};function Na(i){const t=i.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(i);const e=parseFloat(t[1]),n=t[2];return Gh[n](e)}function za(i){const t=i.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Nt(t[1],255),Nt(t[2],255),Nt(t[3],255)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Wh(i){const t=za(i);return t?new j(t,"rgb"):null}function Ua(i){const t=i.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Nt(t[1],255),Nt(t[2],255),Nt(t[3],255),Nt(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function qh(i){const t=Ua(i);return t?new j(t,"rgb"):null}function ja(i){const t=i.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Na(t[1]),Nt(t[2],100),Nt(t[3],100)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Yh(i){const t=ja(i);return t?new j(t,"hsl"):null}function Ha(i){const t=i.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Na(t[1]),Nt(t[2],100),Nt(t[3],100),Nt(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function Xh(i){const t=Ha(i);return t?new j(t,"hsl"):null}function Ka(i){const t=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const e=i.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}function Qh(i){const t=Ka(i);return t?new j(t,"rgb"):null}function $a(i){const t=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),H(parseInt(t[4]+t[4],16),0,255,0,1)];const e=i.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),H(parseInt(e[4],16),0,255,0,1)]:null}function Zh(i){const t=$a(i);return t?new j(t,"rgb"):null}function Ga(i){const t=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function Jh(i){return t=>{const e=Ga(t);return e?$r(e,"rgb",i):null}}function Wa(i){const t=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const e=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:e}function tp(i){return t=>{const e=Wa(t);return e?$r(e,"rgb",i):null}}const ep=[{parser:Ka,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:$a,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:za,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ua,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ja,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Ha,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ga,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Wa,result:{alpha:!0,mode:"rgb",notation:"object"}}];function np(i){return ep.reduce((t,{parser:e,result:n})=>t||(e(i)?n:null),null)}function ip(i,t="int"){const e=np(i);return e?e.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},e),{type:"int"}):e.notation==="func"?Object.assign(Object.assign({},e),{type:t}):null:null}function Hn(i){const t=[Qh,Zh,Wh,qh,Yh,Xh];t.push(Jh("int"),tp("int"));const e=gh(t);return n=>{const s=e(n);return s?_t(s,i):null}}function rp(i){const t=Hn("int");if(typeof i!="string")return j.black();const e=t(i);return e??j.black()}function qa(i){const t=lt(Math.floor(i),0,255).toString(16);return t.length===1?`0${t}`:t}function Gr(i,t="#"){const e=Qt(i.getComponents("rgb")).map(qa).join("");return`${t}${e}`}function Wr(i,t="#"){const e=i.getComponents("rgb"),n=[e[0],e[1],e[2],e[3]*255].map(qa).join("");return`${t}${n}`}function Ya(i){const t=kt(0),e=_t(i,"int");return`rgb(${Qt(e.getComponents("rgb")).map(s=>t(s)).join(", ")})`}function Jn(i){const t=kt(2),e=kt(0);return`rgba(${_t(i,"int").getComponents("rgb").map((r,o)=>(o===3?t:e)(r)).join(", ")})`}function sp(i){const t=[kt(0),di,di],e=_t(i,"int");return`hsl(${Qt(e.getComponents("hsl")).map((s,r)=>t[r](s)).join(", ")})`}function op(i){const t=[kt(0),di,di,kt(2)];return`hsla(${_t(i,"int").getComponents("hsl").map((s,r)=>t[r](s)).join(", ")})`}function Xa(i,t){const e=kt(t==="float"?2:0),n=["r","g","b"],s=_t(i,t);return`{${Qt(s.getComponents("rgb")).map((o,a)=>`${n[a]}: ${e(o)}`).join(", ")}}`}function ap(i){return t=>Xa(t,i)}function Qa(i,t){const e=kt(2),n=kt(t==="float"?2:0),s=["r","g","b","a"];return`{${_t(i,t).getComponents("rgb").map((a,u)=>{const h=u===3?e:n;return`${s[u]}: ${h(a)}`}).join(", ")}}`}function lp(i){return t=>Qa(t,i)}const up=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Gr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Wr},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Ya},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Jn},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:sp},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:op},...["int","float"].reduce((i,t)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:ap(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:lp(t)}],[])];function Za(i){return up.reduce((t,e)=>t||($h(e.format,i)?e.stringifier:null),null)}const dn=z("apl");class cp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(dn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(dn("b")),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(dn("c")),n.appendChild(s),this.colorElem_=s;const r=t.createElement("div");r.classList.add(dn("m")),this.element.appendChild(r),this.markerElem_=r;const o=t.createElement("div");o.classList.add(dn("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new j([e[0],e[1],e[2],0],"rgb"),s=new j([e[0],e[1],e[2],255],"rgb"),r=["to right",Jn(n),Jn(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Jn(t);const o=H(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class hp{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new cp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new j([r,o,a,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wt(Ie(!0),ae(t));if(e===0)return;const n=this.value.rawValue,[s,r,o,a]=n.getComponents("hsv");this.value.setRawValue(new j([s,r,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){wt(Ie(!0),ae(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const je=z("coltxt");function pp(i){const t=i.createElement("select"),e=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(e.reduce((n,s)=>{const r=i.createElement("option");return r.textContent=s.text,r.value=s.value,n.appendChild(r),n},i.createDocumentFragment())),t}class dp{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(je()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(je("m")),this.modeElem_=pp(t),this.modeElem_.classList.add(je("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const s=t.createElement("div");s.classList.add(je("mm")),s.appendChild(bi(t,"dropdown")),n.appendChild(s),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(je("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=e.inputViews,this.applyInputViews_(),ie(e.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){_a(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(e=>{const n=t.createElement("div");n.classList.add(je("c")),n.appendChild(e.element),this.inputsElem_.appendChild(n)})}}function fp(i){return kt(i==="float"?2:0)}function vp(i,t,e){const n=nn(i,t)[e];return new Ln({min:0,max:n})}function mp(i,t,e){return new Un(i,{arrayPosition:e===0?"fst":e===2?"lst":"mid",parser:t.parser,props:R.fromObject({formatter:fp(t.colorType),keyScale:Ie(!1),pointerScale:t.colorType==="float"?.01:1}),value:Q(0,{constraint:vp(t.colorMode,t.colorType,e)}),viewProps:t.viewProps})}function gp(i,t){const e={colorMode:t.colorMode,colorType:t.colorType,parser:oe,viewProps:t.viewProps};return[0,1,2].map(n=>{const s=mp(i,e,n);return an({primary:t.value,secondary:s.value,forward(r){return _t(r,t.colorType).getComponents(t.colorMode)[n]},backward(r,o){const a=t.colorMode,h=_t(r,t.colorType).getComponents(a);h[n]=o;const c=$r(wi(Qt(h),h[3]),a,t.colorType);return _t(c,"int")}}),s})}function _p(i,t){const e=new An(i,{parser:Hn("int"),props:R.fromObject({formatter:Gr}),value:Q(j.black()),viewProps:t.viewProps});return an({primary:t.value,secondary:e.value,forward:n=>new j(Qt(n.getComponents()),n.mode),backward:(n,s)=>new j(wi(Qt(s.getComponents(n.mode)),n.getComponents()[3]),n.mode)}),[e]}function bp(i){return i!=="hex"}class xp{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=Q(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new dp(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e=this.colorMode.rawValue;return bp(e)?gp(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):_p(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(n=>n.view)}}const Fi=z("hpl");class wp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Fi()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Fi("c")),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Fi("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Ya(new j([e,100,100],"hsv"));const n=H(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class yp{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new wp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=H(lt(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new j([n,r,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wt(Ie(!1),ae(t));if(e===0)return;const n=this.value.rawValue,[s,r,o,a]=n.getComponents("hsv");this.value.setRawValue(new j([s+e,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){wt(Ie(!1),ae(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ni=z("svp"),Fs=64;class Cp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ni()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=Fs,n.width=Fs,n.classList.add(Ni("c")),this.element.appendChild(n),this.canvasElement=n;const s=t.createElement("div");s.classList.add(Ni("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const t=yc(this.canvasElement);if(!t)return;const n=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=t.getImageData(0,0,s,r),a=o.data;for(let c=0;c<r;c++)for(let v=0;v<s;v++){const f=H(v,0,s,0,100),l=H(c,0,r,100,0),d=La(n[0],f,l),p=(c*s+v)*4;a[p]=d[0],a[p+1]=d[1],a[p+2]=d[2],a[p+3]=255}t.putImageData(o,0,0);const u=H(n[1],0,100,0,100);this.markerElem_.style.left=`${u}%`;const h=H(n[2],0,100,100,0);this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}}class Pp{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Cp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=H(t.point.x,0,t.bounds.width,0,100),s=H(t.point.y,0,t.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new j([r,n,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Va(t.key)&&t.preventDefault();const[e,n,s,r]=this.value.rawValue.getComponents("hsv"),o=Ie(!1),a=wt(o,ae(t)),u=wt(o,Vn(t));a===0&&u===0||this.value.setRawValue(new j([e,n+a,s+u,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Ie(!1),n=wt(e,ae(t)),s=wt(e,Vn(t));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Sp{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new yp(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Pp(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new hp(t,{value:this.value,viewProps:this.viewProps}),text:new Un(t,{parser:oe,props:R.fromObject({pointerScale:.01,keyScale:.1,formatter:kt(2)}),value:Q(0,{constraint:new Ln({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&an({primary:this.value,secondary:this.alphaIcs_.text.value,forward:n=>n.getComponents()[3],backward:(n,s)=>{const r=n.getComponents();return r[3]=s,new j(r,n.mode)}}),this.textsC_=new xp(t,{colorType:e.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Fh(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const zi=z("colsw");class Ep{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(zi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(zi("sw")),this.element.appendChild(n),this.swatchElem_=n;const s=t.createElement("button");s.classList.add(zi("b")),e.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Wr(t)}onValueChange_(){this.update_()}}class kp{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Ep(t,{value:this.value,viewProps:this.viewProps})}}class qr{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=In.create(e.expanded),this.swatchC_=new kp(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new An(t,{parser:e.parser,props:R.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ah(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=e.pickerLayout==="popup"?new Ta(t,{viewProps:this.viewProps}):null;const s=new Sp(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),an({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Nr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;(!n||!e.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ba(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!Or(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Tp(i){return Qt(i.getComponents("rgb")).reduce((t,e)=>t<<8|Math.floor(e)&255,0)}function Mp(i){return i.getComponents("rgb").reduce((t,e,n)=>{const s=Math.floor(n===3?e*255:e)&255;return t<<8|s},0)>>>0}function Ap(i){return new j([i>>16&255,i>>8&255,i&255],"rgb")}function Vp(i){return new j([i>>24&255,i>>16&255,i>>8&255,H(i&255,0,255,0,1)],"rgb")}function Dp(i){return typeof i!="number"?j.black():Ap(i)}function Op(i){return typeof i!="number"?j.black():Vp(i)}function ti(i,t){return typeof i!="object"||W(i)?!1:t in i&&typeof i[t]=="number"}function Ja(i){return ti(i,"r")&&ti(i,"g")&&ti(i,"b")}function tl(i){return Ja(i)&&ti(i,"a")}function el(i){return Ja(i)}function Yr(i,t){if(i.mode!==t.mode||i.type!==t.type)return!1;const e=i.getComponents(),n=t.getComponents();for(let s=0;s<e.length;s++)if(e[s]!==n[s])return!1;return!0}function Ns(i){return"a"in i?[i.r,i.g,i.b,i.a]:[i.r,i.g,i.b]}function Bp(i){const t=Za(i);return t?(e,n)=>{jn(e,t(n))}:null}function Lp(i){const t=i?Mp:Tp;return(e,n)=>{jn(e,t(n))}}function Rp(i,t,e){const s=_t(t,e).toRgbaObject();i.writeProperty("r",s.r),i.writeProperty("g",s.g),i.writeProperty("b",s.b),i.writeProperty("a",s.a)}function Ip(i,t,e){const s=_t(t,e).toRgbaObject();i.writeProperty("r",s.r),i.writeProperty("g",s.g),i.writeProperty("b",s.b)}function Fp(i,t){return(e,n)=>{i?Rp(e,n,t):Ip(e,n,t)}}function Np(i){var t;return!!(!((t=i==null?void 0:i.color)===null||t===void 0)&&t.alpha)}function zp(i){return i?t=>Wr(t,"0x"):t=>Gr(t,"0x")}function Up(i){return"color"in i||i.view==="color"}const jp=bt({id:"input-color-number",type:"input",accept:(i,t)=>{if(typeof i!="number"||!Up(t))return null;const e=Hr(t);return e?{initialValue:i,params:Object.assign(Object.assign({},e),{supportsAlpha:Np(t)})}:null},binding:{reader:i=>i.params.supportsAlpha?Op:Dp,equals:Yr,writer:i=>Lp(i.params.supportsAlpha)},controller:i=>{var t,e;return new qr(i.document,{colorType:"int",expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:zp(i.params.supportsAlpha),parser:Hn("int"),pickerLayout:(e=i.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:i.params.supportsAlpha,value:i.value,viewProps:i.viewProps})}});function Hp(i,t){if(!el(i))return _t(j.black(),t);if(t==="int"){const e=Ns(i);return new j(e,"rgb")}if(t==="float"){const e=Ns(i);return new Kr(e,"rgb")}return _t(j.black(),"int")}function Kp(i){return tl(i)}function $p(i){return t=>{const e=Hp(t,i);return _t(e,"int")}}function Gp(i,t){return e=>i?Qa(e,t):Xa(e,t)}const Wp=bt({id:"input-color-object",type:"input",accept:(i,t)=>{var e;if(!el(i))return null;const n=Hr(t);return n?{initialValue:i,params:Object.assign(Object.assign({},n),{colorType:(e=Fa(t))!==null&&e!==void 0?e:"int"})}:null},binding:{reader:i=>$p(i.params.colorType),equals:Yr,writer:i=>Fp(Kp(i.initialValue),i.params.colorType)},controller:i=>{var t,e;const n=tl(i.initialValue);return new qr(i.document,{colorType:i.params.colorType,expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:Gp(n,i.params.colorType),parser:Hn("int"),pickerLayout:(e=i.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:n,value:i.value,viewProps:i.viewProps})}}),qp=bt({id:"input-color-string",type:"input",accept:(i,t)=>{if(typeof i!="string"||t.view==="text")return null;const e=ip(i,Fa(t));if(!e)return null;const n=Za(e);if(!n)return null;const s=Hr(t);return s?{initialValue:i,params:Object.assign(Object.assign({},s),{format:e,stringifier:n})}:null},binding:{reader:()=>rp,equals:Yr,writer:i=>{const t=Bp(i.params.format);if(!t)throw nt.notBindable();return t}},controller:i=>{var t,e;return new qr(i.document,{colorType:i.params.format.type,expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:i.params.stringifier,parser:Hn("int"),pickerLayout:(e=i.params.picker)!==null&&e!==void 0?e:"popup",supportsAlpha:i.params.format.alpha,value:i.value,viewProps:i.viewProps})}});class Xr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((n,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(n))!==null&&o!==void 0?o:n});return this.asm_.fromComponents(e)}}const zs=z("pndtxt");class Yp{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(zs()),this.textViews.forEach(n=>{const s=t.createElement("div");s.classList.add(zs("a")),s.appendChild(n.element),this.element.appendChild(s)})}}function Xp(i,t,e){return new Un(i,{arrayPosition:e===0?"fst":e===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[e].textProps,value:Q(0,{constraint:t.axes[e].constraint}),viewProps:t.viewProps})}class Qr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,s)=>Xp(t,e,s)),this.acs_.forEach((n,s)=>{an({primary:this.value,secondary:n.value,forward:r=>e.assembly.toComponents(r)[s],backward:(r,o)=>{const a=e.assembly.toComponents(r);return a[s]=o,e.assembly.fromComponents(a)}})}),this.view=new Yp(t,{textViews:this.acs_.map(n=>n.view)})}get textControllers(){return this.acs_}}class Qp extends Mn{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function Zp(i,t){const e=[],n=pa(i,t);n&&e.push(n);const s=da(i);s&&e.push(s);const r=jr(i.options);return r&&e.push(r),new Fn(e)}const Jp=bt({id:"input-number",type:"input",accept:(i,t)=>{if(typeof i!="number")return null;const e=et(t,n=>Object.assign(Object.assign({},va(n)),{options:n.optional.custom(zn),readonly:n.optional.constant(!1)}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>la,constraint:i=>Zp(i.params,i.initialValue),writer:i=>jn},controller:i=>{const t=i.value,e=i.constraint,n=e&&pi(e,Nn);if(n)return new we(i.document,{props:new R({options:n.values.value("options")}),value:t,viewProps:i.viewProps});const s=fa(i.params,t.rawValue),r=e&&pi(e,Ln);return r?new fi(i.document,Object.assign(Object.assign({},Da(Object.assign(Object.assign({},s),{keyScale:Q(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:oe,value:t,viewProps:i.viewProps})):new Un(i.document,{parser:oe,props:R.fromObject(s),value:t,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="number"?null:i.controller.valueController instanceof fi?new Qp(i.controller):i.controller.valueController instanceof we?new zr(i.controller):null}});class _e{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(W(t))return!1;const e=t.x,n=t.y;return!(typeof e!="number"||typeof n!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const nl={toComponents:i=>i.getComponents(),fromComponents:i=>new _e(...i)},He=z("p2d");class td{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(He()),e.viewProps.bindClassModifiers(this.element),ie(e.expanded,rn(this.element,He(void 0,"expanded")));const n=t.createElement("div");n.classList.add(He("h")),this.element.appendChild(n);const s=t.createElement("button");s.classList.add(He("b")),s.appendChild(bi(t,"p2dpad")),e.viewProps.bindDisabled(s),n.appendChild(s),this.buttonElement=s;const r=t.createElement("div");if(r.classList.add(He("t")),n.appendChild(r),this.textElement=r,e.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(He("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const ce=z("p2dp");class ed{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(ce()),e.layout==="popup"&&this.element.classList.add(ce(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ce("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const s=t.createElementNS(Wt,"svg");s.classList.add(ce("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=t.createElementNS(Wt,"line");r.classList.add(ce("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=t.createElementNS(Wt,"line");o.classList.add(ce("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(Wt,"line");a.classList.add(ce("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const u=t.createElement("div");u.classList.add(ce("m")),this.padElement.appendChild(u),this.markerElem_=u,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.props_.get("max"),s=H(t,-n,+n,0,100),r=H(e,-n,+n,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Us(i,t,e){return[wt(t[0],ae(i)),wt(t[1],Vn(i))*(e?1:-1)]}class nd{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ed(t,{layout:e.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.props.get("max"),s=H(t.point.x,0,t.bounds.width,-n,+n),r=H(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new _e(s,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Va(t.key)&&t.preventDefault();const[e,n]=Us(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&n===0||this.value.setRawValue(new _e(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Us(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));e===0&&n===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class id{constructor(t,e){var n,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=In.create(e.expanded),this.popC_=e.pickerLayout==="popup"?new Ta(t,{viewProps:this.viewProps}):null;const r=new nd(t,{layout:e.pickerLayout,props:new R({invertsY:Q(e.invertsY),max:Q(e.max),xKeyScale:e.axes[0].textProps.value("keyScale"),yKeyScale:e.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new Qr(t,{assembly:nl,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new td(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(n=this.view.buttonElement)===null||n===void 0||n.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),an({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Nr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;(!n||!e.contains(n))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ba(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Or(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function rd(i){return _e.isObject(i)?new _e(i.x,i.y):new _e}function sd(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y)}function od(i,t){return new Xr({assembly:nl,components:[ne(Object.assign(Object.assign({},i),i.x),t.x),ne(Object.assign(Object.assign({},i),i.y),t.y)]})}function js(i,t){var e,n;if(!W(i.min)||!W(i.max))return Math.max(Math.abs((e=i.min)!==null&&e!==void 0?e:0),Math.abs((n=i.max)!==null&&n!==void 0?n:0));const s=ca(i);return Math.max(Math.abs(s)*10,Math.abs(t)*10)}function ad(i,t){var e,n;const s=js(Le(i,(e=i.x)!==null&&e!==void 0?e:{}),t.x),r=js(Le(i,(n=i.y)!==null&&n!==void 0?n:{}),t.y);return Math.max(s,r)}function ld(i){if(!("y"in i))return!1;const t=i.y;return t&&"inverted"in t?!!t.inverted:!1}const ud=bt({id:"input-point2d",type:"input",accept:(i,t)=>{if(!_e.isObject(i))return null;const e=et(t,n=>Object.assign(Object.assign({},Dn(n)),{expanded:n.optional.boolean,picker:n.optional.custom(Ba),readonly:n.optional.constant(!1),x:n.optional.custom(ve),y:n.optional.object(Object.assign(Object.assign({},Dn(n)),{inverted:n.optional.boolean}))}));return e?{initialValue:i,params:e}:null},binding:{reader:()=>rd,constraint:i=>od(i.params,i.initialValue),equals:_e.equals,writer:()=>sd},controller:i=>{var t,e;const n=i.document,s=i.value,r=i.constraint,o=[i.params.x,i.params.y];return new id(n,{axes:s.rawValue.getComponents().map((a,u)=>{var h;return Dr({constraint:r.components[u],initialValue:a,params:Le(i.params,(h=o[u])!==null&&h!==void 0?h:{})})}),expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,invertsY:ld(i.params),max:ad(i.params,s.rawValue),parser:oe,pickerLayout:(e=i.params.picker)!==null&&e!==void 0?e:"popup",value:s,viewProps:i.viewProps})}});class Ye{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(W(t))return!1;const e=t.x,n=t.y,s=t.z;return!(typeof e!="number"||typeof n!="number"||typeof s!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const il={toComponents:i=>i.getComponents(),fromComponents:i=>new Ye(...i)};function cd(i){return Ye.isObject(i)?new Ye(i.x,i.y,i.z):new Ye}function hd(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y),i.writeProperty("z",t.z)}function pd(i,t){return new Xr({assembly:il,components:[ne(Object.assign(Object.assign({},i),i.x),t.x),ne(Object.assign(Object.assign({},i),i.y),t.y),ne(Object.assign(Object.assign({},i),i.z),t.z)]})}const dd=bt({id:"input-point3d",type:"input",accept:(i,t)=>{if(!Ye.isObject(i))return null;const e=et(t,n=>Object.assign(Object.assign({},Dn(n)),{readonly:n.optional.constant(!1),x:n.optional.custom(ve),y:n.optional.custom(ve),z:n.optional.custom(ve)}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>cd,constraint:i=>pd(i.params,i.initialValue),equals:Ye.equals,writer:i=>hd},controller:i=>{const t=i.value,e=i.constraint,n=[i.params.x,i.params.y,i.params.z];return new Qr(i.document,{assembly:il,axes:t.rawValue.getComponents().map((s,r)=>{var o;return Dr({constraint:e.components[r],initialValue:s,params:Le(i.params,(o=n[r])!==null&&o!==void 0?o:{})})}),parser:oe,value:t,viewProps:i.viewProps})}});class Xe{constructor(t=0,e=0,n=0,s=0){this.x=t,this.y=e,this.z=n,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(W(t))return!1;const e=t.x,n=t.y,s=t.z,r=t.w;return!(typeof e!="number"||typeof n!="number"||typeof s!="number"||typeof r!="number")}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const rl={toComponents:i=>i.getComponents(),fromComponents:i=>new Xe(...i)};function fd(i){return Xe.isObject(i)?new Xe(i.x,i.y,i.z,i.w):new Xe}function vd(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y),i.writeProperty("z",t.z),i.writeProperty("w",t.w)}function md(i,t){return new Xr({assembly:rl,components:[ne(Object.assign(Object.assign({},i),i.x),t.x),ne(Object.assign(Object.assign({},i),i.y),t.y),ne(Object.assign(Object.assign({},i),i.z),t.z),ne(Object.assign(Object.assign({},i),i.w),t.w)]})}const gd=bt({id:"input-point4d",type:"input",accept:(i,t)=>{if(!Xe.isObject(i))return null;const e=et(t,n=>Object.assign(Object.assign({},Dn(n)),{readonly:n.optional.constant(!1),w:n.optional.custom(ve),x:n.optional.custom(ve),y:n.optional.custom(ve),z:n.optional.custom(ve)}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>fd,constraint:i=>md(i.params,i.initialValue),equals:Xe.equals,writer:i=>vd},controller:i=>{const t=i.value,e=i.constraint,n=[i.params.x,i.params.y,i.params.z,i.params.w];return new Qr(i.document,{assembly:rl,axes:t.rawValue.getComponents().map((s,r)=>{var o;return Dr({constraint:e.components[r],initialValue:s,params:Le(i.params,(o=n[r])!==null&&o!==void 0?o:{})})}),parser:oe,value:t,viewProps:i.viewProps})}});function _d(i){const t=[],e=jr(i.options);return e&&t.push(e),new Fn(t)}const bd=bt({id:"input-string",type:"input",accept:(i,t)=>{if(typeof i!="string")return null;const e=et(t,n=>({readonly:n.optional.constant(!1),options:n.optional.custom(zn)}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>Aa,constraint:i=>_d(i.params),writer:i=>jn},controller:i=>{const t=i.document,e=i.value,n=i.constraint,s=n&&pi(n,Nn);return s?new we(t,{props:new R({options:s.values.value("options")}),value:e,viewProps:i.viewProps}):new An(t,{parser:r=>r,props:R.fromObject({formatter:ur}),value:e,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="string"?null:i.controller.valueController instanceof we?new zr(i.controller):null}}),Kn={monitor:{defaultInterval:200,defaultRows:3}},Hs=z("mll");class xd{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Hs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(Hs("i")),n.style.height=`calc(var(${Oa("containerUnitSize")}) * ${e.rows})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach(s=>{s!==void 0&&n.push(this.formatter_(s))}),t.textContent=n.join(`
`),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Zr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new xd(t,{formatter:e.formatter,rows:e.rows,value:this.value,viewProps:this.viewProps})}}const Ks=z("sgl");class wd{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Ks()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Ks("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=e!==void 0?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Jr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new wd(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const yd=bt({id:"monitor-bool",type:"monitor",accept:(i,t)=>{if(typeof i!="boolean")return null;const e=et(t,n=>({readonly:n.required.constant(!0),rows:n.optional.number}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>Ma},controller:i=>{var t;return i.value.rawValue.length===1?new Jr(i.document,{formatter:Rs,value:i.value,viewProps:i.viewProps}):new Zr(i.document,{formatter:Rs,rows:(t=i.params.rows)!==null&&t!==void 0?t:Kn.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}});class Cd extends Mn{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const he=z("grl");class Pd{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(he()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(Wt,"svg");n.classList.add(he("g")),n.style.height=`calc(var(${Oa("containerUnitSize")}) * ${e.rows})`,this.element.appendChild(n),this.svgElem_=n;const s=t.createElementNS(Wt,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=t.createElement("div");r.classList.add(he("t"),z("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:e}=this.element,n=this.value.rawValue.length-1,s=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((v,f)=>{if(v===void 0)return;const l=H(f,0,n,0,t),d=H(v,s,r,e,0);o.push([l,d].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,u=this.value.rawValue[this.cursor_.rawValue];if(u===void 0){a.classList.remove(he("t","a"));return}const h=H(this.cursor_.rawValue,0,n,0,t),c=H(u,s,r,e,0);a.style.left=`${h}px`,a.style.top=`${c}px`,a.textContent=`${this.formatter_(u)}`,a.classList.contains(he("t","a"))||(a.classList.add(he("t","a"),he("t","in")),hi(a),a.classList.remove(he("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class sl{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=Q(-1),this.view=new Pd(t,{cursor:this.cursor_,formatter:e.formatter,rows:e.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Or(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const n=new ze(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return Ot(t,null,e=>({max:e.required.number,min:e.required.number}),e=>(this.props.set("max",e.max),this.props.set("min",e.min),!0))}exportProps(){return Bt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:e}=this.view.element;this.cursor_.rawValue=Math.floor(H(t.offsetX,0,e,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(H(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function cr(i){return W(i.format)?kt(2):i.format}function Sd(i){var t;return i.value.rawValue.length===1?new Jr(i.document,{formatter:cr(i.params),value:i.value,viewProps:i.viewProps}):new Zr(i.document,{formatter:cr(i.params),rows:(t=i.params.rows)!==null&&t!==void 0?t:Kn.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}function Ed(i){var t,e,n;return new sl(i.document,{formatter:cr(i.params),rows:(t=i.params.rows)!==null&&t!==void 0?t:Kn.monitor.defaultRows,props:R.fromObject({max:(e=i.params.max)!==null&&e!==void 0?e:100,min:(n=i.params.min)!==null&&n!==void 0?n:0}),value:i.value,viewProps:i.viewProps})}function $s(i){return i.view==="graph"}const kd=bt({id:"monitor-number",type:"monitor",accept:(i,t)=>{if(typeof i!="number")return null;const e=et(t,n=>({format:n.optional.function,max:n.optional.number,min:n.optional.number,readonly:n.required.constant(!0),rows:n.optional.number,view:n.optional.string}));return e?{initialValue:i,params:e}:null},binding:{defaultBufferSize:i=>$s(i)?64:1,reader:i=>la},controller:i=>$s(i.params)?Ed(i):Sd(i),api:i=>i.controller.valueController instanceof sl?new Cd(i.controller):null}),Td=bt({id:"monitor-string",type:"monitor",accept:(i,t)=>{if(typeof i!="string")return null;const e=et(t,n=>({multiline:n.optional.boolean,readonly:n.required.constant(!0),rows:n.optional.number}));return e?{initialValue:i,params:e}:null},binding:{reader:i=>Aa},controller:i=>{var t;const e=i.value;return e.rawValue.length>1||i.params.multiline?new Zr(i.document,{formatter:ur,rows:(t=i.params.rows)!==null&&t!==void 0?t:Kn.monitor.defaultRows,value:e,viewProps:i.viewProps}):new Jr(i.document,{formatter:ur,value:e,viewProps:i.viewProps})}});class Md{constructor(){this.map_=new Map}get(t){var e;return(e=this.map_.get(t))!==null&&e!==void 0?e:null}has(t){return this.map_.has(t)}add(t,e){return this.map_.set(t,e),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),e}}class Ad{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function Vd(i,t){var e;const n=i.accept(t.target.read(),t.params);if(W(n))return null;const s={target:t.target,initialValue:n.initialValue,params:n.params},r=et(t.params,v=>({disabled:v.optional.boolean,hidden:v.optional.boolean,label:v.optional.string,tag:v.optional.string})),o=i.binding.reader(s),a=i.binding.constraint?i.binding.constraint(s):void 0,u=new Ad({reader:o,target:t.target,writer:i.binding.writer(s)}),h=new fc(Q(o(n.initialValue),{constraint:a,equals:i.binding.equals}),u),c=i.controller({constraint:a,document:t.document,initialValue:n.initialValue,params:n.params,value:h,viewProps:le.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new Mc(t.document,{blade:on(),props:R.fromObject({label:"label"in t.params?(e=r==null?void 0:r.label)!==null&&e!==void 0?e:null:t.target.key}),tag:r==null?void 0:r.tag,value:h,valueController:c})}class Dd{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function Od(i,t){return t===0?new hh:new ph(i,t??Kn.monitor.defaultInterval)}function Bd(i,t){var e,n,s;const r=i.accept(t.target.read(),t.params);if(W(r))return null;const o={target:t.target,initialValue:r.initialValue,params:r.params},a=et(t.params,f=>({bufferSize:f.optional.number,disabled:f.optional.boolean,hidden:f.optional.boolean,interval:f.optional.number,label:f.optional.string})),u=i.binding.reader(o),h=(n=(e=a==null?void 0:a.bufferSize)!==null&&e!==void 0?e:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(r.params))!==null&&n!==void 0?n:1,c=new Bc({binding:new Dd({reader:u,target:t.target}),bufferSize:h,ticker:Od(t.document,a==null?void 0:a.interval)}),v=i.controller({document:t.document,params:r.params,value:c,viewProps:le.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return v.viewProps.bindDisabled(c.ticker),v.viewProps.handleDispose(()=>{c.ticker.dispose()}),new Rc(t.document,{blade:on(),props:R.fromObject({label:"label"in t.params?(s=a==null?void 0:a.label)!==null&&s!==void 0?s:null:t.target.key}),value:c,valueController:v})}class Ld{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,e){if(!Sh(e.core))throw nt.notCompatible(t,e.id);e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)}createInput_(t,e,n){return this.pluginsMap_.inputs.reduce((s,r)=>s??Vd(r,{document:t,target:e,params:n}),null)}createMonitor_(t,e,n){return this.pluginsMap_.monitors.reduce((s,r)=>s??Bd(r,{document:t,params:n,target:e}),null)}createBinding(t,e,n){const s=e.read();if(W(s))throw new nt({context:{key:e.key},type:"nomatchingcontroller"});const r=this.createInput_(t,e,n);if(r)return r;const o=this.createMonitor_(t,e,n);if(o)return o;throw new nt({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce((s,r)=>s??ch(r,{document:t,params:e}),null);if(!n)throw new nt({type:"nomatchingview",context:{params:e}});return n}createInputBindingApi_(t){const e=this.pluginsMap_.inputs.reduce((n,s)=>{var r,o;return n||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new Mn(t))}createMonitorBindingApi_(t){const e=this.pluginsMap_.monitors.reduce((n,s)=>{var r,o;return n||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,e??new Mn(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Ac(t))return this.createInputBindingApi_(t);if(Ic(t))return this.createMonitorBindingApi_(t);throw nt.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Tc(t))return this.createBindingApi(t);const e=this.pluginsMap_.blades.reduce((n,s)=>n??s.api({controller:t,pool:this}),null);if(!e)throw nt.shouldNeverHappen();return this.apiCache_.add(t,e)}}const Rd=new Md;function Id(){const i=new Ld(Rd);return[ud,dd,gd,bd,Jp,qp,Wp,jp,Mh,yd,Td,kd,jc,eh,ka].forEach(t=>{i.register("core",t)}),i}class Fd extends Ne{constructor(t){super(t),this.emitter_=new ot,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Rn(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class Nd extends Ne{}class zd extends Ne{constructor(t){super(t),this.emitter_=new ot,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Rn(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class Ud extends Ne{constructor(t){super(t),this.emitter_=new ot,this.controller.value.emitter.on("change",e=>{this.emitter_.emit("change",new Rn(this,e.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s)},{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const jd=function(){return{id:"list",type:"blade",core:sn,accept(i){const t=et(i,e=>({options:e.required.custom(zn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string}));return t?{params:t}:null},controller(i){const t=new Nn(Ur(i.params.options)),e=Q(i.params.value,{constraint:t}),n=new we(i.document,{props:new R({options:t.values.value("options")}),value:e,viewProps:i.viewProps});return new Re(i.document,{blade:i.blade,props:R.fromObject({label:i.params.label}),value:e,valueController:n})},api(i){return!(i.controller instanceof Re)||!(i.controller.valueController instanceof we)?null:new Fd(i.controller)}}}();class Hd extends Sa{constructor(t,e){super(t,e)}get element(){return this.controller.view.element}}class Kd extends ar{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Gs=z("spr");class $d{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Gs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Gs("r")),this.element.appendChild(n)}}class Ws extends xi{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new $d(t,{viewProps:e.viewProps})}))}}const Gd={id:"separator",type:"blade",core:sn,accept(i){const t=et(i,e=>({view:e.required.constant("separator")}));return t?{params:t}:null},controller(i){return new Ws(i.document,{blade:i.blade,viewProps:i.viewProps})},api(i){return i.controller instanceof Ws?new Nd(i.controller):null}},Wd={id:"slider",type:"blade",core:sn,accept(i){const t=et(i,e=>({max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number}));return t?{params:t}:null},controller(i){var t,e;const n=(t=i.params.value)!==null&&t!==void 0?t:0,s=new Ln({max:i.params.max,min:i.params.min}),r=Q(n,{constraint:s}),o=new fi(i.document,Object.assign(Object.assign({},Da({formatter:(e=i.params.format)!==null&&e!==void 0?e:uc,keyScale:Q(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:ha(i.params,n)})),{parser:oe,value:r,viewProps:i.viewProps}));return new Re(i.document,{blade:i.blade,props:R.fromObject({label:i.params.label}),value:r,valueController:o})},api(i){return!(i.controller instanceof Re)||!(i.controller.valueController instanceof fi)?null:new zd(i.controller)}},qd=function(){return{id:"text",type:"blade",core:sn,accept(i){const t=et(i,e=>({parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string}));return t?{params:t}:null},controller(i){var t;const e=Q(i.params.value),n=new An(i.document,{parser:i.params.parse,props:R.fromObject({formatter:(t=i.params.format)!==null&&t!==void 0?t:s=>String(s)}),value:e,viewProps:i.viewProps});return new Re(i.document,{blade:i.blade,props:R.fromObject({label:i.params.label}),value:e,valueController:n})},api(i){return!(i.controller instanceof Re)||!(i.controller.valueController instanceof An)?null:new Ud(i.controller)}}}();function Yd(i){const t=i.createElement("div");return t.classList.add(z("dfw")()),i.body&&i.body.appendChild(t),t}function Xd(i,t,e){if(i.querySelector(`style[data-tp-style=${t}]`))return;const n=i.createElement("style");n.dataset.tpStyle=t,n.textContent=e,i.head.appendChild(n)}class Qd extends Hd{constructor(t){var e,n;const s=t??{},r=(e=s.document)!==null&&e!==void 0?e:wc(),o=Id(),a=new Kd(r,{expanded:s.expanded,blade:on(),props:R.fromObject({title:s.title}),viewProps:le.create()});super(a,o),this.pool_=o,this.containerElem_=(n=s.container)!==null&&n!==void 0?n:Yd(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!s.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw nt.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw nt.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&Xd(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(n=>{this.pool_.register(t.id,n)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[jd,Gd,Wd,ka,qd]})}}new Pa("4.0.5");var qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ei={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zd=ei.exports,Ys;function Jd(){return Ys||(Ys=1,function(i,t){(function(n,s){i.exports=s()})(Zd,function(){return function(e){var n={};function s(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=n,s.d=function(r,o,a){s.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:a})},s.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},s.t=function(r,o){if(o&1&&(r=s(r)),o&8||o&4&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),o&2&&typeof r!="string")for(var u in r)s.d(a,u,(function(h){return r[h]}).bind(null,u));return a},s.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return s.d(o,"a",o),o},s.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},s.p="",s(s.s=20)}([function(e,n){var s={};e.exports=s,function(){s._baseDelta=1e3/60,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(o,a){var u,h;typeof a=="boolean"?(u=2,h=a):(u=1,h=!0);for(var c=u;c<arguments.length;c++){var v=arguments[c];if(v)for(var f in v)h&&v[f]&&v[f].constructor===Object&&(!o[f]||o[f].constructor===Object)?(o[f]=o[f]||{},s.extend(o[f],h,v[f])):o[f]=v[f]}return o},s.clone=function(o,a){return s.extend({},a,o)},s.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var u in o)a.push(u);return a},s.values=function(o){var a=[];if(Object.keys){for(var u=Object.keys(o),h=0;h<u.length;h++)a.push(o[u[h]]);return a}for(var c in o)a.push(o[c]);return a},s.get=function(o,a,u,h){a=a.split(".").slice(u,h);for(var c=0;c<a.length;c+=1)o=o[a[c]];return o},s.set=function(o,a,u,h,c){var v=a.split(".").slice(h,c);return s.get(o,a,0,-1)[v[v.length-1]]=u,u},s.shuffle=function(o){for(var a=o.length-1;a>0;a--){var u=Math.floor(s.random()*(a+1)),h=o[a];o[a]=o[u],o[u]=h}return o},s.choose=function(o){return o[Math.floor(s.random()*o.length)]},s.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},s.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},s.isFunction=function(o){return typeof o=="function"},s.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},s.isString=function(o){return toString.call(o)==="[object String]"},s.clamp=function(o,a,u){return o<a?a:o>u?u:o},s.sign=function(o){return o<0?-1:1},s.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+r()*(a-o)};var r=function(){return s._seed=(s._seed*9301+49297)%233280,s._seed/233280};s.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[o]||(s.warn(o),s._warnedOnce[o]=!0)},s.deprecated=function(o,a,u){o[a]=s.chain(function(){s.warnOnce("🔅 deprecated 🔅",u)},o[a])},s.nextId=function(){return s._nextId++},s.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var u=0;u<o.length;u++)if(o[u]===a)return u;return-1},s.map=function(o,a){if(o.map)return o.map(a);for(var u=[],h=0;h<o.length;h+=1)u.push(a(o[h]));return u},s.topologicalSort=function(o){var a=[],u=[],h=[];for(var c in o)!u[c]&&!h[c]&&s._topologicalSort(c,u,h,o,a);return a},s._topologicalSort=function(o,a,u,h,c){var v=h[o]||[];u[o]=!0;for(var f=0;f<v.length;f+=1){var l=v[f];u[l]||a[l]||s._topologicalSort(l,a,u,h,c)}u[o]=!1,a[o]=!0,c.push(o)},s.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var u=arguments[a];u._chained?o.push.apply(o,u._chained):o.push(u)}var h=function(){for(var c,v=new Array(arguments.length),f=0,l=arguments.length;f<l;f++)v[f]=arguments[f];for(f=0;f<o.length;f+=1){var d=o[f].apply(c,v);typeof d<"u"&&(c=d)}return c};return h._chained=o,h},s.chainPathBefore=function(o,a,u){return s.set(o,a,s.chain(u,s.get(o,a)))},s.chainPathAfter=function(o,a,u){return s.set(o,a,s.chain(s.get(o,a),u))},s.setDecomp=function(o){s._decomp=o},s.getDecomp=function(){var o=s._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof qs<"u"&&(o=qs.decomp)}catch{o=null}return o}}()},function(e,n){var s={};e.exports=s,function(){s.create=function(r){var o={min:{x:0,y:0},max:{x:0,y:0}};return r&&s.update(o,r),o},s.update=function(r,o,a){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var u=0;u<o.length;u++){var h=o[u];h.x>r.max.x&&(r.max.x=h.x),h.x<r.min.x&&(r.min.x=h.x),h.y>r.max.y&&(r.max.y=h.y),h.y<r.min.y&&(r.min.y=h.y)}a&&(a.x>0?r.max.x+=a.x:r.min.x+=a.x,a.y>0?r.max.y+=a.y:r.min.y+=a.y)},s.contains=function(r,o){return o.x>=r.min.x&&o.x<=r.max.x&&o.y>=r.min.y&&o.y<=r.max.y},s.overlaps=function(r,o){return r.min.x<=o.max.x&&r.max.x>=o.min.x&&r.max.y>=o.min.y&&r.min.y<=o.max.y},s.translate=function(r,o){r.min.x+=o.x,r.max.x+=o.x,r.min.y+=o.y,r.max.y+=o.y},s.shift=function(r,o){var a=r.max.x-r.min.x,u=r.max.y-r.min.y;r.min.x=o.x,r.max.x=o.x+a,r.min.y=o.y,r.max.y=o.y+u}}()},function(e,n){var s={};e.exports=s,function(){s.create=function(r,o){return{x:r||0,y:o||0}},s.clone=function(r){return{x:r.x,y:r.y}},s.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},s.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},s.rotate=function(r,o,a){var u=Math.cos(o),h=Math.sin(o);a||(a={});var c=r.x*u-r.y*h;return a.y=r.x*h+r.y*u,a.x=c,a},s.rotateAbout=function(r,o,a,u){var h=Math.cos(o),c=Math.sin(o);u||(u={});var v=a.x+((r.x-a.x)*h-(r.y-a.y)*c);return u.y=a.y+((r.x-a.x)*c+(r.y-a.y)*h),u.x=v,u},s.normalise=function(r){var o=s.magnitude(r);return o===0?{x:0,y:0}:{x:r.x/o,y:r.y/o}},s.dot=function(r,o){return r.x*o.x+r.y*o.y},s.cross=function(r,o){return r.x*o.y-r.y*o.x},s.cross3=function(r,o,a){return(o.x-r.x)*(a.y-r.y)-(o.y-r.y)*(a.x-r.x)},s.add=function(r,o,a){return a||(a={}),a.x=r.x+o.x,a.y=r.y+o.y,a},s.sub=function(r,o,a){return a||(a={}),a.x=r.x-o.x,a.y=r.y-o.y,a},s.mult=function(r,o){return{x:r.x*o,y:r.y*o}},s.div=function(r,o){return{x:r.x/o,y:r.y/o}},s.perp=function(r,o){return o=o===!0?-1:1,{x:o*-r.y,y:o*r.x}},s.neg=function(r){return{x:-r.x,y:-r.y}},s.angle=function(r,o){return Math.atan2(o.y-r.y,o.x-r.x)},s._temp=[s.create(),s.create(),s.create(),s.create(),s.create(),s.create()]}()},function(e,n,s){var r={};e.exports=r;var o=s(2),a=s(0);(function(){r.create=function(u,h){for(var c=[],v=0;v<u.length;v++){var f=u[v],l={x:f.x,y:f.y,index:v,body:h,isInternal:!1};c.push(l)}return c},r.fromPath=function(u,h){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,v=[];return u.replace(c,function(f,l,d){v.push({x:parseFloat(l),y:parseFloat(d)})}),r.create(v,h)},r.centre=function(u){for(var h=r.area(u,!0),c={x:0,y:0},v,f,l,d=0;d<u.length;d++)l=(d+1)%u.length,v=o.cross(u[d],u[l]),f=o.mult(o.add(u[d],u[l]),v),c=o.add(c,f);return o.div(c,6*h)},r.mean=function(u){for(var h={x:0,y:0},c=0;c<u.length;c++)h.x+=u[c].x,h.y+=u[c].y;return o.div(h,u.length)},r.area=function(u,h){for(var c=0,v=u.length-1,f=0;f<u.length;f++)c+=(u[v].x-u[f].x)*(u[v].y+u[f].y),v=f;return h?c/2:Math.abs(c)/2},r.inertia=function(u,h){for(var c=0,v=0,f=u,l,d,p=0;p<f.length;p++)d=(p+1)%f.length,l=Math.abs(o.cross(f[d],f[p])),c+=l*(o.dot(f[d],f[d])+o.dot(f[d],f[p])+o.dot(f[p],f[p])),v+=l;return h/6*(c/v)},r.translate=function(u,h,c){c=typeof c<"u"?c:1;var v=u.length,f=h.x*c,l=h.y*c,d;for(d=0;d<v;d++)u[d].x+=f,u[d].y+=l;return u},r.rotate=function(u,h,c){if(h!==0){var v=Math.cos(h),f=Math.sin(h),l=c.x,d=c.y,p=u.length,m,_,w,P;for(P=0;P<p;P++)m=u[P],_=m.x-l,w=m.y-d,m.x=l+(_*v-w*f),m.y=d+(_*f+w*v);return u}},r.contains=function(u,h){for(var c=h.x,v=h.y,f=u.length,l=u[f-1],d,p=0;p<f;p++){if(d=u[p],(c-l.x)*(d.y-l.y)+(v-l.y)*(l.x-d.x)>0)return!1;l=d}return!0},r.scale=function(u,h,c,v){if(h===1&&c===1)return u;v=v||r.centre(u);for(var f,l,d=0;d<u.length;d++)f=u[d],l=o.sub(f,v),u[d].x=v.x+l.x*h,u[d].y=v.y+l.y*c;return u},r.chamfer=function(u,h,c,v,f){typeof h=="number"?h=[h]:h=h||[8],c=typeof c<"u"?c:-1,v=v||2,f=f||14;for(var l=[],d=0;d<u.length;d++){var p=u[d-1>=0?d-1:u.length-1],m=u[d],_=u[(d+1)%u.length],w=h[d<h.length?d:h.length-1];if(w===0){l.push(m);continue}var P=o.normalise({x:m.y-p.y,y:p.x-m.x}),E=o.normalise({x:_.y-m.y,y:m.x-_.x}),g=Math.sqrt(2*Math.pow(w,2)),x=o.mult(a.clone(P),w),y=o.normalise(o.mult(o.add(P,E),.5)),b=o.sub(m,o.mult(y,g)),C=c;c===-1&&(C=Math.pow(w,.32)*1.75),C=a.clamp(C,v,f),C%2===1&&(C+=1);for(var S=Math.acos(o.dot(P,E)),T=S/C,k=0;k<C;k++)l.push(o.add(o.rotate(x,T*k),b))}return l},r.clockwiseSort=function(u){var h=r.mean(u);return u.sort(function(c,v){return o.angle(h,c)-o.angle(h,v)}),u},r.isConvex=function(u){var h=0,c=u.length,v,f,l,d;if(c<3)return null;for(v=0;v<c;v++)if(f=(v+1)%c,l=(v+2)%c,d=(u[f].x-u[v].x)*(u[l].y-u[f].y),d-=(u[f].y-u[v].y)*(u[l].x-u[f].x),d<0?h|=1:d>0&&(h|=2),h===3)return!1;return h!==0?!0:null},r.hull=function(u){var h=[],c=[],v,f;for(u=u.slice(0),u.sort(function(l,d){var p=l.x-d.x;return p!==0?p:l.y-d.y}),f=0;f<u.length;f+=1){for(v=u[f];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],v)<=0;)c.pop();c.push(v)}for(f=u.length-1;f>=0;f-=1){for(v=u[f];h.length>=2&&o.cross3(h[h.length-2],h[h.length-1],v)<=0;)h.pop();h.push(v)}return h.pop(),c.pop(),h.concat(c)}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(2),u=s(7),h=s(0),c=s(1),v=s(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(l){var d={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},p=h.extend(d,l);return f(p,l),p},r.nextGroup=function(l){return l?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var f=function(l,d){d=d||{},r.set(l,{bounds:l.bounds||c.create(l.vertices),positionPrev:l.positionPrev||a.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),o.rotate(l.vertices,l.angle,l.position),v.rotate(l.axes,l.angle),c.update(l.bounds,l.vertices,l.velocity),r.set(l,{axes:d.axes||l.axes,area:d.area||l.area,mass:d.mass||l.mass,inertia:d.inertia||l.inertia});var p=l.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=l.isStatic?"#555":"#ccc",_=l.isStatic&&l.render.fillStyle===null?1:0;l.render.fillStyle=l.render.fillStyle||p,l.render.strokeStyle=l.render.strokeStyle||m,l.render.lineWidth=l.render.lineWidth||_,l.render.sprite.xOffset+=-(l.bounds.min.x-l.position.x)/(l.bounds.max.x-l.bounds.min.x),l.render.sprite.yOffset+=-(l.bounds.min.y-l.position.y)/(l.bounds.max.y-l.bounds.min.y)};r.set=function(l,d,p){var m;typeof d=="string"&&(m=d,d={},d[m]=p);for(m in d)if(Object.prototype.hasOwnProperty.call(d,m))switch(p=d[m],m){case"isStatic":r.setStatic(l,p);break;case"isSleeping":u.set(l,p);break;case"mass":r.setMass(l,p);break;case"density":r.setDensity(l,p);break;case"inertia":r.setInertia(l,p);break;case"vertices":r.setVertices(l,p);break;case"position":r.setPosition(l,p);break;case"angle":r.setAngle(l,p);break;case"velocity":r.setVelocity(l,p);break;case"angularVelocity":r.setAngularVelocity(l,p);break;case"speed":r.setSpeed(l,p);break;case"angularSpeed":r.setAngularSpeed(l,p);break;case"parts":r.setParts(l,p);break;case"centre":r.setCentre(l,p);break;default:l[m]=p}},r.setStatic=function(l,d){for(var p=0;p<l.parts.length;p++){var m=l.parts[p];d?(m.isStatic||(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia}),m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null),m.isStatic=d}},r.setMass=function(l,d){var p=l.inertia/(l.mass/6);l.inertia=p*(d/6),l.inverseInertia=1/l.inertia,l.mass=d,l.inverseMass=1/l.mass,l.density=l.mass/l.area},r.setDensity=function(l,d){r.setMass(l,d*l.area),l.density=d},r.setInertia=function(l,d){l.inertia=d,l.inverseInertia=1/l.inertia},r.setVertices=function(l,d){d[0].body===l?l.vertices=d:l.vertices=o.create(d,l),l.axes=v.fromVertices(l.vertices),l.area=o.area(l.vertices),r.setMass(l,l.density*l.area);var p=o.centre(l.vertices);o.translate(l.vertices,p,-1),r.setInertia(l,r._inertiaScale*o.inertia(l.vertices,l.mass)),o.translate(l.vertices,l.position),c.update(l.bounds,l.vertices,l.velocity)},r.setParts=function(l,d,p){var m;for(d=d.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,m=0;m<d.length;m++){var _=d[m];_!==l&&(_.parent=l,l.parts.push(_))}if(l.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var w=[];for(m=0;m<d.length;m++)w=w.concat(d[m].vertices);o.clockwiseSort(w);var P=o.hull(w),E=o.centre(P);r.setVertices(l,P),o.translate(l.vertices,E)}var g=r._totalProperties(l);l.area=g.area,l.parent=l,l.position.x=g.centre.x,l.position.y=g.centre.y,l.positionPrev.x=g.centre.x,l.positionPrev.y=g.centre.y,r.setMass(l,g.mass),r.setInertia(l,g.inertia),r.setPosition(l,g.centre)}},r.setCentre=function(l,d,p){p?(l.positionPrev.x+=d.x,l.positionPrev.y+=d.y,l.position.x+=d.x,l.position.y+=d.y):(l.positionPrev.x=d.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=d.y-(l.position.y-l.positionPrev.y),l.position.x=d.x,l.position.y=d.y)},r.setPosition=function(l,d,p){var m=a.sub(d,l.position);p?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=m.x,l.velocity.y=m.y,l.speed=a.magnitude(m)):(l.positionPrev.x+=m.x,l.positionPrev.y+=m.y);for(var _=0;_<l.parts.length;_++){var w=l.parts[_];w.position.x+=m.x,w.position.y+=m.y,o.translate(w.vertices,m),c.update(w.bounds,w.vertices,l.velocity)}},r.setAngle=function(l,d,p){var m=d-l.angle;p?(l.anglePrev=l.angle,l.angularVelocity=m,l.angularSpeed=Math.abs(m)):l.anglePrev+=m;for(var _=0;_<l.parts.length;_++){var w=l.parts[_];w.angle+=m,o.rotate(w.vertices,m,l.position),v.rotate(w.axes,m),c.update(w.bounds,w.vertices,l.velocity),_>0&&a.rotateAbout(w.position,m,l.position,w.position)}},r.setVelocity=function(l,d){var p=l.deltaTime/r._baseDelta;l.positionPrev.x=l.position.x-d.x*p,l.positionPrev.y=l.position.y-d.y*p,l.velocity.x=(l.position.x-l.positionPrev.x)/p,l.velocity.y=(l.position.y-l.positionPrev.y)/p,l.speed=a.magnitude(l.velocity)},r.getVelocity=function(l){var d=r._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*d,y:(l.position.y-l.positionPrev.y)*d}},r.getSpeed=function(l){return a.magnitude(r.getVelocity(l))},r.setSpeed=function(l,d){r.setVelocity(l,a.mult(a.normalise(r.getVelocity(l)),d))},r.setAngularVelocity=function(l,d){var p=l.deltaTime/r._baseDelta;l.anglePrev=l.angle-d*p,l.angularVelocity=(l.angle-l.anglePrev)/p,l.angularSpeed=Math.abs(l.angularVelocity)},r.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*r._baseDelta/l.deltaTime},r.getAngularSpeed=function(l){return Math.abs(r.getAngularVelocity(l))},r.setAngularSpeed=function(l,d){r.setAngularVelocity(l,h.sign(r.getAngularVelocity(l))*d)},r.translate=function(l,d,p){r.setPosition(l,a.add(l.position,d),p)},r.rotate=function(l,d,p,m){if(!p)r.setAngle(l,l.angle+d,m);else{var _=Math.cos(d),w=Math.sin(d),P=l.position.x-p.x,E=l.position.y-p.y;r.setPosition(l,{x:p.x+(P*_-E*w),y:p.y+(P*w+E*_)},m),r.setAngle(l,l.angle+d,m)}},r.scale=function(l,d,p,m){var _=0,w=0;m=m||l.position;for(var P=0;P<l.parts.length;P++){var E=l.parts[P];o.scale(E.vertices,d,p,m),E.axes=v.fromVertices(E.vertices),E.area=o.area(E.vertices),r.setMass(E,l.density*E.area),o.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),r.setInertia(E,r._inertiaScale*o.inertia(E.vertices,E.mass)),o.translate(E.vertices,{x:E.position.x,y:E.position.y}),P>0&&(_+=E.area,w+=E.inertia),E.position.x=m.x+(E.position.x-m.x)*d,E.position.y=m.y+(E.position.y-m.y)*p,c.update(E.bounds,E.vertices,l.velocity)}l.parts.length>1&&(l.area=_,l.isStatic||(r.setMass(l,l.density*_),r.setInertia(l,w))),l.circleRadius&&(d===p?l.circleRadius*=d:l.circleRadius=null)},r.update=function(l,d){d=(typeof d<"u"?d:1e3/60)*l.timeScale;var p=d*d,m=r._timeCorrection?d/(l.deltaTime||d):1,_=1-l.frictionAir*(d/h._baseDelta),w=(l.position.x-l.positionPrev.x)*m,P=(l.position.y-l.positionPrev.y)*m;l.velocity.x=w*_+l.force.x/l.mass*p,l.velocity.y=P*_+l.force.y/l.mass*p,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=d,l.angularVelocity=(l.angle-l.anglePrev)*_*m+l.torque/l.inertia*p,l.anglePrev=l.angle,l.angle+=l.angularVelocity;for(var E=0;E<l.parts.length;E++){var g=l.parts[E];o.translate(g.vertices,l.velocity),E>0&&(g.position.x+=l.velocity.x,g.position.y+=l.velocity.y),l.angularVelocity!==0&&(o.rotate(g.vertices,l.angularVelocity,l.position),v.rotate(g.axes,l.angularVelocity),E>0&&a.rotateAbout(g.position,l.angularVelocity,l.position,g.position)),c.update(g.bounds,g.vertices,l.velocity)}},r.updateVelocities=function(l){var d=r._baseDelta/l.deltaTime,p=l.velocity;p.x=(l.position.x-l.positionPrev.x)*d,p.y=(l.position.y-l.positionPrev.y)*d,l.speed=Math.sqrt(p.x*p.x+p.y*p.y),l.angularVelocity=(l.angle-l.anglePrev)*d,l.angularSpeed=Math.abs(l.angularVelocity)},r.applyForce=function(l,d,p){var m={x:d.x-l.position.x,y:d.y-l.position.y};l.force.x+=p.x,l.force.y+=p.y,l.torque+=m.x*p.y-m.y*p.x},r._totalProperties=function(l){for(var d={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=l.parts.length===1?0:1;p<l.parts.length;p++){var m=l.parts[p],_=m.mass!==1/0?m.mass:1;d.mass+=_,d.area+=m.area,d.inertia+=m.inertia,d.centre=a.add(d.centre,a.mult(m.position,_))}return d.centre=a.div(d.centre,d.mass),d}})()},function(e,n,s){var r={};e.exports=r;var o=s(0);(function(){r.on=function(a,u,h){for(var c=u.split(" "),v,f=0;f<c.length;f++)v=c[f],a.events=a.events||{},a.events[v]=a.events[v]||[],a.events[v].push(h);return h},r.off=function(a,u,h){if(!u){a.events={};return}typeof u=="function"&&(h=u,u=o.keys(a.events).join(" "));for(var c=u.split(" "),v=0;v<c.length;v++){var f=a.events[c[v]],l=[];if(h&&f)for(var d=0;d<f.length;d++)f[d]!==h&&l.push(f[d]);a.events[c[v]]=l}},r.trigger=function(a,u,h){var c,v,f,l,d=a.events;if(d&&o.keys(d).length>0){h||(h={}),c=u.split(" ");for(var p=0;p<c.length;p++)if(v=c[p],f=d[v],f){l=o.clone(h,!1),l.name=v,l.source=a;for(var m=0;m<f.length;m++)f[m].apply(a,[l])}}}})()},function(e,n,s){var r={};e.exports=r;var o=s(5),a=s(0),u=s(1),h=s(4);(function(){r.create=function(c){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},r.setModified=function(c,v,f,l){if(c.isModified=v,v&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),f&&c.parent&&r.setModified(c.parent,v,f,l),l)for(var d=0;d<c.composites.length;d++){var p=c.composites[d];r.setModified(p,v,f,l)}},r.add=function(c,v){var f=[].concat(v);o.trigger(c,"beforeAdd",{object:v});for(var l=0;l<f.length;l++){var d=f[l];switch(d.type){case"body":if(d.parent!==d){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(c,d);break;case"constraint":r.addConstraint(c,d);break;case"composite":r.addComposite(c,d);break;case"mouseConstraint":r.addConstraint(c,d.constraint);break}}return o.trigger(c,"afterAdd",{object:v}),c},r.remove=function(c,v,f){var l=[].concat(v);o.trigger(c,"beforeRemove",{object:v});for(var d=0;d<l.length;d++){var p=l[d];switch(p.type){case"body":r.removeBody(c,p,f);break;case"constraint":r.removeConstraint(c,p,f);break;case"composite":r.removeComposite(c,p,f);break;case"mouseConstraint":r.removeConstraint(c,p.constraint);break}}return o.trigger(c,"afterRemove",{object:v}),c},r.addComposite=function(c,v){return c.composites.push(v),v.parent=c,r.setModified(c,!0,!0,!1),c},r.removeComposite=function(c,v,f){var l=a.indexOf(c.composites,v);if(l!==-1){var d=r.allBodies(v);r.removeCompositeAt(c,l);for(var p=0;p<d.length;p++)d[p].sleepCounter=0}if(f)for(var p=0;p<c.composites.length;p++)r.removeComposite(c.composites[p],v,!0);return c},r.removeCompositeAt=function(c,v){return c.composites.splice(v,1),r.setModified(c,!0,!0,!1),c},r.addBody=function(c,v){return c.bodies.push(v),r.setModified(c,!0,!0,!1),c},r.removeBody=function(c,v,f){var l=a.indexOf(c.bodies,v);if(l!==-1&&(r.removeBodyAt(c,l),v.sleepCounter=0),f)for(var d=0;d<c.composites.length;d++)r.removeBody(c.composites[d],v,!0);return c},r.removeBodyAt=function(c,v){return c.bodies.splice(v,1),r.setModified(c,!0,!0,!1),c},r.addConstraint=function(c,v){return c.constraints.push(v),r.setModified(c,!0,!0,!1),c},r.removeConstraint=function(c,v,f){var l=a.indexOf(c.constraints,v);if(l!==-1&&r.removeConstraintAt(c,l),f)for(var d=0;d<c.composites.length;d++)r.removeConstraint(c.composites[d],v,!0);return c},r.removeConstraintAt=function(c,v){return c.constraints.splice(v,1),r.setModified(c,!0,!0,!1),c},r.clear=function(c,v,f){if(f)for(var l=0;l<c.composites.length;l++)r.clear(c.composites[l],v,!0);return v?c.bodies=c.bodies.filter(function(d){return d.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,r.setModified(c,!0,!0,!1),c},r.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var v=[].concat(c.bodies),f=0;f<c.composites.length;f++)v=v.concat(r.allBodies(c.composites[f]));return c.cache&&(c.cache.allBodies=v),v},r.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var v=[].concat(c.constraints),f=0;f<c.composites.length;f++)v=v.concat(r.allConstraints(c.composites[f]));return c.cache&&(c.cache.allConstraints=v),v},r.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var v=[].concat(c.composites),f=0;f<c.composites.length;f++)v=v.concat(r.allComposites(c.composites[f]));return c.cache&&(c.cache.allComposites=v),v},r.get=function(c,v,f){var l,d;switch(f){case"body":l=r.allBodies(c);break;case"constraint":l=r.allConstraints(c);break;case"composite":l=r.allComposites(c).concat(c);break}return l?(d=l.filter(function(p){return p.id.toString()===v.toString()}),d.length===0?null:d[0]):null},r.move=function(c,v,f){return r.remove(c,v),r.add(f,v),c},r.rebase=function(c){for(var v=r.allBodies(c).concat(r.allConstraints(c)).concat(r.allComposites(c)),f=0;f<v.length;f++)v[f].id=a.nextId();return c},r.translate=function(c,v,f){for(var l=f?r.allBodies(c):c.bodies,d=0;d<l.length;d++)h.translate(l[d],v);return c},r.rotate=function(c,v,f,l){for(var d=Math.cos(v),p=Math.sin(v),m=l?r.allBodies(c):c.bodies,_=0;_<m.length;_++){var w=m[_],P=w.position.x-f.x,E=w.position.y-f.y;h.setPosition(w,{x:f.x+(P*d-E*p),y:f.y+(P*p+E*d)}),h.rotate(w,v)}return c},r.scale=function(c,v,f,l,d){for(var p=d?r.allBodies(c):c.bodies,m=0;m<p.length;m++){var _=p[m],w=_.position.x-l.x,P=_.position.y-l.y;h.setPosition(_,{x:l.x+w*v,y:l.y+P*f}),h.scale(_,v,f)}return c},r.bounds=function(c){for(var v=r.allBodies(c),f=[],l=0;l<v.length;l+=1){var d=v[l];f.push(d.bounds.min,d.bounds.max)}return u.create(f)}})()},function(e,n,s){var r={};e.exports=r;var o=s(4),a=s(5),u=s(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(h,c){for(var v=c/u._baseDelta,f=r._motionSleepThreshold,l=0;l<h.length;l++){var d=h[l],p=o.getSpeed(d),m=o.getAngularSpeed(d),_=p*p+m*m;if(d.force.x!==0||d.force.y!==0){r.set(d,!1);continue}var w=Math.min(d.motion,_),P=Math.max(d.motion,_);d.motion=r._minBias*w+(1-r._minBias)*P,d.sleepThreshold>0&&d.motion<f?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold/v&&r.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}},r.afterCollisions=function(h){for(var c=r._motionSleepThreshold,v=0;v<h.length;v++){var f=h[v];if(f.isActive){var l=f.collision,d=l.bodyA.parent,p=l.bodyB.parent;if(!(d.isSleeping&&p.isSleeping||d.isStatic||p.isStatic)&&(d.isSleeping||p.isSleeping)){var m=d.isSleeping&&!d.isStatic?d:p,_=m===d?p:d;!m.isStatic&&_.motion>c&&r.set(m,!1)}}}},r.set=function(h,c){var v=h.isSleeping;c?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,v||a.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,v&&a.trigger(h,"sleepEnd"))}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(9);(function(){var u=[],h={overlap:0,axis:null},c={overlap:0,axis:null};r.create=function(v,f){return{pair:null,collided:!1,bodyA:v,bodyB:f,parentA:v.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},r.collides=function(v,f,l){if(r._overlapAxes(h,v.vertices,f.vertices,v.axes),h.overlap<=0||(r._overlapAxes(c,f.vertices,v.vertices,f.axes),c.overlap<=0))return null;var d=l&&l.table[a.id(v,f)],p;d?p=d.collision:(p=r.create(v,f),p.collided=!0,p.bodyA=v.id<f.id?v:f,p.bodyB=v.id<f.id?f:v,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),v=p.bodyA,f=p.bodyB;var m;h.overlap<c.overlap?m=h:m=c;var _=p.normal,w=p.tangent,P=p.penetration,E=p.supports,g=m.overlap,x=m.axis,y=x.x,b=x.y,C=f.position.x-v.position.x,S=f.position.y-v.position.y;y*C+b*S>=0&&(y=-y,b=-b),_.x=y,_.y=b,w.x=-b,w.y=y,P.x=y*g,P.y=b*g,p.depth=g;var T=r._findSupports(v,f,_,1),k=0;if(o.contains(v.vertices,T[0])&&(E[k++]=T[0]),o.contains(v.vertices,T[1])&&(E[k++]=T[1]),k<2){var M=r._findSupports(f,v,_,-1);o.contains(f.vertices,M[0])&&(E[k++]=M[0]),k<2&&o.contains(f.vertices,M[1])&&(E[k++]=M[1])}return k===0&&(E[k++]=T[0]),p.supportCount=k,p},r._overlapAxes=function(v,f,l,d){var p=f.length,m=l.length,_=f[0].x,w=f[0].y,P=l[0].x,E=l[0].y,g=d.length,x=Number.MAX_VALUE,y=0,b,C,S,T,k,M;for(k=0;k<g;k++){var V=d[k],A=V.x,O=V.y,D=_*A+w*O,B=P*A+E*O,I=D,$=B;for(M=1;M<p;M+=1)T=f[M].x*A+f[M].y*O,T>I?I=T:T<D&&(D=T);for(M=1;M<m;M+=1)T=l[M].x*A+l[M].y*O,T>$?$=T:T<B&&(B=T);if(C=I-B,S=$-D,b=C<S?C:S,b<x&&(x=b,y=k,b<=0))break}v.axis=d[y],v.overlap=x},r._findSupports=function(v,f,l,d){var p=f.vertices,m=p.length,_=v.position.x,w=v.position.y,P=l.x*d,E=l.y*d,g=p[0],x=g,y=P*(_-x.x)+E*(w-x.y),b,C,S;for(S=1;S<m;S+=1)x=p[S],C=P*(_-x.x)+E*(w-x.y),C<y&&(y=C,g=x);return b=p[(m+g.index-1)%m],y=P*(_-b.x)+E*(w-b.y),x=p[(g.index+1)%m],P*(_-x.x)+E*(w-x.y)<y?(u[0]=g,u[1]=x,u):(u[0]=g,u[1]=b,u)}})()},function(e,n,s){var r={};e.exports=r;var o=s(16);(function(){r.create=function(a,u){var h=a.bodyA,c=a.bodyB,v={id:r.id(h,c),bodyA:h,bodyB:c,collision:a,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||c.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(v,a,u),v},r.update=function(a,u,h){var c=u.supports,v=u.supportCount,f=a.contacts,l=u.parentA,d=u.parentB;a.isActive=!0,a.timeUpdated=h,a.collision=u,a.separation=u.depth,a.inverseMass=l.inverseMass+d.inverseMass,a.friction=l.friction<d.friction?l.friction:d.friction,a.frictionStatic=l.frictionStatic>d.frictionStatic?l.frictionStatic:d.frictionStatic,a.restitution=l.restitution>d.restitution?l.restitution:d.restitution,a.slop=l.slop>d.slop?l.slop:d.slop,a.contactCount=v,u.pair=a;var p=c[0],m=f[0],_=c[1],w=f[1];(w.vertex===p||m.vertex===_)&&(f[1]=m,f[0]=m=w,w=f[1]),m.vertex=p,w.vertex=_},r.setActive=function(a,u,h){u?(a.isActive=!0,a.timeUpdated=h):(a.isActive=!1,a.contactCount=0)},r.id=function(a,u){return a.id<u.id?a.id.toString(36)+":"+u.id.toString(36):u.id.toString(36)+":"+a.id.toString(36)}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(2),u=s(7),h=s(1),c=s(11),v=s(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(f){var l=f;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var d=l.bodyA?a.add(l.bodyA.position,l.pointA):l.pointA,p=l.bodyB?a.add(l.bodyB.position,l.pointB):l.pointB,m=a.magnitude(a.sub(d,p));l.length=typeof l.length<"u"?l.length:m,l.id=l.id||v.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var _={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return l.length===0&&l.stiffness>.1?(_.type="pin",_.anchors=!1):l.stiffness<.9&&(_.type="spring"),l.render=v.extend(_,l.render),l},r.preSolveAll=function(f){for(var l=0;l<f.length;l+=1){var d=f[l],p=d.constraintImpulse;d.isStatic||p.x===0&&p.y===0&&p.angle===0||(d.position.x+=p.x,d.position.y+=p.y,d.angle+=p.angle)}},r.solveAll=function(f,l){for(var d=v.clamp(l/v._baseDelta,0,1),p=0;p<f.length;p+=1){var m=f[p],_=!m.bodyA||m.bodyA&&m.bodyA.isStatic,w=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(_||w)&&r.solve(f[p],d)}for(p=0;p<f.length;p+=1)m=f[p],_=!m.bodyA||m.bodyA&&m.bodyA.isStatic,w=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!_&&!w&&r.solve(f[p],d)},r.solve=function(f,l){var d=f.bodyA,p=f.bodyB,m=f.pointA,_=f.pointB;if(!(!d&&!p)){d&&!d.isStatic&&(a.rotate(m,d.angle-f.angleA,m),f.angleA=d.angle),p&&!p.isStatic&&(a.rotate(_,p.angle-f.angleB,_),f.angleB=p.angle);var w=m,P=_;if(d&&(w=a.add(d.position,m)),p&&(P=a.add(p.position,_)),!(!w||!P)){var E=a.sub(w,P),g=a.magnitude(E);g<r._minLength&&(g=r._minLength);var x=(g-f.length)/g,y=f.stiffness>=1||f.length===0,b=y?f.stiffness*l:f.stiffness*l*l,C=f.damping*l,S=a.mult(E,x*b),T=(d?d.inverseMass:0)+(p?p.inverseMass:0),k=(d?d.inverseInertia:0)+(p?p.inverseInertia:0),M=T+k,V,A,O,D,B;if(C>0){var I=a.create();O=a.div(E,g),B=a.sub(p&&a.sub(p.position,p.positionPrev)||I,d&&a.sub(d.position,d.positionPrev)||I),D=a.dot(O,B)}d&&!d.isStatic&&(A=d.inverseMass/T,d.constraintImpulse.x-=S.x*A,d.constraintImpulse.y-=S.y*A,d.position.x-=S.x*A,d.position.y-=S.y*A,C>0&&(d.positionPrev.x-=C*O.x*D*A,d.positionPrev.y-=C*O.y*D*A),V=a.cross(m,S)/M*r._torqueDampen*d.inverseInertia*(1-f.angularStiffness),d.constraintImpulse.angle-=V,d.angle-=V),p&&!p.isStatic&&(A=p.inverseMass/T,p.constraintImpulse.x+=S.x*A,p.constraintImpulse.y+=S.y*A,p.position.x+=S.x*A,p.position.y+=S.y*A,C>0&&(p.positionPrev.x+=C*O.x*D*A,p.positionPrev.y+=C*O.y*D*A),V=a.cross(_,S)/M*r._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=V,p.angle+=V)}}},r.postSolveAll=function(f){for(var l=0;l<f.length;l++){var d=f[l],p=d.constraintImpulse;if(!(d.isStatic||p.x===0&&p.y===0&&p.angle===0)){u.set(d,!1);for(var m=0;m<d.parts.length;m++){var _=d.parts[m];o.translate(_.vertices,p),m>0&&(_.position.x+=p.x,_.position.y+=p.y),p.angle!==0&&(o.rotate(_.vertices,p.angle,d.position),c.rotate(_.axes,p.angle),m>0&&a.rotateAbout(_.position,p.angle,d.position,_.position)),h.update(_.bounds,_.vertices,d.velocity)}p.angle*=r._warming,p.x*=r._warming,p.y*=r._warming}}},r.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},r.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},r.currentLength=function(f){var l=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),d=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),p=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),m=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),_=l-p,w=d-m;return Math.sqrt(_*_+w*w)}})()},function(e,n,s){var r={};e.exports=r;var o=s(2),a=s(0);(function(){r.fromVertices=function(u){for(var h={},c=0;c<u.length;c++){var v=(c+1)%u.length,f=o.normalise({x:u[v].y-u[c].y,y:u[c].x-u[v].x}),l=f.y===0?1/0:f.x/f.y;l=l.toFixed(3).toString(),h[l]=f}return a.values(h)},r.rotate=function(u,h){if(h!==0)for(var c=Math.cos(h),v=Math.sin(h),f=0;f<u.length;f++){var l=u[f],d;d=l.x*c-l.y*v,l.y=l.x*v+l.y*c,l.x=d}}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(0),u=s(4),h=s(1),c=s(2);(function(){r.rectangle=function(v,f,l,d,p){p=p||{};var m={label:"Rectangle Body",position:{x:v,y:f},vertices:o.fromPath("L 0 0 L "+l+" 0 L "+l+" "+d+" L 0 "+d)};if(p.chamfer){var _=p.chamfer;m.vertices=o.chamfer(m.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete p.chamfer}return u.create(a.extend({},m,p))},r.trapezoid=function(v,f,l,d,p,m){m=m||{},p>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),p*=.5;var _=(1-p*2)*l,w=l*p,P=w+_,E=P+w,g;p<.5?g="L 0 0 L "+w+" "+-d+" L "+P+" "+-d+" L "+E+" 0":g="L 0 0 L "+P+" "+-d+" L "+E+" 0";var x={label:"Trapezoid Body",position:{x:v,y:f},vertices:o.fromPath(g)};if(m.chamfer){var y=m.chamfer;x.vertices=o.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete m.chamfer}return u.create(a.extend({},x,m))},r.circle=function(v,f,l,d,p){d=d||{};var m={label:"Circle Body",circleRadius:l};p=p||25;var _=Math.ceil(Math.max(10,Math.min(p,l)));return _%2===1&&(_+=1),r.polygon(v,f,_,l,a.extend({},m,d))},r.polygon=function(v,f,l,d,p){if(p=p||{},l<3)return r.circle(v,f,d,p);for(var m=2*Math.PI/l,_="",w=m*.5,P=0;P<l;P+=1){var E=w+P*m,g=Math.cos(E)*d,x=Math.sin(E)*d;_+="L "+g.toFixed(3)+" "+x.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:v,y:f},vertices:o.fromPath(_)};if(p.chamfer){var b=p.chamfer;y.vertices=o.chamfer(y.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete p.chamfer}return u.create(a.extend({},y,p))},r.fromVertices=function(v,f,l,d,p,m,_,w){var P=a.getDecomp(),E,g,x,y,b,C,S,T,k,M,V;for(E=!!(P&&P.quickDecomp),d=d||{},x=[],p=typeof p<"u"?p:!1,m=typeof m<"u"?m:.01,_=typeof _<"u"?_:10,w=typeof w<"u"?w:.01,a.isArray(l[0])||(l=[l]),M=0;M<l.length;M+=1)if(C=l[M],y=o.isConvex(C),b=!y,b&&!E&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!E)y?C=o.clockwiseSort(C):C=o.hull(C),x.push({position:{x:v,y:f},vertices:C});else{var A=C.map(function(U){return[U.x,U.y]});P.makeCCW(A),m!==!1&&P.removeCollinearPoints(A,m),w!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(A,w);var O=P.quickDecomp(A);for(S=0;S<O.length;S++){var D=O[S],B=D.map(function(U){return{x:U[0],y:U[1]}});_>0&&o.area(B)<_||x.push({position:o.centre(B),vertices:B})}}for(S=0;S<x.length;S++)x[S]=u.create(a.extend(x[S],d));if(p){var I=5;for(S=0;S<x.length;S++){var $=x[S];for(T=S+1;T<x.length;T++){var Z=x[T];if(h.overlaps($.bounds,Z.bounds)){var q=$.vertices,ut=Z.vertices;for(k=0;k<$.vertices.length;k++)for(V=0;V<Z.vertices.length;V++){var ct=c.magnitudeSquared(c.sub(q[(k+1)%q.length],ut[V])),at=c.magnitudeSquared(c.sub(q[k],ut[(V+1)%ut.length]));ct<I&&at<I&&(q[k].isInternal=!0,ut[V].isInternal=!0)}}}}}return x.length>1?(g=u.create(a.extend({parts:x.slice(0)},d)),u.setPosition(g,{x:v,y:f}),g):x[0]}})()},function(e,n,s){var r={};e.exports=r;var o=s(0),a=s(8);(function(){r.create=function(u){var h={bodies:[],collisions:[],pairs:null};return o.extend(h,u)},r.setBodies=function(u,h){u.bodies=h.slice(0)},r.clear=function(u){u.bodies=[],u.collisions=[]},r.collisions=function(u){var h=u.pairs,c=u.bodies,v=c.length,f=r.canCollide,l=a.collides,d=u.collisions,p=0,m,_;for(c.sort(r._compareBoundsX),m=0;m<v;m++){var w=c[m],P=w.bounds,E=w.bounds.max.x,g=w.bounds.max.y,x=w.bounds.min.y,y=w.isStatic||w.isSleeping,b=w.parts.length,C=b===1;for(_=m+1;_<v;_++){var S=c[_],T=S.bounds;if(T.min.x>E)break;if(!(g<T.min.y||x>T.max.y)&&!(y&&(S.isStatic||S.isSleeping))&&f(w.collisionFilter,S.collisionFilter)){var k=S.parts.length;if(C&&k===1){var M=l(w,S,h);M&&(d[p++]=M)}else for(var V=b>1?1:0,A=k>1?1:0,O=V;O<b;O++)for(var D=w.parts[O],P=D.bounds,B=A;B<k;B++){var I=S.parts[B],T=I.bounds;if(!(P.min.x>T.max.x||P.max.x<T.min.x||P.max.y<T.min.y||P.min.y>T.max.y)){var M=l(D,I,h);M&&(d[p++]=M)}}}}}return d.length!==p&&(d.length=p),d},r.canCollide=function(u,h){return u.group===h.group&&u.group!==0?u.group>0:(u.mask&h.category)!==0&&(h.mask&u.category)!==0},r._compareBoundsX=function(u,h){return u.bounds.min.x-h.bounds.min.x}})()},function(e,n,s){var r={};e.exports=r;var o=s(0);(function(){r.create=function(a){var u={};return a||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),u.element=a||document.body,u.absolute={x:0,y:0},u.position={x:0,y:0},u.mousedownPosition={x:0,y:0},u.mouseupPosition={x:0,y:0},u.offset={x:0,y:0},u.scale={x:1,y:1},u.wheelDelta=0,u.button=-1,u.pixelRatio=parseInt(u.element.getAttribute("data-pixel-ratio"),10)||1,u.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},u.mousemove=function(h){var c=r._getRelativeMousePosition(h,u.element,u.pixelRatio),v=h.changedTouches;v&&(u.button=0,h.preventDefault()),u.absolute.x=c.x,u.absolute.y=c.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.sourceEvents.mousemove=h},u.mousedown=function(h){var c=r._getRelativeMousePosition(h,u.element,u.pixelRatio),v=h.changedTouches;v?(u.button=0,h.preventDefault()):u.button=h.button,u.absolute.x=c.x,u.absolute.y=c.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.mousedownPosition.x=u.position.x,u.mousedownPosition.y=u.position.y,u.sourceEvents.mousedown=h},u.mouseup=function(h){var c=r._getRelativeMousePosition(h,u.element,u.pixelRatio),v=h.changedTouches;v&&h.preventDefault(),u.button=-1,u.absolute.x=c.x,u.absolute.y=c.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.mouseupPosition.x=u.position.x,u.mouseupPosition.y=u.position.y,u.sourceEvents.mouseup=h},u.mousewheel=function(h){u.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault(),u.sourceEvents.mousewheel=h},r.setElement(u,u.element),u},r.setElement=function(a,u){a.element=u,u.addEventListener("mousemove",a.mousemove,{passive:!0}),u.addEventListener("mousedown",a.mousedown,{passive:!0}),u.addEventListener("mouseup",a.mouseup,{passive:!0}),u.addEventListener("wheel",a.mousewheel,{passive:!1}),u.addEventListener("touchmove",a.mousemove,{passive:!1}),u.addEventListener("touchstart",a.mousedown,{passive:!1}),u.addEventListener("touchend",a.mouseup,{passive:!1})},r.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},r.setOffset=function(a,u){a.offset.x=u.x,a.offset.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},r.setScale=function(a,u){a.scale.x=u.x,a.scale.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},r._getRelativeMousePosition=function(a,u,h){var c=u.getBoundingClientRect(),v=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:v.scrollLeft,l=window.pageYOffset!==void 0?window.pageYOffset:v.scrollTop,d=a.changedTouches,p,m;return d?(p=d[0].pageX-c.left-f,m=d[0].pageY-c.top-l):(p=a.pageX-c.left-f,m=a.pageY-c.top-l),{x:p/(u.clientWidth/(u.width||u.clientWidth)*h),y:m/(u.clientHeight/(u.height||u.clientHeight)*h)}}})()},function(e,n,s){var r={};e.exports=r;var o=s(0);(function(){r._registry={},r.register=function(a){if(r.isPlugin(a)||o.warn("Plugin.register:",r.toString(a),"does not implement all required fields."),a.name in r._registry){var u=r._registry[a.name],h=r.versionParse(a.version).number,c=r.versionParse(u.version).number;h>c?(o.warn("Plugin.register:",r.toString(u),"was upgraded to",r.toString(a)),r._registry[a.name]=a):h<c?o.warn("Plugin.register:",r.toString(u),"can not be downgraded to",r.toString(a)):a!==u&&o.warn("Plugin.register:",r.toString(a),"is already registered to different plugin object")}else r._registry[a.name]=a;return a},r.resolve=function(a){return r._registry[r.dependencyParse(a).name]},r.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},r.isPlugin=function(a){return a&&a.name&&a.version&&a.install},r.isUsed=function(a,u){return a.used.indexOf(u)>-1},r.isFor=function(a,u){var h=a.for&&r.dependencyParse(a.for);return!a.for||u.name===h.name&&r.versionSatisfies(u.version,h.range)},r.use=function(a,u){if(a.uses=(a.uses||[]).concat(u||[]),a.uses.length===0){o.warn("Plugin.use:",r.toString(a),"does not specify any dependencies to install.");return}for(var h=r.dependencies(a),c=o.topologicalSort(h),v=[],f=0;f<c.length;f+=1)if(c[f]!==a.name){var l=r.resolve(c[f]);if(!l){v.push("❌ "+c[f]);continue}r.isUsed(a,l.name)||(r.isFor(l,a)||(o.warn("Plugin.use:",r.toString(l),"is for",l.for,"but installed on",r.toString(a)+"."),l._warned=!0),l.install?l.install(a):(o.warn("Plugin.use:",r.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(v.push("🔶 "+r.toString(l)),delete l._warned):v.push("✅ "+r.toString(l)),a.used.push(l.name))}v.length>0&&o.info(v.join("  "))},r.dependencies=function(a,u){var h=r.dependencyParse(a),c=h.name;if(u=u||{},!(c in u)){a=r.resolve(a)||a,u[c]=o.map(a.uses||[],function(f){r.isPlugin(f)&&r.register(f);var l=r.dependencyParse(f),d=r.resolve(f);return d&&!r.versionSatisfies(d.version,l.range)?(o.warn("Plugin.dependencies:",r.toString(d),"does not satisfy",r.toString(l),"used by",r.toString(h)+"."),d._warned=!0,a._warned=!0):d||(o.warn("Plugin.dependencies:",r.toString(f),"used by",r.toString(h),"could not be resolved."),a._warned=!0),l.name});for(var v=0;v<u[c].length;v+=1)r.dependencies(u[c][v],u);return u}},r.dependencyParse=function(a){if(o.isString(a)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},r.versionParse=function(a){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var h=u.exec(a),c=Number(h[4]),v=Number(h[5]),f=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:a,operator:h[1]||h[2]||"",major:c,minor:v,patch:f,parts:[c,v,f],prerelease:h[7],number:c*1e8+v*1e4+f}},r.versionSatisfies=function(a,u){u=u||"*";var h=r.versionParse(u),c=r.versionParse(a);if(h.isRange){if(h.operator==="*"||a==="*")return!0;if(h.operator===">")return c.number>h.number;if(h.operator===">=")return c.number>=h.number;if(h.operator==="~")return c.major===h.major&&c.minor===h.minor&&c.patch>=h.patch;if(h.operator==="^")return h.major>0?c.major===h.major&&c.number>=h.number:h.minor>0?c.minor===h.minor&&c.patch>=h.patch:c.patch===h.patch}return a===u||a==="*"}})()},function(e,n){var s={};e.exports=s,function(){s.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}}()},function(e,n,s){var r={};e.exports=r;var o=s(7),a=s(18),u=s(13),h=s(19),c=s(5),v=s(6),f=s(10),l=s(0),d=s(4);(function(){r._deltaMax=1e3/60,r.create=function(p){p=p||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},_=l.extend(m,p);return _.world=p.world||v.create({label:"World"}),_.pairs=p.pairs||h.create(),_.detector=p.detector||u.create(),_.detector.pairs=_.pairs,_.grid={buckets:[]},_.world.gravity=_.gravity,_.broadphase=_.grid,_.metrics={},_},r.update=function(p,m){var _=l.now(),w=p.world,P=p.detector,E=p.pairs,g=p.timing,x=g.timestamp,y;m>r._deltaMax&&l.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",r._deltaMax.toFixed(3),"ms."),m=typeof m<"u"?m:l._baseDelta,m*=g.timeScale,g.timestamp+=m,g.lastDelta=m;var b={timestamp:g.timestamp,delta:m};c.trigger(p,"beforeUpdate",b);var C=v.allBodies(w),S=v.allConstraints(w);for(w.isModified&&(u.setBodies(P,C),v.setModified(w,!1,!1,!0)),p.enableSleeping&&o.update(C,m),r._bodiesApplyGravity(C,p.gravity),m>0&&r._bodiesUpdate(C,m),c.trigger(p,"beforeSolve",b),f.preSolveAll(C),y=0;y<p.constraintIterations;y++)f.solveAll(S,m);f.postSolveAll(C);var T=u.collisions(P);h.update(E,T,x),p.enableSleeping&&o.afterCollisions(E.list),E.collisionStart.length>0&&c.trigger(p,"collisionStart",{pairs:E.collisionStart,timestamp:g.timestamp,delta:m});var k=l.clamp(20/p.positionIterations,0,1);for(a.preSolvePosition(E.list),y=0;y<p.positionIterations;y++)a.solvePosition(E.list,m,k);for(a.postSolvePosition(C),f.preSolveAll(C),y=0;y<p.constraintIterations;y++)f.solveAll(S,m);for(f.postSolveAll(C),a.preSolveVelocity(E.list),y=0;y<p.velocityIterations;y++)a.solveVelocity(E.list,m);return r._bodiesUpdateVelocities(C),E.collisionActive.length>0&&c.trigger(p,"collisionActive",{pairs:E.collisionActive,timestamp:g.timestamp,delta:m}),E.collisionEnd.length>0&&c.trigger(p,"collisionEnd",{pairs:E.collisionEnd,timestamp:g.timestamp,delta:m}),r._bodiesClearForces(C),c.trigger(p,"afterUpdate",b),p.timing.lastElapsed=l.now()-_,p},r.merge=function(p,m){if(l.extend(p,m),m.world){p.world=m.world,r.clear(p);for(var _=v.allBodies(p.world),w=0;w<_.length;w++){var P=_[w];o.set(P,!1),P.id=l.nextId()}}},r.clear=function(p){h.clear(p.pairs),u.clear(p.detector)},r._bodiesClearForces=function(p){for(var m=p.length,_=0;_<m;_++){var w=p[_];w.force.x=0,w.force.y=0,w.torque=0}},r._bodiesApplyGravity=function(p,m){var _=typeof m.scale<"u"?m.scale:.001,w=p.length;if(!(m.x===0&&m.y===0||_===0))for(var P=0;P<w;P++){var E=p[P];E.isStatic||E.isSleeping||(E.force.y+=E.mass*m.y*_,E.force.x+=E.mass*m.x*_)}},r._bodiesUpdate=function(p,m){for(var _=p.length,w=0;w<_;w++){var P=p[w];P.isStatic||P.isSleeping||d.update(P,m)}},r._bodiesUpdateVelocities=function(p){for(var m=p.length,_=0;_<m;_++)d.updateVelocities(p[_])}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(0),u=s(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(h){var c,v,f,l=h.length;for(c=0;c<l;c++)v=h[c],v.isActive&&(f=v.contactCount,v.collision.parentA.totalContacts+=f,v.collision.parentB.totalContacts+=f)},r.solvePosition=function(h,c,v){var f,l,d,p,m,_,w,P,E=r._positionDampen*(v||1),g=a.clamp(c/a._baseDelta,0,1),x=h.length;for(f=0;f<x;f++)l=h[f],!(!l.isActive||l.isSensor)&&(d=l.collision,p=d.parentA,m=d.parentB,_=d.normal,l.separation=d.depth+_.x*(m.positionImpulse.x-p.positionImpulse.x)+_.y*(m.positionImpulse.y-p.positionImpulse.y));for(f=0;f<x;f++)l=h[f],!(!l.isActive||l.isSensor)&&(d=l.collision,p=d.parentA,m=d.parentB,_=d.normal,P=l.separation-l.slop*g,(p.isStatic||m.isStatic)&&(P*=2),p.isStatic||p.isSleeping||(w=E/p.totalContacts,p.positionImpulse.x+=_.x*P*w,p.positionImpulse.y+=_.y*P*w),m.isStatic||m.isSleeping||(w=E/m.totalContacts,m.positionImpulse.x-=_.x*P*w,m.positionImpulse.y-=_.y*P*w))},r.postSolvePosition=function(h){for(var c=r._positionWarming,v=h.length,f=o.translate,l=u.update,d=0;d<v;d++){var p=h[d],m=p.positionImpulse,_=m.x,w=m.y,P=p.velocity;if(p.totalContacts=0,_!==0||w!==0){for(var E=0;E<p.parts.length;E++){var g=p.parts[E];f(g.vertices,m),l(g.bounds,g.vertices,P),g.position.x+=_,g.position.y+=w}p.positionPrev.x+=_,p.positionPrev.y+=w,_*P.x+w*P.y<0?(m.x=0,m.y=0):(m.x*=c,m.y*=c)}}},r.preSolveVelocity=function(h){var c=h.length,v,f;for(v=0;v<c;v++){var l=h[v];if(!(!l.isActive||l.isSensor)){var d=l.contacts,p=l.contactCount,m=l.collision,_=m.parentA,w=m.parentB,P=m.normal,E=m.tangent;for(f=0;f<p;f++){var g=d[f],x=g.vertex,y=g.normalImpulse,b=g.tangentImpulse;if(y!==0||b!==0){var C=P.x*y+E.x*b,S=P.y*y+E.y*b;_.isStatic||_.isSleeping||(_.positionPrev.x+=C*_.inverseMass,_.positionPrev.y+=S*_.inverseMass,_.anglePrev+=_.inverseInertia*((x.x-_.position.x)*S-(x.y-_.position.y)*C)),w.isStatic||w.isSleeping||(w.positionPrev.x-=C*w.inverseMass,w.positionPrev.y-=S*w.inverseMass,w.anglePrev-=w.inverseInertia*((x.x-w.position.x)*S-(x.y-w.position.y)*C))}}}}},r.solveVelocity=function(h,c){var v=c/a._baseDelta,f=v*v,l=f*v,d=-r._restingThresh*v,p=r._restingThreshTangent,m=r._frictionNormalMultiplier*v,_=r._frictionMaxStatic,w=h.length,P,E,g,x;for(g=0;g<w;g++){var y=h[g];if(!(!y.isActive||y.isSensor)){var b=y.collision,C=b.parentA,S=b.parentB,T=b.normal.x,k=b.normal.y,M=b.tangent.x,V=b.tangent.y,A=y.inverseMass,O=y.friction*y.frictionStatic*m,D=y.contacts,B=y.contactCount,I=1/B,$=C.position.x-C.positionPrev.x,Z=C.position.y-C.positionPrev.y,q=C.angle-C.anglePrev,ut=S.position.x-S.positionPrev.x,ct=S.position.y-S.positionPrev.y,at=S.angle-S.anglePrev;for(x=0;x<B;x++){var U=D[x],Ut=U.vertex,dt=Ut.x-C.position.x,ln=Ut.y-C.position.y,jt=Ut.x-S.position.x,Ht=Ut.y-S.position.y,xt=$-ln*q,ll=Z+dt*q,ul=ut-Ht*at,cl=ct+jt*at,ts=xt-ul,es=ll-cl,yi=T*ts+k*es,Zt=M*ts+V*es,ns=y.separation+yi,Ci=Math.min(ns,1);Ci=ns<0?0:Ci;var is=Ci*O;Zt<-is||Zt>is?(E=Zt>0?Zt:-Zt,P=y.friction*(Zt>0?1:-1)*l,P<-E?P=-E:P>E&&(P=E)):(P=Zt,E=_);var rs=dt*k-ln*T,ss=jt*k-Ht*T,os=I/(A+C.inverseInertia*rs*rs+S.inverseInertia*ss*ss),$n=(1+y.restitution)*yi*os;if(P*=os,yi<d)U.normalImpulse=0;else{var hl=U.normalImpulse;U.normalImpulse+=$n,U.normalImpulse>0&&(U.normalImpulse=0),$n=U.normalImpulse-hl}if(Zt<-p||Zt>p)U.tangentImpulse=0;else{var pl=U.tangentImpulse;U.tangentImpulse+=P,U.tangentImpulse<-E&&(U.tangentImpulse=-E),U.tangentImpulse>E&&(U.tangentImpulse=E),P=U.tangentImpulse-pl}var Gn=T*$n+M*P,Wn=k*$n+V*P;C.isStatic||C.isSleeping||(C.positionPrev.x+=Gn*C.inverseMass,C.positionPrev.y+=Wn*C.inverseMass,C.anglePrev+=(dt*Wn-ln*Gn)*C.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=Gn*S.inverseMass,S.positionPrev.y-=Wn*S.inverseMass,S.anglePrev-=(jt*Wn-Ht*Gn)*S.inverseInertia)}}}}})()},function(e,n,s){var r={};e.exports=r;var o=s(9),a=s(0);(function(){r.create=function(u){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},r.update=function(u,h,c){var v=o.update,f=o.create,l=o.setActive,d=u.table,p=u.list,m=p.length,_=m,w=u.collisionStart,P=u.collisionEnd,E=u.collisionActive,g=h.length,x=0,y=0,b=0,C,S,T;for(T=0;T<g;T++)C=h[T],S=C.pair,S?(S.isActive&&(E[b++]=S),v(S,C,c)):(S=f(C,c),d[S.id]=S,w[x++]=S,p[_++]=S);for(_=0,m=p.length,T=0;T<m;T++)S=p[T],S.timeUpdated>=c?p[_++]=S:(l(S,!1,c),S.collision.bodyA.sleepCounter>0&&S.collision.bodyB.sleepCounter>0?p[_++]=S:(P[y++]=S,delete d[S.id]));p.length!==_&&(p.length=_),w.length!==x&&(w.length=x),P.length!==y&&(P.length=y),E.length!==b&&(E.length=b)},r.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},function(e,n,s){var r=e.exports=s(21);r.Axes=s(11),r.Bodies=s(12),r.Body=s(4),r.Bounds=s(1),r.Collision=s(8),r.Common=s(0),r.Composite=s(6),r.Composites=s(22),r.Constraint=s(10),r.Contact=s(16),r.Detector=s(13),r.Engine=s(17),r.Events=s(5),r.Grid=s(23),r.Mouse=s(14),r.MouseConstraint=s(24),r.Pair=s(9),r.Pairs=s(19),r.Plugin=s(15),r.Query=s(25),r.Render=s(26),r.Resolver=s(18),r.Runner=s(27),r.SAT=s(28),r.Sleeping=s(7),r.Svg=s(29),r.Vector=s(2),r.Vertices=s(3),r.World=s(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(e,n,s){var r={};e.exports=r;var o=s(15),a=s(0);(function(){r.name="matter-js",r.version="0.20.0",r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(u,h){return u=u.replace(/^Matter./,""),a.chainPathBefore(r,u,h)},r.after=function(u,h){return u=u.replace(/^Matter./,""),a.chainPathAfter(r,u,h)}})()},function(e,n,s){var r={};e.exports=r;var o=s(6),a=s(10),u=s(0),h=s(4),c=s(12),v=u.deprecated;(function(){r.stack=function(f,l,d,p,m,_,w){for(var P=o.create({label:"Stack"}),E=f,g=l,x,y=0,b=0;b<p;b++){for(var C=0,S=0;S<d;S++){var T=w(E,g,S,b,x,y);if(T){var k=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x;k>C&&(C=k),h.translate(T,{x:M*.5,y:k*.5}),E=T.bounds.max.x+m,o.addBody(P,T),x=T,y+=1}else E+=m}g+=C+_,E=f}return P},r.chain=function(f,l,d,p,m,_){for(var w=f.bodies,P=1;P<w.length;P++){var E=w[P-1],g=w[P],x=E.bounds.max.y-E.bounds.min.y,y=E.bounds.max.x-E.bounds.min.x,b=g.bounds.max.y-g.bounds.min.y,C=g.bounds.max.x-g.bounds.min.x,S={bodyA:E,pointA:{x:y*l,y:x*d},bodyB:g,pointB:{x:C*p,y:b*m}},T=u.extend(S,_);o.addConstraint(f,a.create(T))}return f.label+=" Chain",f},r.mesh=function(f,l,d,p,m){var _=f.bodies,w,P,E,g,x;for(w=0;w<d;w++){for(P=1;P<l;P++)E=_[P-1+w*l],g=_[P+w*l],o.addConstraint(f,a.create(u.extend({bodyA:E,bodyB:g},m)));if(w>0)for(P=0;P<l;P++)E=_[P+(w-1)*l],g=_[P+w*l],o.addConstraint(f,a.create(u.extend({bodyA:E,bodyB:g},m))),p&&P>0&&(x=_[P-1+(w-1)*l],o.addConstraint(f,a.create(u.extend({bodyA:x,bodyB:g},m)))),p&&P<l-1&&(x=_[P+1+(w-1)*l],o.addConstraint(f,a.create(u.extend({bodyA:x,bodyB:g},m))))}return f.label+=" Mesh",f},r.pyramid=function(f,l,d,p,m,_,w){return r.stack(f,l,d,p,m,_,function(P,E,g,x,y,b){var C=Math.min(p,Math.ceil(d/2)),S=y?y.bounds.max.x-y.bounds.min.x:0;if(!(x>C)){x=C-x;var T=x,k=d-1-x;if(!(g<T||g>k)){b===1&&h.translate(y,{x:(g+(d%2===1?1:-1))*S,y:0});var M=y?g*S:0;return w(f+M+g*m,E,g,x,y,b)}}})},r.newtonsCradle=function(f,l,d,p,m){for(var _=o.create({label:"Newtons Cradle"}),w=0;w<d;w++){var P=1.9,E=c.circle(f+w*(p*P),l+m,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=a.create({pointA:{x:f+w*(p*P),y:l},bodyB:E});o.addBody(_,E),o.addConstraint(_,g)}return _},v(r,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),r.car=function(f,l,d,p,m){var _=h.nextGroup(!0),w=20,P=-d*.5+w,E=d*.5-w,g=0,x=o.create({label:"Car"}),y=c.rectangle(f,l,d,p,{collisionFilter:{group:_},chamfer:{radius:p*.5},density:2e-4}),b=c.circle(f+P,l+g,m,{collisionFilter:{group:_},friction:.8}),C=c.circle(f+E,l+g,m,{collisionFilter:{group:_},friction:.8}),S=a.create({bodyB:y,pointB:{x:P,y:g},bodyA:b,stiffness:1,length:0}),T=a.create({bodyB:y,pointB:{x:E,y:g},bodyA:C,stiffness:1,length:0});return o.addBody(x,y),o.addBody(x,b),o.addBody(x,C),o.addConstraint(x,S),o.addConstraint(x,T),x},v(r,"car","Composites.car ➤ moved to car example"),r.softBody=function(f,l,d,p,m,_,w,P,E,g){E=u.extend({inertia:1/0},E),g=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var x=r.stack(f,l,d,p,m,_,function(y,b){return c.circle(y,b,P,E)});return r.mesh(x,d,p,w,g),x.label="Soft Body",x},v(r,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(e,n,s){var r={};e.exports=r;var o=s(9),a=s(0),u=a.deprecated;(function(){r.create=function(h){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(c,h)},r.update=function(h,c,v,f){var l,d,p,m=v.world,_=h.buckets,w,P,E=!1;for(l=0;l<c.length;l++){var g=c[l];if(!(g.isSleeping&&!f)&&!(m.bounds&&(g.bounds.max.x<m.bounds.min.x||g.bounds.min.x>m.bounds.max.x||g.bounds.max.y<m.bounds.min.y||g.bounds.min.y>m.bounds.max.y))){var x=r._getRegion(h,g);if(!g.region||x.id!==g.region.id||f){(!g.region||f)&&(g.region=x);var y=r._regionUnion(x,g.region);for(d=y.startCol;d<=y.endCol;d++)for(p=y.startRow;p<=y.endRow;p++){P=r._getBucketId(d,p),w=_[P];var b=d>=x.startCol&&d<=x.endCol&&p>=x.startRow&&p<=x.endRow,C=d>=g.region.startCol&&d<=g.region.endCol&&p>=g.region.startRow&&p<=g.region.endRow;!b&&C&&C&&w&&r._bucketRemoveBody(h,w,g),(g.region===x||b&&!C||f)&&(w||(w=r._createBucket(_,P)),r._bucketAddBody(h,w,g))}g.region=x,E=!0}}}E&&(h.pairsList=r._createActivePairsList(h))},u(r,"update","Grid.update ➤ replaced by Matter.Detector"),r.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},u(r,"clear","Grid.clear ➤ replaced by Matter.Detector"),r._regionUnion=function(h,c){var v=Math.min(h.startCol,c.startCol),f=Math.max(h.endCol,c.endCol),l=Math.min(h.startRow,c.startRow),d=Math.max(h.endRow,c.endRow);return r._createRegion(v,f,l,d)},r._getRegion=function(h,c){var v=c.bounds,f=Math.floor(v.min.x/h.bucketWidth),l=Math.floor(v.max.x/h.bucketWidth),d=Math.floor(v.min.y/h.bucketHeight),p=Math.floor(v.max.y/h.bucketHeight);return r._createRegion(f,l,d,p)},r._createRegion=function(h,c,v,f){return{id:h+","+c+","+v+","+f,startCol:h,endCol:c,startRow:v,endRow:f}},r._getBucketId=function(h,c){return"C"+h+"R"+c},r._createBucket=function(h,c){var v=h[c]=[];return v},r._bucketAddBody=function(h,c,v){var f=h.pairs,l=o.id,d=c.length,p;for(p=0;p<d;p++){var m=c[p];if(!(v.id===m.id||v.isStatic&&m.isStatic)){var _=l(v,m),w=f[_];w?w[2]+=1:f[_]=[v,m,1]}}c.push(v)},r._bucketRemoveBody=function(h,c,v){var f=h.pairs,l=o.id,d;c.splice(a.indexOf(c,v),1);var p=c.length;for(d=0;d<p;d++){var m=f[l(v,c[d])];m&&(m[2]-=1)}},r._createActivePairsList=function(h){var c,v=h.pairs,f=a.keys(v),l=f.length,d=[],p;for(p=0;p<l;p++)c=v[f[p]],c[2]>0?d.push(c):delete v[f[p]];return d}})()},function(e,n,s){var r={};e.exports=r;var o=s(3),a=s(7),u=s(14),h=s(5),c=s(13),v=s(10),f=s(6),l=s(0),d=s(1);(function(){r.create=function(p,m){var _=(p?p.mouse:null)||(m?m.mouse:null);_||(p&&p.render&&p.render.canvas?_=u.create(p.render.canvas):m&&m.element?_=u.create(m.element):(_=u.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=v.create({label:"Mouse Constraint",pointA:_.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),P={type:"mouseConstraint",mouse:_,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},E=l.extend(P,m);return h.on(p,"beforeUpdate",function(){var g=f.allBodies(p.world);r.update(E,g),r._triggerEvents(E)}),E},r.update=function(p,m){var _=p.mouse,w=p.constraint,P=p.body;if(_.button===0){if(w.bodyB)a.set(w.bodyB,!1),w.pointA=_.position;else for(var E=0;E<m.length;E++)if(P=m[E],d.contains(P.bounds,_.position)&&c.canCollide(P.collisionFilter,p.collisionFilter))for(var g=P.parts.length>1?1:0;g<P.parts.length;g++){var x=P.parts[g];if(o.contains(x.vertices,_.position)){w.pointA=_.position,w.bodyB=p.body=P,w.pointB={x:_.position.x-P.position.x,y:_.position.y-P.position.y},w.angleB=P.angle,a.set(P,!1),h.trigger(p,"startdrag",{mouse:_,body:P});break}}}else w.bodyB=p.body=null,w.pointB=null,P&&h.trigger(p,"enddrag",{mouse:_,body:P})},r._triggerEvents=function(p){var m=p.mouse,_=m.sourceEvents;_.mousemove&&h.trigger(p,"mousemove",{mouse:m}),_.mousedown&&h.trigger(p,"mousedown",{mouse:m}),_.mouseup&&h.trigger(p,"mouseup",{mouse:m}),u.clearSourceEvents(m)}})()},function(e,n,s){var r={};e.exports=r;var o=s(2),a=s(8),u=s(1),h=s(12),c=s(3);(function(){r.collides=function(v,f){for(var l=[],d=f.length,p=v.bounds,m=a.collides,_=u.overlaps,w=0;w<d;w++){var P=f[w],E=P.parts.length,g=E===1?0:1;if(_(P.bounds,p))for(var x=g;x<E;x++){var y=P.parts[x];if(_(y.bounds,p)){var b=m(y,v);if(b){l.push(b);break}}}}return l},r.ray=function(v,f,l,d){d=d||1e-100;for(var p=o.angle(f,l),m=o.magnitude(o.sub(f,l)),_=(l.x+f.x)*.5,w=(l.y+f.y)*.5,P=h.rectangle(_,w,m,d,{angle:p}),E=r.collides(P,v),g=0;g<E.length;g+=1){var x=E[g];x.body=x.bodyB=x.bodyA}return E},r.region=function(v,f,l){for(var d=[],p=0;p<v.length;p++){var m=v[p],_=u.overlaps(m.bounds,f);(_&&!l||!_&&l)&&d.push(m)}return d},r.point=function(v,f){for(var l=[],d=0;d<v.length;d++){var p=v[d];if(u.contains(p.bounds,f))for(var m=p.parts.length===1?0:1;m<p.parts.length;m++){var _=p.parts[m];if(u.contains(_.bounds,f)&&c.contains(_.vertices,f)){l.push(p);break}}}return l}})()},function(e,n,s){var r={};e.exports=r;var o=s(4),a=s(0),u=s(6),h=s(1),c=s(5),v=s(2),f=s(14);(function(){var l,d;typeof window<"u"&&(l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(a.now())},1e3/60)},d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(g){var x={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=a.extend(x,g);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=g.mouse,y.engine=g.engine,y.canvas=y.canvas||_(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.controller=r,y.options.showBroadphase=!1,y.options.pixelRatio!==1&&r.setPixelRatio(y,y.options.pixelRatio),a.isElement(y.element)&&y.element.appendChild(y.canvas),y},r.run=function(g){(function x(y){g.frameRequestId=l(x),p(g,y),r.world(g,y),g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0),(g.options.showStats||g.options.showDebug)&&r.stats(g,g.context,y),(g.options.showPerformance||g.options.showDebug)&&r.performance(g,g.context,y),g.context.setTransform(1,0,0,1,0,0)})()},r.stop=function(g){d(g.frameRequestId)},r.setPixelRatio=function(g,x){var y=g.options,b=g.canvas;x==="auto"&&(x=w(b)),y.pixelRatio=x,b.setAttribute("data-pixel-ratio",x),b.width=y.width*x,b.height=y.height*x,b.style.width=y.width+"px",b.style.height=y.height+"px"},r.setSize=function(g,x,y){g.options.width=x,g.options.height=y,g.bounds.max.x=g.bounds.min.x+x,g.bounds.max.y=g.bounds.min.y+y,g.options.pixelRatio!==1?r.setPixelRatio(g,g.options.pixelRatio):(g.canvas.width=x,g.canvas.height=y)},r.lookAt=function(g,x,y,b){b=typeof b<"u"?b:!0,x=a.isArray(x)?x:[x],y=y||{x:0,y:0};for(var C={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},S=0;S<x.length;S+=1){var T=x[S],k=T.bounds?T.bounds.min:T.min||T.position||T,M=T.bounds?T.bounds.max:T.max||T.position||T;k&&M&&(k.x<C.min.x&&(C.min.x=k.x),M.x>C.max.x&&(C.max.x=M.x),k.y<C.min.y&&(C.min.y=k.y),M.y>C.max.y&&(C.max.y=M.y))}var V=C.max.x-C.min.x+2*y.x,A=C.max.y-C.min.y+2*y.y,O=g.canvas.height,D=g.canvas.width,B=D/O,I=V/A,$=1,Z=1;I>B?Z=I/B:$=B/I,g.options.hasBounds=!0,g.bounds.min.x=C.min.x,g.bounds.max.x=C.min.x+V*$,g.bounds.min.y=C.min.y,g.bounds.max.y=C.min.y+A*Z,b&&(g.bounds.min.x+=V*.5-V*$*.5,g.bounds.max.x+=V*.5-V*$*.5,g.bounds.min.y+=A*.5-A*Z*.5,g.bounds.max.y+=A*.5-A*Z*.5),g.bounds.min.x-=y.x,g.bounds.max.x-=y.x,g.bounds.min.y-=y.y,g.bounds.max.y-=y.y,g.mouse&&(f.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),f.setOffset(g.mouse,g.bounds.min))},r.startViewTransform=function(g){var x=g.bounds.max.x-g.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,b=x/g.options.width,C=y/g.options.height;g.context.setTransform(g.options.pixelRatio/b,0,0,g.options.pixelRatio/C,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},r.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},r.world=function(g,x){var y=a.now(),b=g.engine,C=b.world,S=g.canvas,T=g.context,k=g.options,M=g.timing,V=u.allBodies(C),A=u.allConstraints(C),O=k.wireframes?k.wireframeBackground:k.background,D=[],B=[],I,$={timestamp:b.timing.timestamp};if(c.trigger(g,"beforeRender",$),g.currentBackground!==O&&E(g,O),T.globalCompositeOperation="source-in",T.fillStyle="transparent",T.fillRect(0,0,S.width,S.height),T.globalCompositeOperation="source-over",k.hasBounds){for(I=0;I<V.length;I++){var Z=V[I];h.overlaps(Z.bounds,g.bounds)&&D.push(Z)}for(I=0;I<A.length;I++){var q=A[I],ut=q.bodyA,ct=q.bodyB,at=q.pointA,U=q.pointB;ut&&(at=v.add(ut.position,q.pointA)),ct&&(U=v.add(ct.position,q.pointB)),!(!at||!U)&&(h.contains(g.bounds,at)||h.contains(g.bounds,U))&&B.push(q)}r.startViewTransform(g),g.mouse&&(f.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),f.setOffset(g.mouse,g.bounds.min))}else B=A,D=V,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!k.wireframes||b.enableSleeping&&k.showSleeping?r.bodies(g,D,T):(k.showConvexHulls&&r.bodyConvexHulls(g,D,T),r.bodyWireframes(g,D,T)),k.showBounds&&r.bodyBounds(g,D,T),(k.showAxes||k.showAngleIndicator)&&r.bodyAxes(g,D,T),k.showPositions&&r.bodyPositions(g,D,T),k.showVelocity&&r.bodyVelocity(g,D,T),k.showIds&&r.bodyIds(g,D,T),k.showSeparations&&r.separations(g,b.pairs.list,T),k.showCollisions&&r.collisions(g,b.pairs.list,T),k.showVertexNumbers&&r.vertexNumbers(g,D,T),k.showMousePosition&&r.mousePosition(g,g.mouse,T),r.constraints(B,T),k.hasBounds&&r.endViewTransform(g),c.trigger(g,"afterRender",$),M.lastElapsed=a.now()-y},r.stats=function(g,x,y){for(var b=g.engine,C=b.world,S=u.allBodies(C),T=0,k=55,M=44,V=0,A=0,O=0;O<S.length;O+=1)T+=S[O].parts.length;var D={Part:T,Body:S.length,Cons:u.allConstraints(C).length,Comp:u.allComposites(C).length,Pair:b.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(V,A,k*5.5,M),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var B in D){var I=D[B];x.fillStyle="#aaa",x.fillText(B,V+k,A+8),x.fillStyle="#eee",x.fillText(I,V+k,A+26),V+=k}},r.performance=function(g,x){var y=g.engine,b=g.timing,C=b.deltaHistory,S=b.elapsedHistory,T=b.timestampElapsedHistory,k=b.engineDeltaHistory,M=b.engineUpdatesHistory,V=b.engineElapsedHistory,A=y.timing.lastUpdatesPerFrame,O=y.timing.lastDelta,D=m(C),B=m(S),I=m(k),$=m(M),Z=m(V),q=m(T),ut=q/D||0,ct=Math.round(D/O),at=1e3/D||0,U=4,Ut=12,dt=60,ln=34,jt=10,Ht=69;x.fillStyle="#0e0f19",x.fillRect(0,50,Ut*5+dt*6+22,ln),r.status(x,jt,Ht,dt,U,C.length,Math.round(at)+" fps",at/r._goodFps,function(xt){return C[xt]/D-1}),r.status(x,jt+Ut+dt,Ht,dt,U,k.length,O.toFixed(2)+" dt",r._goodDelta/O,function(xt){return k[xt]/I-1}),r.status(x,jt+(Ut+dt)*2,Ht,dt,U,M.length,A+" upf",Math.pow(a.clamp($/ct||1,0,1),4),function(xt){return M[xt]/$-1}),r.status(x,jt+(Ut+dt)*3,Ht,dt,U,V.length,Z.toFixed(2)+" ut",1-A*Z/r._goodFps,function(xt){return V[xt]/Z-1}),r.status(x,jt+(Ut+dt)*4,Ht,dt,U,S.length,B.toFixed(2)+" rt",1-B/r._goodFps,function(xt){return S[xt]/B-1}),r.status(x,jt+(Ut+dt)*5,Ht,dt,U,T.length,ut.toFixed(2)+" x",ut*ut*ut,function(xt){return(T[xt]/C[xt]/ut||0)-1})},r.status=function(g,x,y,b,C,S,T,k,M){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(x,y+7,b,1),g.beginPath(),g.moveTo(x,y+7-C*a.clamp(.4*M(0),-2,2));for(var V=0;V<b;V+=1)g.lineTo(x+V,y+7-(V<S?C*a.clamp(.4*M(V),-2,2):0));g.stroke(),g.fillStyle="hsl("+a.clamp(25+95*k,0,120)+",100%,60%)",g.fillRect(x,y-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(T,x+b,y-5)},r.constraints=function(g,x){for(var y=x,b=0;b<g.length;b++){var C=g[b];if(!(!C.render.visible||!C.pointA||!C.pointB)){var S=C.bodyA,T=C.bodyB,k,M;if(S?k=v.add(S.position,C.pointA):k=C.pointA,C.render.type==="pin")y.beginPath(),y.arc(k.x,k.y,3,0,2*Math.PI),y.closePath();else{if(T?M=v.add(T.position,C.pointB):M=C.pointB,y.beginPath(),y.moveTo(k.x,k.y),C.render.type==="spring")for(var V=v.sub(M,k),A=v.perp(v.normalise(V)),O=Math.ceil(a.clamp(C.length/5,12,20)),D,B=1;B<O;B+=1)D=B%2===0?1:-1,y.lineTo(k.x+V.x*(B/O)+A.x*D*4,k.y+V.y*(B/O)+A.y*D*4);y.lineTo(M.x,M.y)}C.render.lineWidth&&(y.lineWidth=C.render.lineWidth,y.strokeStyle=C.render.strokeStyle,y.stroke()),C.render.anchors&&(y.fillStyle=C.render.strokeStyle,y.beginPath(),y.arc(k.x,k.y,3,0,2*Math.PI),y.arc(M.x,M.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},r.bodies=function(g,x,y){var b=y;g.engine;var C=g.options,S=C.showInternalEdges||!C.wireframes,T,k,M,V;for(M=0;M<x.length;M++)if(T=x[M],!!T.render.visible){for(V=T.parts.length>1?1:0;V<T.parts.length;V++)if(k=T.parts[V],!!k.render.visible){if(C.showSleeping&&T.isSleeping?b.globalAlpha=.5*k.render.opacity:k.render.opacity!==1&&(b.globalAlpha=k.render.opacity),k.render.sprite&&k.render.sprite.texture&&!C.wireframes){var A=k.render.sprite,O=P(g,A.texture);b.translate(k.position.x,k.position.y),b.rotate(k.angle),b.drawImage(O,O.width*-A.xOffset*A.xScale,O.height*-A.yOffset*A.yScale,O.width*A.xScale,O.height*A.yScale),b.rotate(-k.angle),b.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)b.beginPath(),b.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{b.beginPath(),b.moveTo(k.vertices[0].x,k.vertices[0].y);for(var D=1;D<k.vertices.length;D++)!k.vertices[D-1].isInternal||S?b.lineTo(k.vertices[D].x,k.vertices[D].y):b.moveTo(k.vertices[D].x,k.vertices[D].y),k.vertices[D].isInternal&&!S&&b.moveTo(k.vertices[(D+1)%k.vertices.length].x,k.vertices[(D+1)%k.vertices.length].y);b.lineTo(k.vertices[0].x,k.vertices[0].y),b.closePath()}C.wireframes?(b.lineWidth=1,b.strokeStyle=g.options.wireframeStrokeStyle,b.stroke()):(b.fillStyle=k.render.fillStyle,k.render.lineWidth&&(b.lineWidth=k.render.lineWidth,b.strokeStyle=k.render.strokeStyle,b.stroke()),b.fill())}b.globalAlpha=1}}},r.bodyWireframes=function(g,x,y){var b=y,C=g.options.showInternalEdges,S,T,k,M,V;for(b.beginPath(),k=0;k<x.length;k++)if(S=x[k],!!S.render.visible)for(V=S.parts.length>1?1:0;V<S.parts.length;V++){for(T=S.parts[V],b.moveTo(T.vertices[0].x,T.vertices[0].y),M=1;M<T.vertices.length;M++)!T.vertices[M-1].isInternal||C?b.lineTo(T.vertices[M].x,T.vertices[M].y):b.moveTo(T.vertices[M].x,T.vertices[M].y),T.vertices[M].isInternal&&!C&&b.moveTo(T.vertices[(M+1)%T.vertices.length].x,T.vertices[(M+1)%T.vertices.length].y);b.lineTo(T.vertices[0].x,T.vertices[0].y)}b.lineWidth=1,b.strokeStyle=g.options.wireframeStrokeStyle,b.stroke()},r.bodyConvexHulls=function(g,x,y){var b=y,C,S,T;for(b.beginPath(),S=0;S<x.length;S++)if(C=x[S],!(!C.render.visible||C.parts.length===1)){for(b.moveTo(C.vertices[0].x,C.vertices[0].y),T=1;T<C.vertices.length;T++)b.lineTo(C.vertices[T].x,C.vertices[T].y);b.lineTo(C.vertices[0].x,C.vertices[0].y)}b.lineWidth=1,b.strokeStyle="rgba(255,255,255,0.2)",b.stroke()},r.vertexNumbers=function(g,x,y){var b=y,C,S,T;for(C=0;C<x.length;C++){var k=x[C].parts;for(T=k.length>1?1:0;T<k.length;T++){var M=k[T];for(S=0;S<M.vertices.length;S++)b.fillStyle="rgba(255,255,255,0.2)",b.fillText(C+"_"+S,M.position.x+(M.vertices[S].x-M.position.x)*.8,M.position.y+(M.vertices[S].y-M.position.y)*.8)}}},r.mousePosition=function(g,x,y){var b=y;b.fillStyle="rgba(255,255,255,0.8)",b.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},r.bodyBounds=function(g,x,y){var b=y;g.engine;var C=g.options;b.beginPath();for(var S=0;S<x.length;S++){var T=x[S];if(T.render.visible)for(var k=x[S].parts,M=k.length>1?1:0;M<k.length;M++){var V=k[M];b.rect(V.bounds.min.x,V.bounds.min.y,V.bounds.max.x-V.bounds.min.x,V.bounds.max.y-V.bounds.min.y)}}C.wireframes?b.strokeStyle="rgba(255,255,255,0.08)":b.strokeStyle="rgba(0,0,0,0.1)",b.lineWidth=1,b.stroke()},r.bodyAxes=function(g,x,y){var b=y;g.engine;var C=g.options,S,T,k,M;for(b.beginPath(),T=0;T<x.length;T++){var V=x[T],A=V.parts;if(V.render.visible)if(C.showAxes)for(k=A.length>1?1:0;k<A.length;k++)for(S=A[k],M=0;M<S.axes.length;M++){var O=S.axes[M];b.moveTo(S.position.x,S.position.y),b.lineTo(S.position.x+O.x*20,S.position.y+O.y*20)}else for(k=A.length>1?1:0;k<A.length;k++)for(S=A[k],M=0;M<S.axes.length;M++)b.moveTo(S.position.x,S.position.y),b.lineTo((S.vertices[0].x+S.vertices[S.vertices.length-1].x)/2,(S.vertices[0].y+S.vertices[S.vertices.length-1].y)/2)}C.wireframes?(b.strokeStyle="indianred",b.lineWidth=1):(b.strokeStyle="rgba(255, 255, 255, 0.4)",b.globalCompositeOperation="overlay",b.lineWidth=2),b.stroke(),b.globalCompositeOperation="source-over"},r.bodyPositions=function(g,x,y){var b=y;g.engine;var C=g.options,S,T,k,M;for(b.beginPath(),k=0;k<x.length;k++)if(S=x[k],!!S.render.visible)for(M=0;M<S.parts.length;M++)T=S.parts[M],b.arc(T.position.x,T.position.y,3,0,2*Math.PI,!1),b.closePath();for(C.wireframes?b.fillStyle="indianred":b.fillStyle="rgba(0,0,0,0.5)",b.fill(),b.beginPath(),k=0;k<x.length;k++)S=x[k],S.render.visible&&(b.arc(S.positionPrev.x,S.positionPrev.y,2,0,2*Math.PI,!1),b.closePath());b.fillStyle="rgba(255,165,0,0.8)",b.fill()},r.bodyVelocity=function(g,x,y){var b=y;b.beginPath();for(var C=0;C<x.length;C++){var S=x[C];if(S.render.visible){var T=o.getVelocity(S);b.moveTo(S.position.x,S.position.y),b.lineTo(S.position.x+T.x,S.position.y+T.y)}}b.lineWidth=3,b.strokeStyle="cornflowerblue",b.stroke()},r.bodyIds=function(g,x,y){var b=y,C,S;for(C=0;C<x.length;C++)if(x[C].render.visible){var T=x[C].parts;for(S=T.length>1?1:0;S<T.length;S++){var k=T[S];b.font="12px Arial",b.fillStyle="rgba(255,255,255,0.5)",b.fillText(k.id,k.position.x+10,k.position.y-10)}}},r.collisions=function(g,x,y){var b=y,C=g.options,S,T,k,M;for(b.beginPath(),k=0;k<x.length;k++)if(S=x[k],!!S.isActive)for(T=S.collision,M=0;M<S.contactCount;M++){var V=S.contacts[M],A=V.vertex;b.rect(A.x-1.5,A.y-1.5,3.5,3.5)}for(C.wireframes?b.fillStyle="rgba(255,255,255,0.7)":b.fillStyle="orange",b.fill(),b.beginPath(),k=0;k<x.length;k++)if(S=x[k],!!S.isActive&&(T=S.collision,S.contactCount>0)){var O=S.contacts[0].vertex.x,D=S.contacts[0].vertex.y;S.contactCount===2&&(O=(S.contacts[0].vertex.x+S.contacts[1].vertex.x)/2,D=(S.contacts[0].vertex.y+S.contacts[1].vertex.y)/2),T.bodyB===T.supports[0].body||T.bodyA.isStatic===!0?b.moveTo(O-T.normal.x*8,D-T.normal.y*8):b.moveTo(O+T.normal.x*8,D+T.normal.y*8),b.lineTo(O,D)}C.wireframes?b.strokeStyle="rgba(255,165,0,0.7)":b.strokeStyle="orange",b.lineWidth=1,b.stroke()},r.separations=function(g,x,y){var b=y,C=g.options,S,T,k,M,V;for(b.beginPath(),V=0;V<x.length;V++)if(S=x[V],!!S.isActive){T=S.collision,k=T.bodyA,M=T.bodyB;var A=1;!M.isStatic&&!k.isStatic&&(A=.5),M.isStatic&&(A=0),b.moveTo(M.position.x,M.position.y),b.lineTo(M.position.x-T.penetration.x*A,M.position.y-T.penetration.y*A),A=1,!M.isStatic&&!k.isStatic&&(A=.5),k.isStatic&&(A=0),b.moveTo(k.position.x,k.position.y),b.lineTo(k.position.x+T.penetration.x*A,k.position.y+T.penetration.y*A)}C.wireframes?b.strokeStyle="rgba(255,165,0,0.5)":b.strokeStyle="orange",b.stroke()},r.inspector=function(g,x){g.engine;var y=g.selected,b=g.render,C=b.options,S;if(C.hasBounds){var T=b.bounds.max.x-b.bounds.min.x,k=b.bounds.max.y-b.bounds.min.y,M=T/b.options.width,V=k/b.options.height;x.scale(1/M,1/V),x.translate(-b.bounds.min.x,-b.bounds.min.y)}for(var A=0;A<y.length;A++){var O=y[A].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),O.type){case"body":S=O.bounds,x.beginPath(),x.rect(Math.floor(S.min.x-3),Math.floor(S.min.y-3),Math.floor(S.max.x-S.min.x+6),Math.floor(S.max.y-S.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var D=O.pointA;O.bodyA&&(D=O.pointB),x.beginPath(),x.arc(D.x,D.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}g.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",S=g.selectBounds,x.beginPath(),x.rect(Math.floor(S.min.x),Math.floor(S.min.y),Math.floor(S.max.x-S.min.x),Math.floor(S.max.y-S.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),C.hasBounds&&x.setTransform(1,0,0,1,0,0)};var p=function(g,x){var y=g.engine,b=g.timing,C=b.historySize,S=y.timing.timestamp;b.delta=x-b.lastTime||r._goodDelta,b.lastTime=x,b.timestampElapsed=S-b.lastTimestamp||0,b.lastTimestamp=S,b.deltaHistory.unshift(b.delta),b.deltaHistory.length=Math.min(b.deltaHistory.length,C),b.engineDeltaHistory.unshift(y.timing.lastDelta),b.engineDeltaHistory.length=Math.min(b.engineDeltaHistory.length,C),b.timestampElapsedHistory.unshift(b.timestampElapsed),b.timestampElapsedHistory.length=Math.min(b.timestampElapsedHistory.length,C),b.engineUpdatesHistory.unshift(y.timing.lastUpdatesPerFrame),b.engineUpdatesHistory.length=Math.min(b.engineUpdatesHistory.length,C),b.engineElapsedHistory.unshift(y.timing.lastElapsed),b.engineElapsedHistory.length=Math.min(b.engineElapsedHistory.length,C),b.elapsedHistory.unshift(b.lastElapsed),b.elapsedHistory.length=Math.min(b.elapsedHistory.length,C)},m=function(g){for(var x=0,y=0;y<g.length;y+=1)x+=g[y];return x/g.length||0},_=function(g,x){var y=document.createElement("canvas");return y.width=g,y.height=x,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},w=function(g){var x=g.getContext("2d"),y=window.devicePixelRatio||1,b=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return y/b},P=function(g,x){var y=g.textures[x];return y||(y=g.textures[x]=new Image,y.src=x,y)},E=function(g,x){var y=x;/(jpg|gif|png)$/.test(x)&&(y="url("+x+")"),g.canvas.style.background=y,g.canvas.style.backgroundSize="contain",g.currentBackground=x}})()},function(e,n,s){var r={};e.exports=r;var o=s(5),a=s(17),u=s(0);(function(){r._maxFrameDelta=1e3/15,r._frameDeltaFallback=1e3/60,r._timeBufferMargin=1.5,r._elapsedNextEstimate=1,r._smoothingLowerBound=.1,r._smoothingUpperBound=.9,r.create=function(c){var v={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=u.extend(v,c);return f.fps=0,f},r.run=function(c,v){return c.timeBuffer=r._frameDeltaFallback,function f(l){c.frameRequestId=r._onNextFrame(c,f),l&&c.enabled&&r.tick(c,v,l)}(),c},r.tick=function(c,v,f){var l=u.now(),d=c.delta,p=0,m=f-c.timeLastTick;if((!m||!c.timeLastTick||m>Math.max(r._maxFrameDelta,c.maxFrameTime))&&(m=c.frameDelta||r._frameDeltaFallback),c.frameDeltaSmoothing){c.frameDeltaHistory.push(m),c.frameDeltaHistory=c.frameDeltaHistory.slice(-c.frameDeltaHistorySize);var _=c.frameDeltaHistory.slice(0).sort(),w=c.frameDeltaHistory.slice(_.length*r._smoothingLowerBound,_.length*r._smoothingUpperBound),P=h(w);m=P||m}c.frameDeltaSnapping&&(m=1e3/Math.round(1e3/m)),c.frameDelta=m,c.timeLastTick=f,c.timeBuffer+=c.frameDelta,c.timeBuffer=u.clamp(c.timeBuffer,0,c.frameDelta+d*r._timeBufferMargin),c.lastUpdatesDeferred=0;var E=c.maxUpdates||Math.ceil(c.maxFrameTime/d),g={timestamp:v.timing.timestamp};o.trigger(c,"beforeTick",g),o.trigger(c,"tick",g);for(var x=u.now();d>0&&c.timeBuffer>=d*r._timeBufferMargin;){o.trigger(c,"beforeUpdate",g),a.update(v,d),o.trigger(c,"afterUpdate",g),c.timeBuffer-=d,p+=1;var y=u.now()-l,b=u.now()-x,C=y+r._elapsedNextEstimate*b/p;if(p>=E||C>c.maxFrameTime){c.lastUpdatesDeferred=Math.round(Math.max(0,c.timeBuffer/d-r._timeBufferMargin));break}}v.timing.lastUpdatesPerFrame=p,o.trigger(c,"afterTick",g),c.frameDeltaHistory.length>=100&&(c.lastUpdatesDeferred&&Math.round(c.frameDelta/d)>E?u.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):c.lastUpdatesDeferred&&u.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof c.isFixed<"u"&&u.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(c.deltaMin||c.deltaMax)&&u.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),c.fps!==0&&u.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},r.stop=function(c){r._cancelNextFrame(c)},r._onNextFrame=function(c,v){if(typeof window<"u"&&window.requestAnimationFrame)c.frameRequestId=window.requestAnimationFrame(v);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return c.frameRequestId},r._cancelNextFrame=function(c){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(c.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(c){for(var v=0,f=c.length,l=0;l<f;l+=1)v+=c[l];return v/f||0}})()},function(e,n,s){var r={};e.exports=r;var o=s(8),a=s(0),u=a.deprecated;(function(){r.collides=function(h,c){return o.collides(h,c)},u(r,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(e,n,s){var r={};e.exports=r,s(1);var o=s(0);(function(){r.pathToVertices=function(a,u){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,c,v,f,l,d,p,m,_,w,P=[],E,g,x=0,y=0,b=0;u=u||15;var C=function(T,k,M){var V=M%2===1&&M>1;if(!_||T!=_.x||k!=_.y){_&&V?(E=_.x,g=_.y):(E=0,g=0);var A={x:E+T,y:g+k};(V||!_)&&(_=A),P.push(A),y=E+T,b=g+k}},S=function(T){var k=T.pathSegTypeAsLetter.toUpperCase();if(k!=="Z"){switch(k){case"M":case"L":case"T":case"C":case"S":case"Q":y=T.x,b=T.y;break;case"H":y=T.x;break;case"V":b=T.y;break}C(y,b,T.pathSegType)}};for(r._svgPathToAbsolute(a),v=a.getTotalLength(),d=[],h=0;h<a.pathSegList.numberOfItems;h+=1)d.push(a.pathSegList.getItem(h));for(p=d.concat();x<v;){if(w=a.getPathSegAtLength(x),l=d[w],l!=m){for(;p.length&&p[0]!=l;)S(p.shift());m=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=a.getPointAtLength(x),C(f.x,f.y,0);break}x+=u}for(h=0,c=p.length;h<c;++h)S(p[h]);return P},r._svgPathToAbsolute=function(a){for(var u,h,c,v,f,l,d=a.pathSegList,p=0,m=0,_=d.numberOfItems,w=0;w<_;++w){var P=d.getItem(w),E=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in P&&(p=P.x),"y"in P&&(m=P.y);else switch("x1"in P&&(c=p+P.x1),"x2"in P&&(f=p+P.x2),"y1"in P&&(v=m+P.y1),"y2"in P&&(l=m+P.y2),"x"in P&&(p+=P.x),"y"in P&&(m+=P.y),E){case"m":d.replaceItem(a.createSVGPathSegMovetoAbs(p,m),w);break;case"l":d.replaceItem(a.createSVGPathSegLinetoAbs(p,m),w);break;case"h":d.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(p),w);break;case"v":d.replaceItem(a.createSVGPathSegLinetoVerticalAbs(m),w);break;case"c":d.replaceItem(a.createSVGPathSegCurvetoCubicAbs(p,m,c,v,f,l),w);break;case"s":d.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(p,m,f,l),w);break;case"q":d.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(p,m,c,v),w);break;case"t":d.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(p,m),w);break;case"a":d.replaceItem(a.createSVGPathSegArcAbs(p,m,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),w);break;case"z":case"Z":p=u,m=h;break}(E=="M"||E=="m")&&(u=p,h=m)}}})()},function(e,n,s){var r={};e.exports=r;var o=s(6);s(0),function(){r.create=o.create,r.add=o.add,r.remove=o.remove,r.clear=o.clear,r.addComposite=o.addComposite,r.addBody=o.addBody,r.addConstraint=o.addConstraint}()}])})}(ei)),ei.exports}var N=Jd();const L={terrain:{chunks:{diagonal:{length:{min:200,max:500},angle:{min:20,max:30}},divisions:5,noise:{freq:.002,amp:50},thickness:10}},player:{startPosition:{x:250,y:100},width:50,height:25,chamfer:12.5,friction:0,groundSensorThickness:5,terrainAngleSensor:{width:5,height:200},autoRotateLerpAmount:.1,backFlipRotationSpeed:.25,velocity:{x:7.5,jump:-10}},debug:{cameraOffset:{x:0,y:400}}};function tf(i){return{all:i=i||new Map,on:function(t,e){var n=i.get(t);n?n.push(e):i.set(t,[e])},off:function(t,e){var n=i.get(t);n&&(e?n.splice(n.indexOf(e)>>>0,1):i.set(t,[]))},emit:function(t,e){var n=i.get(t);n&&n.slice().map(function(s){s(e)}),(n=i.get("*"))&&n.slice().map(function(s){s(t,e)})}}}const On=tf(),ef=(i,t)=>{const n=i.addFolder({title:"Terrain",expanded:!1}).addFolder({title:"Chunks"}).on("change",()=>{On.emit("resetPlayer"),t.terrain.chunks.forEach(a=>{N.Composite.remove(t.physicsEngine.world,a.bodies)}),t.terrain.chunks=[],t.terrain.initTerrainChunks()}),s=n.addFolder({title:"Length"});s.addBinding(L.terrain.chunks.diagonal.length,"min"),s.addBinding(L.terrain.chunks.diagonal.length,"max");const r=n.addFolder({title:"Angle"});r.addBinding(L.terrain.chunks.diagonal.angle,"min"),r.addBinding(L.terrain.chunks.diagonal.angle,"max");const o=n.addFolder({title:"Noise"});o.addBinding(L.terrain.chunks.noise,"amp",{label:"Amp",min:0,max:200,step:1}),o.addBinding(L.terrain.chunks.noise,"freq",{label:"Freq",min:0,max:.01,step:1e-4})},nf=(i,t)=>{const e=i.addFolder({title:"Physics engine",expanded:!1});e.addBinding(t.runner,"enabled"),e.addBinding(t.physicsEngine.timing,"timeScale",{min:0,max:1})},rf=(i,t)=>{const e=i.addFolder({title:"Player",expanded:!1});e.addBinding(L.player.velocity,"x",{min:0,max:20,label:"Vel X"}),e.addBinding(L.player,"backFlipRotationSpeed",{min:0,max:1,label:"Backflip"})},sf=i=>{const t=new Qd;nf(t,i),rf(t),ef(t,i)},of=Math.PI/180;function ol(i){return i*of}function af(i,t,e){let{x:n,y:s}=i,{x:r,y:o}=t,a=(r-n)/e,u=(o-s)/e,h=[];for(let c=1;c<e;c++)h.push({x:n+c*a,y:s+c*u});return[i,...h,t]}function Xs(i,t,e,n="red"){i.save(),i.beginPath(),i.strokeStyle=n,i.moveTo(t-5,e-5),i.lineTo(t+5,e+5),i.moveTo(t+5,e-5),i.lineTo(t-5,e+5),i.stroke(),i.restore()}const Qs=(i,t)=>i+Math.random()*(t-i);class lf{constructor(t){Y(this,"render");Y(this,"ctx");Y(this,"app");this.onAfterRender=this.onAfterRender.bind(this),this.app=t.app,t.customDebugCanvasEl.width=innerWidth,t.customDebugCanvasEl.height=innerHeight,this.ctx=t.customDebugCanvasEl.getContext("2d"),this.render=N.Render.create({canvas:t.matterCanvasEl,engine:t.physicsEngine,options:{width:innerWidth,height:innerHeight,wireframeBackground:"#2E5077",hasBounds:!0}}),N.Render.run(this.render),N.Events.on(this.render,"afterRender",this.onAfterRender)}onAfterRender(){N.Bounds.shift(this.render.bounds,{x:this.app.player.physicsBody.position.x-L.player.startPosition.x-L.debug.cameraOffset.x,y:this.app.player.physicsBody.position.y-L.player.startPosition.y-L.debug.cameraOffset.y});const t=-this.app.player.physicsBody.position.x+L.player.startPosition.x+L.debug.cameraOffset.x,e=-this.app.player.physicsBody.position.y+L.player.startPosition.y+L.debug.cameraOffset.y;this.ctx.clearRect(0,0,innerWidth,innerHeight),this.app.terrain.chunks.forEach(n=>{this.ctx.strokeStyle="#4DA1A9",this.ctx.strokeRect(n.bbox.x+t,n.bbox.y+e,n.bbox.width,n.bbox.height),this.ctx.beginPath(),this.ctx.moveTo(n.bbox.x+t,n.bbox.y+e),this.ctx.lineTo(n.bbox.right+t,n.bbox.bottom+e),this.ctx.stroke(),n.vertices.forEach(s=>{Xs(this.ctx,s.x+t,s.y+e,"#4DA1A9")}),n.offsetVertices.forEach(s=>{Xs(this.ctx,s.x+t,s.y+e,"#79D7BE")})})}}const al=Math.sqrt(3),uf=.5*(al-1),fn=(3-al)/6,Zs=i=>Math.floor(i)|0,Js=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function cf(i=Math.random){const t=hf(i),e=new Float64Array(t).map(s=>Js[s%12*2]),n=new Float64Array(t).map(s=>Js[s%12*2+1]);return function(r,o){let a=0,u=0,h=0;const c=(r+o)*uf,v=Zs(r+c),f=Zs(o+c),l=(v+f)*fn,d=v-l,p=f-l,m=r-d,_=o-p;let w,P;m>_?(w=1,P=0):(w=0,P=1);const E=m-w+fn,g=_-P+fn,x=m-1+2*fn,y=_-1+2*fn,b=v&255,C=f&255;let S=.5-m*m-_*_;if(S>=0){const M=b+t[C],V=e[M],A=n[M];S*=S,a=S*S*(V*m+A*_)}let T=.5-E*E-g*g;if(T>=0){const M=b+w+t[C+P],V=e[M],A=n[M];T*=T,u=T*T*(V*E+A*g)}let k=.5-x*x-y*y;if(k>=0){const M=b+1+t[C+1],V=e[M],A=n[M];k*=k,h=k*k*(V*x+A*y)}return 70*(a+u+h)}}function hf(i){const e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){const s=n+~~(i()*(256-n)),r=e[n];e[n]=e[s],e[s]=r}for(let n=256;n<512;n++)e[n]=e[n-256];return e}const ni="terrain-chunk",pf=cf();class df{constructor(t,e){Y(this,"bbox");Y(this,"bodies",[]);Y(this,"vertices",[]);Y(this,"offsetVertices",[]);this.initBoundingBox(t,e),this.initPhysicsBodies()}initBoundingBox(t,e){const n=Qs(L.terrain.chunks.diagonal.length.min,L.terrain.chunks.diagonal.length.max),s=ol(Qs(L.terrain.chunks.diagonal.angle.min,L.terrain.chunks.diagonal.angle.max)),r=t+n*Math.cos(s),o=e+n*Math.sin(s),a=r-t,u=o-e;this.bbox={x:t,y:e,right:r,bottom:o,width:a,height:u}}initSegments(){const t=[];return this.vertices=af({x:this.bbox.x,y:this.bbox.y},{x:this.bbox.right,y:this.bbox.bottom},L.terrain.chunks.divisions),this.offsetVertices=this.vertices.map(e=>{const n=pf(e.x*L.terrain.chunks.noise.freq,e.y*L.terrain.chunks.noise.freq);return{x:e.x,y:e.y+n*L.terrain.chunks.noise.amp}}),this.offsetVertices.forEach((e,n)=>{const s=n===this.offsetVertices.length-1,r=s?this.offsetVertices[n-1]:e,o=s?e:this.offsetVertices[n+1],a=Math.atan2(o.y-r.y,o.x-r.x),u=Math.hypot(r.x-o.x,r.y-o.y);t.push({position:r,angle:a,length:u})}),t}initPhysicsBodies(){this.initSegments().forEach(e=>{const n=N.Bodies.rectangle(e.position.x+e.length/2,e.position.y+L.terrain.chunks.thickness/2,e.length,L.terrain.chunks.thickness,{isStatic:!0,label:ni});N.Body.setCentre(n,{x:-e.length/2,y:-L.terrain.chunks.thickness/2},!0),N.Body.setAngle(n,e.angle),this.bodies.push(n)})}}const ff=(i,t,e)=>(1-e)*i+e*t,to=2*Math.PI,eo=function(i,t){return(i%t+t)%t},no=(i,t)=>{const e=eo(i-t,to),n=eo(t-i,to);return e<n?-e:n},io="terrain-rotation-sensor",vf="player-body",Ui="player-ground-sensor",mf=(i,t,e)=>i.find(n=>n.bodyA.label===t&&n.bodyB.label===e),ro=(i,t,e)=>i.filter(n=>n.bodyA.label===t&&n.bodyB.label===e);class gf{constructor(t){Y(this,"physicsEngine");Y(this,"physicsBody");Y(this,"groundSensor");Y(this,"terrainAngleSensor");Y(this,"desiredRotation",0);Y(this,"isBackflipping",!1);Y(this,"isGrounded",!1);Y(this,"isDead",!1);Y(this,"collidingTerrainChunks",[]);this.onCollisionStart=this.onCollisionStart.bind(this),this.onCollisionEnd=this.onCollisionEnd.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.reset=this.reset.bind(this),this.physicsEngine=t.physicsEngine,this.initGroundSensor(),this.initPhysicsBody(),this.initTerrainAngleSensor(),document.addEventListener("keydown",this.onKeyDown),On.on("resetPlayer",this.reset)}initPhysicsBody(){const t=N.Bodies.rectangle(L.player.startPosition.x,L.player.startPosition.y,L.player.width,L.player.height,{chamfer:{radius:L.player.chamfer},friction:L.player.friction,isStatic:!1,label:vf});this.physicsBody=N.Body.create({parts:[t,this.groundSensor]})}initTerrainAngleSensor(){this.terrainAngleSensor=N.Bodies.rectangle(L.player.startPosition.x,L.player.startPosition.y,L.player.terrainAngleSensor.width,L.player.terrainAngleSensor.height,{isSensor:!0,isStatic:!1,label:io}),N.Events.on(this.physicsEngine,"collisionStart",this.onCollisionStart),N.Events.on(this.physicsEngine,"collisionEnd",this.onCollisionEnd)}initGroundSensor(){this.groundSensor=N.Bodies.rectangle(L.player.startPosition.x,L.player.startPosition.y,L.player.width+L.player.groundSensorThickness*2,L.player.height+L.player.groundSensorThickness*2,{isSensor:!0,label:Ui})}update(){if(N.Body.setPosition(this.terrainAngleSensor,{x:this.physicsBody.position.x,y:this.physicsBody.position.y+L.player.terrainAngleSensor.height/2}),!this.isDead&&(this.isGrounded=this.collidingTerrainChunks.length>0,N.Body.setVelocity(this.physicsBody,{x:L.player.velocity.x,y:this.physicsBody.velocity.y}),N.Body.setAngularVelocity(this.physicsBody,0),!this.isBackflipping)){const t=no(this.physicsBody.angle,this.desiredRotation),e=ff(this.physicsBody.angle,this.physicsBody.angle+t,L.player.autoRotateLerpAmount);N.Body.setAngle(this.physicsBody,e)}}onCollisionStart(t){this.onTerrainAngleSensorCollisionStart(t.pairs),this.onGroundSensorCollisionStart(t.pairs)}onCollisionEnd(t){this.onGroundSensorCollisionEnd(t.pairs)}onTerrainAngleSensorCollisionStart(t){const e=mf(t,ni,io);e&&(this.desiredRotation=e.bodyA.angle)}onGroundSensorCollisionStart(t){const e=ro(t,ni,Ui).map(n=>n.bodyA);if(e.length){const n=this.collidingTerrainChunks.length<1;this.collidingTerrainChunks.push(...e),this.isBackflipping=!1,n&&this.onPlayerTerrainCollisionStart()}}onGroundSensorCollisionEnd(t){ro(t,ni,Ui).map(n=>n.bodyA).forEach(n=>{const s=this.collidingTerrainChunks.findIndex(r=>r.id===n.id);s>-1&&this.collidingTerrainChunks.splice(s,1)})}onPlayerTerrainCollisionStart(){let t=0;this.collidingTerrainChunks.forEach(s=>{t+=s.angle});const e=t/this.collidingTerrainChunks.length,n=no(this.physicsBody.angle,e);Math.abs(n)>=ol(45)&&(this.isDead=!0,On.emit("fail"))}onKeyDown(t){this.isDead||t.code==="Space"&&(this.isGrounded?this.doJump():this.doBackflip())}doJump(){N.Body.setVelocity(this.physicsBody,{x:this.physicsBody.velocity.x,y:L.player.velocity.jump})}doBackflip(){this.isBackflipping=!0,N.Body.setAngle(this.physicsBody,this.physicsBody.angle-L.player.backFlipRotationSpeed)}reset(){N.Events.off(this.physicsEngine,"collisionStart",this.onCollisionStart),N.Events.off(this.physicsEngine,"collisionEnd",this.onCollisionEnd),N.Body.setPosition(this.physicsBody,L.player.startPosition),N.Body.setAngle(this.physicsBody,0),N.Body.setVelocity(this.physicsBody,{x:0,y:0}),this.isDead=!1,this.isBackflipping=!1,this.isGrounded=!1,N.Events.on(this.physicsEngine,"collisionStart",this.onCollisionStart),N.Events.on(this.physicsEngine,"collisionEnd",this.onCollisionEnd)}}class _f{constructor(t){Y(this,"physicsEngine");Y(this,"chunks",[]);this.physicsEngine=t.physicsEngine,this.initTerrainChunks()}initTerrainChunks(){let t=200,e=200;for(let n=0;n<100;n++){const s=new df(t,e);this.chunks.push(s),N.Composite.add(this.physicsEngine.world,s.bodies),t=s.bbox.right,e=s.bbox.bottom}}}class bf{constructor(){Y(this,"physicsEngine");Y(this,"runner");Y(this,"debugRenderer");Y(this,"terrain");Y(this,"player");var t;this.onFail=this.onFail.bind(this),this.onRestart=this.onRestart.bind(this),this.initPhysics(),this.initDebugRenderer(),this.initTerrain(),this.initPlayer(),sf(this),On.on("fail",this.onFail),(t=document.querySelector("#fail button"))==null||t.addEventListener("click",this.onRestart)}initPhysics(){this.onPhysicsAfterUpdate=this.onPhysicsAfterUpdate.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.physicsEngine=N.Engine.create({}),this.runner=N.Runner.create(),N.Runner.run(this.runner,this.physicsEngine),N.Events.on(this.physicsEngine,"afterUpdate",this.onPhysicsAfterUpdate),document.addEventListener("mousemove",this.onMouseMove)}initDebugRenderer(){this.debugRenderer=new lf({matterCanvasEl:document.querySelector("canvas#matter-canvas"),customDebugCanvasEl:document.querySelector("canvas#debug-canvas"),physicsEngine:this.physicsEngine,app:this})}initTerrain(){this.terrain=new _f({physicsEngine:this.physicsEngine})}initPlayer(){this.player=new gf({physicsEngine:this.physicsEngine}),N.Composite.add(this.physicsEngine.world,[this.player.physicsBody,this.player.terrainAngleSensor])}onPhysicsAfterUpdate(){this.player.update();const t=document.querySelector("#gui-distance");t&&(t.innerText=(this.player.physicsBody.position.x/100).toFixed(0))}onMouseMove(t){}onFail(){document.querySelector("#fail").style.display="flex",ir.to(this.physicsEngine.timing,{timeScale:0,ease:"power4.out",duration:2})}onRestart(){document.querySelector("#fail").style.display="none",On.emit("resetPlayer"),ir.killTweensOf(this.physicsEngine.timing),this.physicsEngine.timing.timeScale=1}}new bf;
